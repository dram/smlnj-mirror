# Makefile for SML/NJ Library documentation
#
# COPYRIGHT (c) 2020 The Fellowship of SML/NJ (http://www.smlnj.org)
# All rights reserved.
#
# @configure_input@
#

SHELL =         @SHELL@
INSTALL =       @INSTALL@
@SET_MAKE@

ASCIIDOCTOR =   @ASCIIDOCTOR@

SMLNJ_VERSION = @SMLNJ_VERSION@
SMLNJ_DATE =    @SMLNJ_DATE@

ATTRS =         --attribute=smlnj-version=$(SMLNJ_VERSION) \
                --attribute=release-date="$(SMLNJ_DATE)"

# default target base
#
TARGET_BASE =           http://smlnj.org

# place to put documentation for doc target
#
DOC_DIR =               @OUT_DIR@
HTML_DST_ROOT =         $(DOC_DIR)/html
STYLES_DST =            $(HTML_DST_ROOT)/styles  # not used yet
IMAGES_DST =            $(HTML_DST_ROOT)/images  # not used yet

# root path to place generated HTML files for the SML/NJ web site
#
WEB_HTMLDST_ROOT =      @ROOT_DIR@/htdocs
WEB_STYLES_DST =        $(WEB_HTML_DST_ROOT)/styles
WEB_IMAGES_DST =        $(WEB_HTML_DST_ROOT)/images

include @MK_DIR@/doc-rules.gmk

# we have one sub-directory per documented library
#
DOC_SUBDIRS =           JSON

HTML_SUBDIRS =		$(addprefix $(HTML_DST_ROOT)/,$(DOC_SUBDIRS))

STYLE_IN_FILES =        $(notdir $(wildcard styles/*.in))
STYLE_DST_FILES =       $(addprefix $(STYLES_DST)/,$(STYLE_IN_FILES:_css.in=.css)))
IMAGE_FILES =           $(notdir $(wildcard images/*.png images/*jpg))
IMAGE_DST_FILES =       $(addprefix $(IMAGES_DST)/,$(IMAGE_FILES))

.PHONY:         doc
doc:            html $(DOC_DIR)


include @MK_DIR@/clean-rules.gmk

CLEAN_SUBDIRS = $(DOC_SUBDIRS)
