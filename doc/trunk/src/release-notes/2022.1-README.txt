// A template for creating release notes for a version
//
:version: 2022.1
:date: ??
:dist-dir: https://smlnj.org/dist/working/{version}/
:history: {dist-dir}HISTORY.html
:release-notes: {dist-dir}{version}-README.html
:stem: latexmath
:source-highlighter: pygments
:stylesheet: release-notes.css
:notitle:

= Standard ML of New Jersey Release Notes

[subs=attributes]
++++
<div class="smlnj-banner">
  <span class="title"> Standard ML of New Jersey <br/> Release Notes </span>
  <br/> <br/>
  <span class="subtitle"> Version {version} <br/> {date} </span>
</div>
++++

''''''''
--
SML/NJ HOME::
  https://www.smlnj.org/index.html[[.tt]#https://smlnj.org#]
FILES::
  {dist-dir}index.html[[.tt]#{dist-dir}#]
--
''''''''

== Summary

== Details

=== Compiler

Update LLVM to 14.0.5

=== Runtime System

=== SML/NJ Library

--
  * Added the `findAndRemove` function to `ORD_MAP` interface.
  * The *SExp* library now uses *Scheme* syntax for string values.
  * The *SExp* parser accepts empty files as valid input (producing
    an empty list of S-Expressions).
--

=== Installation

The `config/install.sh` script continues to work as before.  We have added a `-dev`
command-line option to enable cross compilation (__i.e.__, it compiles *LLVM*
for all of the supported target architectures).

== Bugs

Here is a list of tracked bugs fixed (or closed) with this release, please see the
https://smlnj-gforge.cs.uchicago.edu/projects/smlnj-bugs[bug tracker]
for more details.
Note that this list is relative to Version 110.99 and includes fixes that were
part of the 110.99.* patch releases.

[.buglist,cols="^1,<15"]
|=======
| [.bugid]#65#
| Garbage collection does not trigger `sigGC`
| [.bugid]#284#
| Compiler bug: Contract: UsageMap on 132
| [.bugid]#290#
| Incorrect pattern matching for exceptons
| [.bugid]#291#
| Signals are not delivered for corresponding events
| [.bugid]#306#
| Word8VectorSlice: mapping a subslice produces wrong result or crashes SML/NJ
| [.bugid]#307#
| `SExpParser.parseFile` should return empty list on empty file
| [.bugid]#309#
| SExp: parsing the output of the printer produces a different SExp
| [.bugid]#310#
| Error when REPL tries to print value of type `Posix.FileSys.ST.stat`
| [.bugid]#312#
| `CM.make` is unable to handle filenames that contain a backslash
| [.bugid]#314#
| `IEEEReal.setRoundingMode` is a no-op on Linux
|=======

The following unnumbered bug was also fixed:
--
  * Performance bug in the compilation of deeply-nested modules.
--

The following bugs were reported for the legacy version, but do not affect
the new versions.

[.buglist,cols="^1,<15"]
|=======
| [.bugid]#313#
| `Real.fromLargeInt` crashes on large integer input
|=======

== Supported systems

We believe that SML/NJ will build and run on the following systems, but have only
tested some of them:

[.support-table,cols="^2s,^4v,^3v",options="header",strips="none"]
|=======
| Architecture | Operating System | Status
| AMD64 | FreeBSD |
| | macOS 11 (Big Sur) | Tested
| | macOS 12 (Monterey) | Tested
| | Ubuntu 20.04 | Tested
|=======
