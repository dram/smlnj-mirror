<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>4.1.2 Linking and execution</TITLE>
<META NAME="description" CONTENT="4.1.2 Linking and execution">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node24.html">
<LINK REL="previous" HREF="node22.html">
<LINK REL="up" HREF="node21.html">
<LINK REL="next" HREF="node24.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html552"
 HREF="node24.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html548"
 HREF="node21.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html542"
 HREF="node22.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html550"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html553"
 HREF="node24.html">4.1.3 Registers</A>
<B> Up:</B> <A NAME="tex2html549"
 HREF="node21.html">4.1 Structure CM</A>
<B> Previous:</B> <A NAME="tex2html543"
 HREF="node22.html">4.1.1 Compiling</A>
 &nbsp <B>  <A NAME="tex2html551"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00051200000000000000">
4.1.2 Linking and execution</A>
</H3>

<P>
In SML/NJ, linking means executing top-level code (i.e., module
creation and initialization code) of each compilation unit.  The
resulting bindings can then be registered at the interactive top
level.

<P>
 
<PRE>

  val make : string -&gt; bool
  val autoload : string -&gt; bool
</PRE>

<P>
 
<TT> CM.make</TT> first acts like <TT> CM.recomp</TT>.  If the
(re-)compilation is successful, then it proceeds by linking all
modules that require linking.  Provided there are no link-time errors,
it finally introduces new bindings at top level.

<P>
During the course of the same <TT> CM.make</TT>, the code of each
compilation module that is reachable from the root will be executed at
most once.  Code in units that are marked as <I> private</I> (see
Section&nbsp;<A HREF="node34.html#sec:sharing">4.3</A>) will be executed exactly once.  Code in
other units will be executed only if the unit has been recompiled
since it was executed last time or if it depends on another
compilation unit whose code has been executed since.

<P>
In effect, different invocations of <TT> CM.make</TT> (and <TT> 
CM.autoload</TT>) will share dynamic state created at link time as much as
possible unless the compilation units in question have been explicitly
marked private.

<P>
 
<TT> CM.autoload</TT> acts like <TT> CM.make</TT>, only ``lazily''. See
Section&nbsp;<A HREF="node33.html#sec:autoload">4.2</A> for more information.

<P>
As before, the result of <TT> CM.make</TT> indicates success or failure of
the operation.  The result of <TT> CM.autoload</TT> indicates success or
failure of the <EM> registration</EM>.  (It does not know yet whether
loading will actually succeed.)

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html552"
 HREF="node24.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html548"
 HREF="node21.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html542"
 HREF="node22.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html550"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html553"
 HREF="node24.html">4.1.3 Registers</A>
<B> Up:</B> <A NAME="tex2html549"
 HREF="node21.html">4.1 Structure CM</A>
<B> Previous:</B> <A NAME="tex2html543"
 HREF="node22.html">4.1.1 Compiling</A>
 &nbsp <B>  <A NAME="tex2html551"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Matthias Blume</I>
<BR><I>2001-07-19</I>
</ADDRESS>
</BODY>
</HTML>
