<html lang="en">
<head>
<title>SML mode - The Emacs SML editing mode</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="SML mode - The Emacs SML editing mode">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">SML mode - The Emacs SML editing mode</h1>
<div class="node">
<p><hr>
<a name="Top"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Copying">Copying</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<ul class="menu">
<li><a accesskey="1" href="#Copying">Copying</a>:              You can copy SML mode
<li><a accesskey="2" href="#Introduction">Introduction</a>:         Setting things up
<li><a accesskey="3" href="#SML-Mode">SML Mode</a>:             Editing SML source
<li><a accesskey="4" href="#Interaction-Mode">Interaction Mode</a>:     Running ML processes
<li><a accesskey="5" href="#Configuration">Configuration</a>:        Menus, highlighting, setting defaults

</li></ul>
<p>Indexes
</p>
<ul class="menu">
<li><a accesskey="6" href="#Command-Index">Command Index</a>:        Commands you can invoke
<li><a accesskey="7" href="#Variable-Index">Variable Index</a>:       Variables you can set
<li><a accesskey="8" href="#Key-Index">Key Index</a>:            Default keybindings

</li></ul>
<p>Introduction
</p>
<ul class="menu">
<li><a accesskey="9" href="#Contributors">Contributors</a>:         Who did what
<li><a href="#Getting-Started">Getting Started</a>:      What to tell Emacs
<li><a href="#Getting-Help">Getting Help</a>:         How Emacs can help

</li></ul>
<p>SML Mode
</p>
<ul class="menu">
<li><a href="#Basics">Basics</a>:               On entering SML mode
<li><a href="#Indentation">Indentation</a>:          Prettying SML text
<li><a href="#Magic-Insertion">Magic Insertion</a>:      Templates and electric keys
<li><a href="#SML-Mode-Defaults">SML Mode Defaults</a>:    Variables controlling indentation

</li></ul>
<p>Interaction Mode
</p>
<ul class="menu">
<li><a href="#Running-ML">Running ML</a>:           Commands to run the ML compiler in a buffer
<li><a href="#ML-Interaction">ML Interaction</a>:       Sending program fragments to the compiler
<li><a href="#Tracking-Errors">Tracking Errors</a>:      Finding reported syntax errors
<li><a href="#Process-Defaults">Process Defaults</a>:     Setting defaults for process interaction

</li></ul>
<p>Configuration
</p>
<ul class="menu">
<li><a href="#Hooks">Hooks</a>:                Creating hooks
<li><a href="#Key-Bindings">Key Bindings</a>:         Binding commands to keys
<li><a href="#Highlighting">Highlighting</a>:         Syntax colouring
<li><a href="#Advanced-Topics">Advanced Topics</a>:      You may need to speak Emacs Lisp
</ul>

<!-- ============================================================= COPYING -->
<div class="node">
<p><hr>
<a name="Copying"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Introduction">Introduction</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<!-- ======================================================== INTRODUCTION -->
<div class="node">
<p><hr>
<a name="Introduction"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SML-Mode">SML Mode</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying">Copying</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Introduction</h2>

<!-- == Introduction, SML Mode, Copying, Top ============================= -->
<p class="noindent">SML mode is a major mode for Emacs for editing Standard ML. It has
some novel bugs, and some nice features:

     <ul>
<li>Automatic indentation of sml code&mdash;a number of variables to customise
the indentation. 
<li>Easy insertion for commonly used templates like let, local, signature,
and structure declarations, with minibuffer prompting for types and
expressions. 
<li>Magic pipe insertion: <code>|</code> automatically determines if it is used
in a case or fun construct, and indents the next line as appropriate,
inserting <code>=&gt;</code> or the name of the function. 
<li>Inferior shell for running ML. There's no need to leave Emacs, just keep
on editing while the compiler runs in another window. 
<li>Automatic &ldquo;use file&rdquo; in the inferior shell&mdash;you can send files,
buffers, or regions of code to the ML subprocess. 
<li>Menus, and syntax and keyword highlighting supported for Emacs 19 and
derivatives. 
<li>Parsing errors from the inferior shell, and repositioning the
source with next-error&mdash;just like in c-mode. 
<li>SML mode can be easily configured to work with a number of Standard
ML compilers, and other SML based tools. 
</ul>

<ul class="menu">
<li><a accesskey="1" href="#Contributors">Contributors</a>:         Who did what
<li><a accesskey="2" href="#Getting-Started">Getting Started</a>:      What to tell Emacs
<li><a accesskey="3" href="#Getting-Help">Getting Help</a>:         How Emacs can help
</ul>

<!-- ======================================================== CONTRIBUTORS -->
<div class="node">
<p><hr>
<a name="Contributors"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getting-Started">Getting Started</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.1 Contributors to the SML mode</h3>

<p><a name="index-Contributors-1"></a><a name="index-Authors-2"></a>
Contributions to the package are welcome.  I have limited time to work
on this project, but I will gladly add any code that you contribute to
me to this package.

   <p>Although the history of sml-mode is obscure, it seems that
the following persons have made contributions to sml-mode:

     <ul>
<li>Lars Bo Nielsen wrote the original version of the code, providing the
sml editing mode and the inferior-sml support.

     <li>Olin Shivers (`<samp><span class="samp">shivers@ai.mit.edu</span></samp>') hacked the inferior-sml support
to use comint and call the whole thing ml-mode.

     <li>Steven Gilmore supposedly provided some early attempt at menubar support.

     <li>Matthew J. Morley (`<samp><span class="samp">matthew@verisity.com</span></samp>') was maintainer for
a long time (until version 3.4) and provided many additions and fixes in
all areas.

     <li>Frederick Knabe (`<samp><span class="samp">knabe@ecrc.de</span></samp>') provided the original code for
font-lock and hilite support as well as for proper handling of nested
comments and of all the string escape sequences.

     <li>Matthias Blume (`<samp><span class="samp">blume@kurims.kyoto-u.ac.jp</span></samp>') provided a sml-make
which was replaced by sml-compile.

     <li>Monnier Stefan (`<samp><span class="samp">monnier@cs.yale.edu</span></samp>') completely reworked the
indentation engine as well as most of the rest of the code and is
the current maintainer since after version 3.4.

   </ul>

<!-- ===================================================== GETTING STARTED -->
<div class="node">
<p><hr>
<a name="Getting-Started"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getting-Help">Getting Help</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Contributors">Contributors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.2 Getting started</h3>

<!-- == Getting Started, Getting Help, Contributors, Introduction ======== -->
<p class="noindent">With luck your system administrator will have installed SML mode
somewhere convenient, so it will just magically all work&mdash;you can
skip the rest of this getting started section. Otherwise you will need
to tell Emacs where to find all the SML mode <samp><span class="file">.el</span></samp> files, and
when to use them. The where is addressed by locating the Lisp code on
your Emacs Lisp load path&mdash;you may have to create a directory for this,
say <samp><span class="file">/home/mjm/elisp</span></samp>, and then insert the following lines in your
<samp><span class="file">/home/mjm/.emacs</span></samp> file:

<pre class="lisp">     (add-to-list 'load-path "/home/mjm/elisp")
     (autoload 'sml-mode "sml-mode" "Major mode for editing SML." t)
     (autoload 'run-sml "sml-proc" "Run an inferior SML process." t)
</pre>
   <p class="noindent">The first line adjusts Emacs' internal search path so it can locate the
Lisp source you have copied to that directory; the second and third
lines tell Emacs to load the code automatically when it is needed. You
can then switch any Emacs buffer into SML mode by entering the command

<pre class="example">     M-x sml-mode
</pre>
   <p class="noindent">It is usually more convenient to have Emacs automatically place the
buffer in SML mode whenever you visit a file containing ML
programs. The simplest way of achieving this is to put something like

<pre class="lisp">     (add-to-list 'auto-mode-alist '("\\.\\(sml\\|sig\\)\\'" . sml-mode))
</pre>
   <p class="noindent">also in your <samp><span class="file">.emacs</span></samp> file. Subsequently (after a restart), any
files with these extensions will be placed in SML mode buffers when
you visit them.

   <p>You may want to pre-compile the <samp><span class="file">sml-*.el</span></samp> files (<kbd>M-x
byte-compile-file</kbd>) for greater speed&mdash;byte compiled code loads and
runs somewhat faster.

<!-- ======================================================== GETTING HELP -->
<div class="node">
<p><hr>
<a name="Getting-Help"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getting-Started">Getting Started</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Introduction">Introduction</a>

</div>

<h3 class="section">1.3 Help!</h3>

<!-- == Getting Help, , Getting Started, Introduction ==================== -->
<p class="noindent">You're reading it. Apart from the on-line info tree (<kbd>C-h i</kbd> is the
Emacs key to enter the <code>info</code> system&mdash;you should follow the brief
tutorial if this is unfamiliar), there are further details on specific
commands in their documentation strings. Only the most useful
SML mode commands are documented in the info tree: to find out more
use Emacs' help facilities.

   <p>Briefly, to get help on a specific function use <kbd>C-h f</kbd> and enter
the command name. All (almost all, then) SML mode commands begin
with <code>sml-</code>, so if you type this and press &lt;TAB&gt; (for
completion) you will get a list of all commands. Another way is to use
<kbd>C-h a</kbd> and enter the string <code>sml</code>. This is command apropos; it
will list all commands with that sub-string in their names, and any key
binding they may have in the current buffer. Command apropos gives a
one-line synopsis of what each command does.

   <p>Some commands are also variables&mdash;such things are allowed in Lisp, if
not in ML! See <a href="#Command-Index">Command Index</a>, for a list of (info) documented
functions. See <a href="#Variable-Index">Variable Index</a>, for a list of user settable variables
to control the behaviour of SML mode.

   <p>Before accessing this information on-line from within Emacs you may have
to set the variable <code>sml-mode-info</code>. Put in your <samp><span class="file">.emacs</span></samp> file
something like:

   <p><a name="index-sml_002dmode_002dinfo-3"></a><a name="index-sml_002dmode_002dinfo-4"></a><a name="index-g_t_0040kbd_007bC_002dc-C_002di_007d-5"></a>
<pre class="lisp">     (setq sml-mode-info "/home/mjm/info/sml-mode.info")
</pre>
   <p class="noindent">When different from the default this variable should be a string giving
the absolute name of the <samp><span class="file">.info</span></samp> file. Then <kbd>C-c C-i</kbd> in
SML mode (i.e., the command <kbd>M-x sml-mode-info</kbd>) will bring up
the manual. This help is also accessible from the menu. (Resetting this
variable will not be necessary if your site administrator has been kind
enough to install SML mode and its attendant documentation in the
Emacs hierarchy.)

<!-- ============================================================ SML MODE -->
<div class="node">
<p><hr>
<a name="SML-Mode"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Interaction-Mode">Interaction Mode</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Introduction">Introduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Editing with SML Mode</h2>

<!-- == SML Mode, Interaction Mode, Introduction, Top ==================== -->
<p class="noindent">Now SML mode provides just a few additional editing commands. Most of
the work has gone into implementing the indentation algorithm which, if
you think about it, has to be complicated for a language like
ML. See <a href="#SML-Mode-Defaults">Indentation Defaults</a>, for details on how
to control some of the behaviour of the indentation algorithm. Principal
goodies are the `electric pipe' feature, and the ability to insert
common SML forms (macros or templates).

<ul class="menu">
<li><a accesskey="1" href="#Basics">Basics</a>:               On entering SML mode
<li><a accesskey="2" href="#Indentation">Indentation</a>:          Prettying SML text
<li><a accesskey="3" href="#Magic-Insertion">Magic Insertion</a>:      Templates and electric keys
<li><a accesskey="4" href="#SML-Mode-Defaults">SML Mode Defaults</a>:    Variables controlling indentation
</ul>

<!-- ============================================================== BASICS -->
<div class="node">
<p><hr>
<a name="Basics"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Indentation">Indentation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SML-Mode">SML Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#SML-Mode">SML Mode</a>

</div>

<h3 class="section">2.1 On entering SML mode</h3>

<!-- == Basics, Indentation, SML Mode, SML Mode ========================== -->
<p class="noindent">

<div class="defun">
&mdash; Command: <b>sml-mode</b><var><a name="index-sml_002dmode-6"></a></var><br>
<blockquote><p>This switches a buffer into SML mode. This is a <em>major mode</em> in
Emacs. To get out of SML mode the buffer's major mode must be set to
something else, like <tt>text-mode</tt>. See <a href="#Getting-Started">Getting Started</a>, for details
on how to set this up automatically when visiting an SML file. 
</p></blockquote></div>

   <p>Emacs is all hooks of course. A hook is a variable: if the variable is
non-nil it binds a list of Emacs Lisp functions to be run in some order
(usually left to right). You can customise SML mode with these
hooks:

<div class="defun">
&mdash; Hook: <b>sml-mode-hook</b><var><a name="index-sml_002dmode_002dhook-7"></a></var><br>
<blockquote><p>Default: <code>nil</code>

        <p>This is run every time a new SML mode buffer is created (or if you
type <kbd>M-x sml-mode</kbd>). This is one place to put your preferred key
bindings. See <a href="#Configuration">Configuration</a>, for some examples. 
</p></blockquote></div>

<!-- ========================================================= INDENTATION -->
<div class="node">
<p><hr>
<a name="Indentation"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Magic-Insertion">Magic Insertion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basics">Basics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#SML-Mode">SML Mode</a>

</div>

<h3 class="section">2.2 Automatic indentation</h3>

<!-- == Indentation, Magic Insertion, Basics, SML Mode =================== -->
<p class="noindent">ML is a complicated language to parse, let alone compile. The
indentation algorithm is a little wooden (for some tastes), and the best
advice is not to fight it! There are several variables that can be
adjusted to control the indentation algorithm (see <a href="#SML-Mode-Defaults">Customising SML Mode</a>, below).

<div class="defun">
&mdash; Command: <b>indent-for-tab-command</b><var><a name="index-indent_002dfor_002dtab_002dcommand-8"></a></var><br>
<blockquote><p>Key: &lt;TAB&gt;
<a name="index-g_t_0040key_007bTAB_007d-9"></a>
This command indents the current line. If you set the indentation of the
previous line by hand, <code>indent-for-tab-command</code> will indent relative to
this setting. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>indent-region</b><var><a name="index-indent_002dregion-10"></a></var><br>
<blockquote><p>Key: <kbd>C-M-\</kbd>
<a name="index-g_t_0040kbd_007bC_002dM_002d_005c_007d-11"></a>
Indent the current region. Be patient if the region is large (like the
whole buffer). 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-back-to-outer-indent</b><var><a name="index-sml_002dback_002dto_002douter_002dindent-12"></a></var><br>
<blockquote><p>Key: <kbd>M-&lt;TAB&gt;</kbd>
<a name="index-g_t_0040kbd_007bM_002d_0040key_007bTAB_007d_007d-13"></a>
Unindents the line to the next outer level of indentation. 
</p></blockquote></div>

   <p>Further indentation commands that Emacs provides (generically, for all
modes) that you may like to recall:

     <ul>
<li><kbd>M-x newline-and-indent</kbd>

     <p>On &lt;LFD&gt; by default. 
<a name="index-g_t_0040key_007bLFD_007d-14"></a>Insert a newline, then indent according to the major mode. See <a href="emacs.html#Program-Indent">Indentation for Programs</a>, for
details.

     <li><kbd>M-x indent-rigidly</kbd>

     <p>On <kbd>C-x &lt;TAB&gt;</kbd> by default. 
<a name="index-g_t_0040kbd_007bC_002dx-_0040key_007bTAB_007d_007d-15"></a>Moves all lines in the region right by its argument (left, for negative
arguments). See <a href="emacs.html#Indentation">Indentation</a>.

     <li><kbd>M-x indent-for-comment</kbd>

     <p>On <kbd>M-;</kbd> by default. 
<a name="index-g_t_0040kbd_007bM_002d_003b_007d-16"></a>Indent this line's comment to comment column, or insert an empty
comment. See <a href="emacs.html#Comment-Commands">Comment Commands</a>.

     <li><kbd>M-x indent-new-comment-line</kbd>

     <p>On <kbd>M-&lt;LFD&gt;</kbd> by default. 
<a name="index-g_t_0040kbd_007bM_002d_0040key_007bLFD_007d_007d-17"></a>Break line at point and indent, continuing comment if within one. 
See <a href="emacs.html#Multi_002dLine-Comments">Multi-Line Comments</a>. 
</ul>

   <p><a name="index-g_t_0040kbd_007bC_002dx-_003b_007d-18"></a>As with other language modes, <kbd>M-;</kbd> gives you a comment at the end
of the current line. The column where the comment starts is determined
by the variable <code>comment-column</code>&mdash;default is 40, but it can be
changed with <code>set-comment-column</code> (on <kbd>C-x ;</kbd> by default).

<!-- ===================================================== MAGIC INSERTION -->
<div class="node">
<p><hr>
<a name="Magic-Insertion"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#SML-Mode-Defaults">SML Mode Defaults</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Indentation">Indentation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#SML-Mode">SML Mode</a>

</div>

<h3 class="section">2.3 Electric features</h3>

<!-- == Magic Insertion, SML Mode Defaults, Indentation, SML Mode ======== -->
<p class="noindent">Electric keys are generally pretty irritating, so those provided by
SML mode are fairly muted. The only truly electric key is <kbd>;</kbd>,
and this has to be enabled to take effect.

<div class="defun">
&mdash; Command: <b>sml-electric-pipe</b><var><a name="index-sml_002delectric_002dpipe-19"></a></var><br>
<blockquote><p>Key: <kbd>M-|</kbd>
<a name="index-g_t_0040kbd_007bM_002d_007c_007d-20"></a>
When the point is in a `case' statement this opens a new line, indents
and inserts <code>| =&gt;</code> leaving point just before the double arrow; if
the enclosing construct is a `fun' declaration, the newline is indented
and the function name copied at the appropriate column. Generally, try
it whenever a <code>|</code> is wanted&mdash;you'll like it! 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-electric-space</b><var><a name="index-sml_002delectric_002dspace-21"></a></var><br>
<blockquote><p>Key: <kbd>M-SPC</kbd>
<a name="index-g_t_0040kbd_007bM_002dSPC_007d-22"></a>
When the point is after a keyword like `let', this inserts the
corresponding predefined skeleton if one exists.  Else it just inserts a
space.  Another way to insert those skeletons is to use
<code>sml-insert-form</code>, described below. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-electric-semi</b><var><a name="index-sml_002delectric_002dsemi-23"></a></var><br>
<blockquote><p>Key: <kbd>;</kbd>
<a name="index-g_t_0040kbd_007b_003b_007d-24"></a>
Just inserts a semi-colon, usually. The behaviour of this command is
governed by the variable <code>sml-electric-semi-mode</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>sml-electric-semi-mode</b><var><a name="index-sml_002delectric_002dsemi_002dmode-25"></a></var><br>
<blockquote><p>Default: <code>nil</code>

        <p>If this variable is <code>nil</code>, <code>sml-electric-semi</code> just inserts a
semi-colon, otherwise it inserts a semi-colon and a newline, and indents
the newline for SML. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-insert-form</b><var><a name="index-sml_002dinsert_002dform-26"></a></var><br>
<blockquote><p>Key: <kbd>C-c &lt;RET&gt;</kbd>
<a name="index-g_t_0040kbd_007bC_002dc-_0040key_007bRET_007d_007d-27"></a>
Interactive short-cut to insert common ML forms (a.k.a. macros, or
templates). Recognised forms are `let', `local', `case', `abstype',
`datatype', `signature', `structure', and `functor'. Except for `let'
and `local', these will prompt for appropriate parameters like functor
name and signature, etc.. This command prompts in the mini-buffer, with
completion.

        <p>By default <kbd>C-c &lt;RET&gt;</kbd> will insert at point, with the
indentation of the current column; if you give a prefix argument (i.e.,
<kbd>C-u C-c &lt;RET&gt;</kbd>) the command will insert a newline first,
indent, and then insert the template. 
</p></blockquote></div>

   <p><code>sml-insert-form</code> is also extensible: see <a href="#Configuration">Configuration</a> for
further details.

<!-- ======================================================= MODE DEFAULTS -->
<div class="node">
<p><hr>
<a name="SML-Mode-Defaults"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Magic-Insertion">Magic Insertion</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#SML-Mode">SML Mode</a>

</div>

<h3 class="section">2.4 Indentation defaults</h3>

<!-- == SML Mode Defaults, , Magic Insertion, SML Mode =================== -->
<p class="noindent">Several variables try to control the indentation algorithm and other
features of SML mode.  Most of them are still in flux so they are not
described here yet. 
If the default values are not acceptable you can set these variables
permanently in your <samp><span class="file">.emacs</span></samp> file. See <a href="#Configuration">Configuration</a>, for
details and examples.

<div class="defun">
&mdash; Variable: <b>sml-indent-level</b><var><a name="index-sml_002dindent_002dlevel-28"></a></var><br>
<blockquote><p><a name="index-sml_002dindent_002dlevel-29"></a>Default: <code>4</code>

        <p>This variable controls the block indentation level. 
</p></blockquote></div>

<!-- end vtable -->
<!-- ========================================================= INTERACTION -->
<div class="node">
<p><hr>
<a name="Interaction-Mode"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuration">Configuration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SML-Mode">SML Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Running ML under Emacs</h2>

<!-- == Interaction Mode, Configuration, SML Mode, Top =================== -->
<p class="noindent">The most useful feature of SML mode is that it provides a convenient
interface to the compiler. How serious users of ML put up with a
teletype interface to the compiler is beyond me... but perhaps there
are other interfaces to compilers that require one to part with serious
money. Such remarks can quickly become dated&mdash;in this case, let's hope
so!

   <p>Anyway, SML mode provides an interaction mode,
<code>inferior-sml-mode</code>, where the compiler runs in a separate buffer
in a window or frame of its own. You can use this buffer just like a
terminal, but it's usually more convenient to mark some text in the
SML mode buffer and have Emacs communicate with the sub-process. The
features discussed below are syntax-independent, so they should work
with a wide range of ML-like tools and compilers. See <a href="#Process-Defaults">Process Defaults</a>, for some hints.

   <p><a name="index-inferior_002dsml_002dmode-30"></a><code>inferior-sml-mode</code> is a specialisation of the <samp><span class="file">comint</span></samp>
package that comes with Emacs and XEmacs.

<ul class="menu">
<li><a accesskey="1" href="#Running-ML">Running ML</a>:           Commands to run the ML compiler in a buffer
<li><a accesskey="2" href="#ML-Interaction">ML Interaction</a>:       Sending program fragments to the compiler
<li><a accesskey="3" href="#Tracking-Errors">Tracking Errors</a>:      Finding reported syntax errors
<li><a accesskey="4" href="#Process-Defaults">Process Defaults</a>:     Setting defaults for process interaction
</ul>

<!-- ========================================================== RUNNING ML -->
<div class="node">
<p><hr>
<a name="Running-ML"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#ML-Interaction">ML Interaction</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Interaction-Mode">Interaction Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interaction-Mode">Interaction Mode</a>

</div>

<h3 class="section">3.1 Starting the compiler</h3>

<!-- == Running ML, ML Interaction, Interaction Mode, Interaction Mode == -->
<p class="noindent">Start your favourite ML compiler with the command

<pre class="example">     <kbd>M-x run-sml</kbd>
</pre>
   <p class="noindent">This creates a process interaction buffer that inherits some key
bindings from SML mode and from <samp><span class="file">comint</span></samp> (see <a href="emacs.html#Shell-Mode">Shell Mode</a>). Starting the ML compiler adds some
functions to SML mode buffers so that program text can be
communicated between editor and compiler (see <a href="#ML-Interaction">ML Interaction</a>).

   <p>The name of the ML compiler is the first thing you should know how to
specify:

<div class="defun">
&mdash; Variable: <b>sml-program-name</b><var><a name="index-sml_002dprogram_002dname-31"></a></var><br>
<blockquote><p>Default: <code>"sml"</code>

        <p>The program to run as ML. You might need to specify the full path name
of the program. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>sml-default-arg</b><var><a name="index-sml_002ddefault_002darg-32"></a></var><br>
<blockquote><p>Default: <code>""</code>

        <p>Useful for Poly/ML users who may supply a database file, or others who
have wrappers for setting various options around the command to run the
compiler. Moscow ML people might set this to <code>"-P full"</code>, etc.. 
</p></blockquote></div>

   <p>The variable <code>sml-program-name</code> is a string holding the name
of the program <em>as you would type it at the shell</em>. You
can always choose a program different to the default by invoking

<pre class="example">     <kbd>C-u M-x run-sml</kbd>
</pre>
   <p class="noindent">With the prefix argument Emacs will prompt for the command name and any
command line arguments to pass to the compiler. Thereafter Emacs will
use this new name as the default, but for a permanent change you should
set this in your <samp><span class="file">.emacs</span></samp> with, e.g.:

<pre class="lisp">     (setq sml-program-name "nj-sml")
</pre>
   <div class="defun">
&mdash; Command: <b>run-sml</b><var><a name="index-run_002dsml-33"></a></var><br>
<blockquote><p>Launches ML as an inferior process in another buffer; if an ML process
already exists, just switch to the process buffer. A prefix argument
allows you to edit the command line to specify the program, and any
command line options. 
</p></blockquote></div>

<div class="defun">
&mdash; Hook: <b>inferior-sml-mode-hook</b><var><a name="index-inferior_002dsml_002dmode_002dhook-34"></a></var><br>
<blockquote><p>Default: <code>nil</code>

        <p><kbd>M-x run-sml</kbd> runs <code>comint-mode-hook</code> and
<code>inferior-sml-mode-hook</code> hooks in that order, but <em>after</em> the
compiler is started. Use <code>inferior-sml-mode-hook</code> to set any
<code>comint</code> buffer-local configurations for SML mode you like. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>switch-to-sml</b><var><a name="index-switch_002dto_002dsml-35"></a></var><br>
<blockquote><p>Key: <kbd>C-c C-s</kbd>
<a name="index-g_t_0040kbd_007bC_002dc-C_002ds_007d-36"></a>
Switch from the SML buffer to the interaction buffer. By default point
will be placed at the end of the process buffer, but a prefix argument
will leave point wherever it was before. If you try <kbd>C-c C-s</kbd> before
an ML process has been started, you'll just get an error message to the
effect that there's no current process buffer. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-cd</b><var><a name="index-sml_002dcd-37"></a></var><br>
<blockquote><p>When started, the ML compiler's default working directory is the
current buffer's default directory. This command allows the working
directory to be changed, if the compiler can do this. The variable
<code>sml-cd-command</code> specifies the compiler command to invoke
(see <a href="#Process-Defaults">Process Defaults</a>). 
</p></blockquote></div>

<!-- ======================================================== SENDING TEXT -->
<div class="node">
<p><hr>
<a name="ML-Interaction"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tracking-Errors">Tracking Errors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Running-ML">Running ML</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interaction-Mode">Interaction Mode</a>

</div>

<h3 class="section">3.2 Speaking to the compiler</h3>

<!-- == ML Interaction, Tracking Errors, Running ML, Interaction Mode ==== -->
<p class="noindent">Several commands are defined for sending program fragments to the
running compiler. Each of the following commands takes a prefix argument
that will switch the input focus to the process buffer afterwards
(leaving point at the end of the buffer):

<div class="defun">
&mdash; Command: <b>sml-load-file</b><var><a name="index-sml_002dload_002dfile-38"></a></var><br>
<blockquote><p>Key: <kbd>C-c C-l</kbd>
<a name="index-g_t_0040kbd_007bC_002dc-C_002dl_007d-39"></a>
Send a `use file' command to the current ML process. The variable
<code>sml-use-command</code> is used to define the correct template for the
command to invoke (see <a href="#Process-Defaults">Process Defaults</a>). The default file is the
file associated with the current buffer, or the last file loaded if you
are in the interaction buffer. 
</p></blockquote></div>

<div class="defun">
&mdash; Command: <b>sml-send-region</b><var><a name="index-sml_002dsend_002dregion-40"></a></var><br>
<blockquote><p><a name="index-sml_002dsend_002dregion_002dand_002dgo-41"></a>Key: <kbd>C-c C-r</kbd>
<a name="index-g_t_0040kbd_007bC_002dc-C_002dr_007d-42"></a>
Send the current region of text in the SML buffer. 
<code>sml-send-region-and-go</code> is a similar command for you to bind in
SML mode if you wish: it'll send the region and then switch-to-sml. 
</p></blockquote></div>

<!-- @deffn Command sml-send-function -->
<!-- @findex sml-send-function-and-go -->
<!-- Send the enclosing `function' definition. Contrary to the suggestive -->
<!-- name, this command @emph{does not} try to determine the extent of the -->
<!-- function definition because that is too difficult with ML. Instead -->
<!-- this just sends the enclosing @emph{paragraph} (delimited by blank -->
<!-- lines or form-feed characters). -->
<!-- @end deffn -->
<div class="defun">
&mdash; Command: <b>sml-send-buffer</b><var><a name="index-sml_002dsend_002dbuffer-43"></a></var><br>
<blockquote><p>Key: <kbd>C-c C-b</kbd>
<a name="index-g_t_0040kbd_007bC_002dc-C_002db_007d-44"></a>
Send the contents of the current buffer to ML. 
</p></blockquote></div>

<!-- ===================================================== TRACKING ERRORS -->
<div class="node">
<p><hr>
<a name="Tracking-Errors"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Process-Defaults">Process Defaults</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#ML-Interaction">ML Interaction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interaction-Mode">Interaction Mode</a>

</div>

<h3 class="section">3.3 Finding errors</h3>

<!-- == Tracking Errors, Process Defaults, ML Interaction, Interaction Mode -->
<p class="noindent">SML mode provides one customisable function for locating the source
position of errors reported by the compiler. This should work whether
you type <code>use "puzzle.sml";</code> into the interaction buffer, or use
one of the mechanisms provided for sending programs directly to the
compiler&mdash;see <a href="#ML-Interaction">ML Interaction</a>.

<div class="defun">
&mdash; Command: <b>next-error</b><var><a name="index-next_002derror-45"></a></var><br>
<blockquote><p><a name="index-next_002derror-46"></a>Key: <kbd>C-x`</kbd>
<a name="index-g_t_0040kbd_007bC_002dx_0060_007d-47"></a>
Jump to the source location of the next error reported by the compiler. 
All the usual error-navigation commands are available, see
see <a href="emacs.html#Compilation-Mode">Compilation Mode</a>. 
</p></blockquote></div>

<!-- ==================================================== PROCESS DEFAULTS -->
<div class="node">
<p><hr>
<a name="Process-Defaults"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tracking-Errors">Tracking Errors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Interaction-Mode">Interaction Mode</a>

</div>

<h3 class="section">3.4 Process defaults</h3>

<!-- == Process Defaults, , Tracking Errors, Interaction Mode ============ -->
<p class="noindent">The process interaction code is independent of the compiler used,
deliberately, so SML mode will work with a variety of ML compilers
and ML-based tools. There are therefore a number of variables that may
need to be set correctly before SML mode can speak to the compiler. 
Things are by default set up for Standard ML of New Jersey, but
switching to a new system is quite easy.

<div class="defun">
&mdash; Variable: <b>sml-use-command</b><var><a name="index-sml_002duse_002dcommand-48"></a></var><br>
<blockquote><p>Default: <code>"use \"%s\""</code>

        <p>Use file command template. Emacs will replace the <code>%s</code> with a file
name. Note that Emacs requires double quote characters inside strings
to be quoted with a backslash. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>sml-cd-command</b><var><a name="index-sml_002dcd_002dcommand-49"></a></var><br>
<blockquote><p>Default: <code>"OS.FileSys.chDir \"%s\""</code>

        <p>Compiler command to change the working directory. Not all ML systems
support this feature (well, Edinburgh (core) ML didn't), but they
should. 
</p></blockquote></div>

<div class="defun">
&mdash; Variable: <b>sml-prompt-regexp</b><var><a name="index-sml_002dprompt_002dregexp-50"></a></var><br>
<blockquote><p>Default: <code>"^[-=&gt;#] *"</code>

        <p>Matches the ML compiler's prompt: <samp><span class="file">comint</span></samp> uses this for various
purposes. 
</p></blockquote></div>

   <p>To customise error reportage for different ML compilers you need to set
two further variables before <code>next-error</code> can be useful:

<div class="defun">
&mdash; Variable: <b>sml-error-regexp-alist</b><var><a name="index-sml_002derror_002dregexp_002dalist-51"></a></var><br>
<blockquote>
<p>Alist that specifies how to match errors in compiler output. 
Each elt has the form (REGEXP FILE-IDX LINE-IDX [COLUMN-IDX FILE-FORMAT...]) 
If REGEXP matches, the FILE-IDX'th subexpression gives the file name, and
the LINE-IDX'th subexpression gives the line number.  If COLUMN-IDX is
given, the COLUMN-IDX'th subexpression gives the column number on that line. 
If any FILE-FORMAT is given, each is a format string to produce a file name to
try; %s in the string is replaced by the text matching the FILE-IDX'th
subexpression. 
</p></blockquote></div>

<!-- A typical way of (re)setting these variables correctly is to put -->
<!-- something in your @file{.emacs} file that resembles -->
<!-- @example -->
<!-- (setq sml-use-command "PolyML.use \"%s\"") -->
<!-- (setq sml-prompt-regexp "^[>#] *") -->
<!-- @end example -->
<!-- ======================================================= CONFIGURATION -->
<div class="node">
<p><hr>
<a name="Configuration"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Interaction-Mode">Interaction Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Configuration Summary</h2>

<!-- @footnote{@url{http://www.ahl.co.uk/}} -->
<!-- @footnote{@url{http://www.dina.kvl.dk/~sestoft/mosml.html}} -->
<p class="noindent">This (sort of pedagogic) section gives more information on how to
configure SML mode: menus, key bindings, hooks and highlighting are
discussed, along with a few other random topics.

<ul class="menu">
<li><a accesskey="1" href="#Hooks">Hooks</a>:                Creating them
<li><a accesskey="2" href="#Key-Bindings">Key Bindings</a>:         Binding commands to keys
<li><a accesskey="3" href="#Highlighting">Highlighting</a>:         Syntax colouring
<li><a accesskey="4" href="#Advanced-Topics">Advanced Topics</a>:      You may need to speak Emacs Lisp
</ul>

<!-- =============================================================== HOOKS -->
<div class="node">
<p><hr>
<a name="Hooks"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Key-Bindings">Key Bindings</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuration">Configuration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">4.1 Hooks</h3>

<!-- == Hooks, Key Bindings, Configuration, Configuration ================ -->
<p class="noindent">One way to set SML mode variables (see <a href="#SML-Mode-Defaults">Indentation Defaults</a>), and other defaults, is through the
<code>sml-mode-hook</code> in your <samp><span class="file">.emacs</span></samp>. A simple example:

<pre class="lisp">     (defun my-sml-mode-hook () "Local defaults for SML mode"
       (setq sml-indent-level 2)        ; conserve on horizontal space
       (setq words-include-escape t)    ; \ loses word break status
       (setq indent-tabs-mode nil))     ; never ever indent with tabs
     (add-hook 'sml-mode-hook 'my-sml-mode-hook)
</pre>
   <p class="noindent">The body of <code>my-sml-mode-hook</code> is a sequence of assignments. In this
case it is not really necessary to set <code>sml-indent-level</code> in a hook
because this variable is global (most SML mode variables are). With
similar effect:

<pre class="lisp">     (setq sml-indent-level 2)
</pre>
   <p class="noindent">anywhere in your <samp><span class="file">.emacs</span></samp> file. The variable <code>indent-tabs-mode</code> is
automatically made local to the current buffer whenever it is set
explicitly, so it <em>must</em> be set in a hook if you always want
SML mode to behave like this.

   <p>Another hook is <code>inferior-sml-mode-hook</code>. This can be used to
control the behaviour of the interaction buffer through various
variables meaningful to <samp><span class="file">comint</span></samp>-based packages:

<pre class="lisp">     (defun my-inf-sml-mode-hook () "Local defaults for inferior SML mode"
       (add-hook 'comint-output-filter-functions 'comint-truncate-buffer)
       (setq      comint-scroll-show-maximum-output t)
       (setq      comint-input-autoexpand nil))
     (add-hook 'inferior-sml-mode-hook 'my-inf-sml-mode-hook)
</pre>
   <p class="noindent">Again, the body is a sequence of assignments. Unless you run several ML
compilers simultaneously under one Emacs, this hook will normally only
get run once. You might want to look up the documentation (<kbd>C-h v</kbd>
and <kbd>C-h f</kbd>) for these buffer-local <code>comint</code> things.

<!-- ======================================================== Key Bindings -->
<div class="node">
<p><hr>
<a name="Key-Bindings"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Highlighting">Highlighting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Hooks">Hooks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">4.2 Key bindings</h3>

<p class="noindent">Customisation (in Emacs) usually entails putting favourite commands on
easily remembered keys. Two `keymaps' are defined in SML mode: one
is effective in program text buffers (<code>sml-mode-map</code>) and the other
is effective in interaction buffers (<code>inferior-sml-mode-map</code>). 
The initial design ensures that (many of) the default key bindings from
the former keymap will also be available in the latter (e.g.,
<kbd>C-c`</kbd>).

   <p>Type <kbd>C-h m</kbd> in an SML mode buffer to find the default key
bindings (and similarly in an ML interaction buffer), and use the hooks
provided to install your preferred key bindings. Given that the keymaps
are global (variables):

<pre class="lisp">     (defun my-sml-mode-hook () "Global defaults for SML mode"
       (define-key sml-mode-map "\C-cd" 'sml-cd))
     (add-hook 'sml-mode-hook 'my-sml-mode-hook)
</pre>
   <p class="noindent">This has the effect of binding <code>sml-cd</code> to the key <kbd>C-c d</kbd>. 
If you want the same behaviour from <kbd>C-c d</kbd> in the ML buffer:

<pre class="lisp">     (defun my-inf-sml-mode-hook () "Global defaults for inferior SML mode"
       (define-key inferior-sml-mode-map "\C-cd" 'sml-cd)
       ;; NB. for SML/NJ '96
       (setq sml-cd-command "OS.FileSys.chDir \"%s\""))
     (add-hook 'inferior-sml-mode-hook 'my-inf-sml-mode-hook)
</pre>
   <p>There is nothing to stop you rebuilding the entire keymap for
SML mode and the ML interaction buffer in your <samp><span class="file">.emacs</span></samp> of
course: SML mode won't define <code>sml-mode-map</code> or
<code>inferior-sml-mode-map</code> if you have already done so.

<!-- ======================================================== Highlighting -->
<div class="node">
<p><hr>
<a name="Highlighting"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Advanced-Topics">Advanced Topics</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Key-Bindings">Key Bindings</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">4.3 Syntax colouring</h3>

<p class="noindent">Highlighting is very handy for picking out keywords in the program text,
spotting misspelled kewyords, and, if you have Emacs' <samp><span class="file">ps-print</span></samp>
package installed (you usually do these days), obtaining pretty, even
colourful code listings&mdash;quite properly for your colourful ML programs.

   <p>The indentation scheme (strangely enough) also relies on the
highlighting code to properly handle nested comments, which is yet
another reason to turn on highlighting.  To turn on highlighting,
use either of:

<pre class="lisp">     M-x font-lock-mode
     (add-hook 'sml-mode-hook 'turn-on-font-lock)
     (global-font-lock-mode 1)
</pre>
   <p>The first will turn it on in the current buffer. 
The second will turn it on in all sml-mode buffers. 
The last will turn it on everywhere. 
This is valid for Emacs but maybe not for XEmacs.  Check font-lock
documentation if you encounter problems.

<!-- ===================================================== ADVANCED TOPICS -->
<div class="node">
<p><hr>
<a name="Advanced-Topics"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Highlighting">Highlighting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">4.4 Advanced Topics</h3>

<div align="right"><em>These forms are bloody useless; can't we have better ones?</em>
</div>

   <pre class="sp">

</pre>
You can indeed. <code>sml-insert-form</code> is extensible so all you need to
do is create the macros yourself. Define a <em>keybord macro</em>
(<kbd>C-x (</kbd> &lt;something&gt; <kbd>C-x )</kbd>) and give it a suitable name:
<code>sml-addto-forms-alist</code> prompts for a name, say <code>NAME</code>, and
binds the macro <code>sml-form-NAME</code>. Thereafter <kbd>C-c &lt;RET&gt;
NAME</kbd> will insert the macro at point, and <kbd>C-u C-c &lt;RET&gt; NAME</kbd>
will insert the macro after a <code>newline-and-indent</code>. If you want to
keep your macros from one editing session to the next, go to your
<samp><span class="file">.emacs</span></samp> file and call <code>insert-kbd-macro</code>; you'll need
to add <code>NAME</code> to <code>sml-forms-alist</code> permanently yourself:

<pre class="lisp">     (defun my-sml-mode-hook () "Global defaults for SML mode"
       ;; whatever else you do
       (add-to-list 'sml-forms-alist '("NAME" . FUNCTION)))
</pre>
   <p>If you want to create templates like `case' that prompt for parameters
you'll have to do some Lisp programming. The <code>skeleton</code> package is
a good stating point.  Better yet, you can reuse the wrappers used by
sml-mode itself in your sml-mode-hook:

<pre class="lisp">     (add-hook 'sml-mode-hook
       (lambda ()
         (sml-def-skeleton "case" "Case expr: "
           str " of" \n _ " =&gt; ")))
</pre>
   <p>This will redefine `case' in order to leave the `of' on the first line. 
See the documentation of <code>skeleton-insert</code> to get a better
understanding of how this works.

   <pre class="sp">

</pre>
<div align="right"><em>I hate that indentation algorithm; can't I tweak it?</em>
   </div>

   <pre class="sp">

</pre>
Ah, yes, of course, but this manual will not tell you how.

   <pre class="sp">

</pre>
<div align="right"><em>Can SML mode handle more than one compiler running at once?</em>
   </div>

   <p>Sure, just rename the `<samp><span class="samp">*sml*</span></samp>' buffer and then use <code>run-sml</code>
as usual.

   <pre class="sp">

</pre>
<div align="right"><em>What needs to be done to support other ML compilers?</em>
   </div>

   <pre class="sp">

</pre>
Not much really.  Just add the right regular expressions to
<code>sml-error-regexp-alist</code> and that should be all.

<!-- ======================================================= COMMAND INDEX -->
<div class="node">
<p><hr>
<a name="Command-Index"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Command Index</h2>

<ul class="index-fn" compact>
<li><a href="#index-indent_002dfor_002dtab_002dcommand-8"><code>indent-for-tab-command</code></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-indent_002dregion-10"><code>indent-region</code></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-inferior_002dsml_002dmode-30"><code>inferior-sml-mode</code></a>: <a href="#Interaction-Mode">Interaction Mode</a></li>
<li><a href="#index-next_002derror-45"><code>next-error</code></a>: <a href="#Tracking-Errors">Tracking Errors</a></li>
<li><a href="#index-run_002dsml-33"><code>run-sml</code></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-sml_002dback_002dto_002douter_002dindent-12"><code>sml-back-to-outer-indent</code></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-sml_002dcd-37"><code>sml-cd</code></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-sml_002delectric_002dpipe-19"><code>sml-electric-pipe</code></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-sml_002delectric_002dsemi-23"><code>sml-electric-semi</code></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-sml_002delectric_002dspace-21"><code>sml-electric-space</code></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-sml_002dindent_002dlevel-29"><code>sml-indent-level</code></a>: <a href="#SML-Mode-Defaults">SML Mode Defaults</a></li>
<li><a href="#index-sml_002dinsert_002dform-26"><code>sml-insert-form</code></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-sml_002dload_002dfile-38"><code>sml-load-file</code></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-sml_002dmode-6"><code>sml-mode</code></a>: <a href="#Basics">Basics</a></li>
<li><a href="#index-sml_002dmode_002dinfo-4"><code>sml-mode-info</code></a>: <a href="#Getting-Help">Getting Help</a></li>
<li><a href="#index-sml_002dsend_002dbuffer-43"><code>sml-send-buffer</code></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-sml_002dsend_002dregion-40"><code>sml-send-region</code></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-sml_002dsend_002dregion_002dand_002dgo-41"><code>sml-send-region-and-go</code></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-switch_002dto_002dsml-35"><code>switch-to-sml</code></a>: <a href="#Running-ML">Running ML</a></li>
</ul><!-- ====================================================== VARIABLE INDEX -->
<!-- node Variable Index, , Command Index, Top -->
<div class="node">
<p><hr>
<a name="Variable-Index"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="#Key-Index">Key Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Index">Command Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Variable Index</h2>

<!-- == Variable Index, Key Index, Command Index, Top ==================== -->


<ul class="index-vr" compact>
<li><a href="#index-inferior_002dsml_002dmode_002dhook-34"><code>inferior-sml-mode-hook</code></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-sml_002dcd_002dcommand-49"><code>sml-cd-command</code></a>: <a href="#Process-Defaults">Process Defaults</a></li>
<li><a href="#index-sml_002ddefault_002darg-32"><code>sml-default-arg</code></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-sml_002delectric_002dsemi_002dmode-25"><code>sml-electric-semi-mode</code></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-sml_002derror_002dregexp_002dalist-51"><code>sml-error-regexp-alist</code></a>: <a href="#Process-Defaults">Process Defaults</a></li>
<li><a href="#index-sml_002dindent_002dlevel-28"><code>sml-indent-level</code></a>: <a href="#SML-Mode-Defaults">SML Mode Defaults</a></li>
<li><a href="#index-sml_002dmode_002dhook-7"><code>sml-mode-hook</code></a>: <a href="#Basics">Basics</a></li>
<li><a href="#index-sml_002dmode_002dinfo-3"><code>sml-mode-info</code></a>: <a href="#Getting-Help">Getting Help</a></li>
<li><a href="#index-sml_002dprogram_002dname-31"><code>sml-program-name</code></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-sml_002dprompt_002dregexp-50"><code>sml-prompt-regexp</code></a>: <a href="#Process-Defaults">Process Defaults</a></li>
<li><a href="#index-sml_002duse_002dcommand-48"><code>sml-use-command</code></a>: <a href="#Process-Defaults">Process Defaults</a></li>
   </ul><!-- =========================================================== KEY INDEX -->
<div class="node">
<p><hr>
<a name="Key-Index"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Key Index</h2>

<!-- == Key Index, , Variable Index, Top ================================= -->


<ul class="index-ky" compact>
<li><a href="#index-g_t_0040kbd_007b_003b_007d-24"><kbd>;</kbd></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-g_t_0040key_007bLFD_007d-14"><code>&lt;LFD&gt;</code></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040key_007bTAB_007d-9"><code>&lt;TAB&gt;</code></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-_0040key_007bRET_007d_007d-27"><kbd>C-c &lt;RET&gt;</kbd></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-C_002db_007d-44"><kbd>C-c C-b</kbd></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-C_002di_007d-5"><kbd>C-c C-i</kbd></a>: <a href="#Getting-Help">Getting Help</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-C_002dl_007d-39"><kbd>C-c C-l</kbd></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-C_002dr_007d-42"><kbd>C-c C-r</kbd></a>: <a href="#ML-Interaction">ML Interaction</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dc-C_002ds_007d-36"><kbd>C-c C-s</kbd></a>: <a href="#Running-ML">Running ML</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dM_002d_005c_007d-11"><kbd>C-M-\</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dx-_003b_007d-18"><kbd>C-x ;</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dx-_0040key_007bTAB_007d_007d-15"><kbd>C-x &lt;TAB&gt;</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bC_002dx_0060_007d-47"><kbd>C-x`</kbd></a>: <a href="#Tracking-Errors">Tracking Errors</a></li>
<li><a href="#index-g_t_0040kbd_007bM_002d_003b_007d-16"><kbd>M-;</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bM_002d_0040key_007bLFD_007d_007d-17"><kbd>M-&lt;LFD&gt;</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bM_002d_0040key_007bTAB_007d_007d-13"><kbd>M-&lt;TAB&gt;</kbd></a>: <a href="#Indentation">Indentation</a></li>
<li><a href="#index-g_t_0040kbd_007bM_002dSPC_007d-22"><kbd>M-SPC</kbd></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
<li><a href="#index-g_t_0040kbd_007bM_002d_007c_007d-20"><kbd>M-|</kbd></a>: <a href="#Magic-Insertion">Magic Insertion</a></li>
   </ul>
<div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Introduction" href="#Introduction">1 Introduction</a>
<ul>
<li><a href="#Contributors">1.1 Contributors to the SML mode</a>
<li><a href="#Getting-Started">1.2 Getting started</a>
<li><a href="#Getting-Help">1.3 Help!</a>
</li></ul>
<li><a name="toc_SML-Mode" href="#SML-Mode">2 Editing with SML Mode</a>
<ul>
<li><a href="#Basics">2.1 On entering SML mode</a>
<li><a href="#Indentation">2.2 Automatic indentation</a>
<li><a href="#Magic-Insertion">2.3 Electric features</a>
<li><a href="#SML-Mode-Defaults">2.4 Indentation defaults</a>
</li></ul>
<li><a name="toc_Interaction-Mode" href="#Interaction-Mode">3 Running ML under Emacs</a>
<ul>
<li><a href="#Running-ML">3.1 Starting the compiler</a>
<li><a href="#ML-Interaction">3.2 Speaking to the compiler</a>
<li><a href="#Tracking-Errors">3.3 Finding errors</a>
<li><a href="#Process-Defaults">3.4 Process defaults</a>
</li></ul>
<li><a name="toc_Configuration" href="#Configuration">4 Configuration Summary</a>
<ul>
<li><a href="#Hooks">4.1 Hooks</a>
<li><a href="#Key-Bindings">4.2 Key bindings</a>
<li><a href="#Highlighting">4.3 Syntax colouring</a>
<li><a href="#Advanced-Topics">4.4 Advanced Topics</a>
</li></ul>
<li><a name="toc_Command-Index" href="#Command-Index">Command Index</a>
<li><a name="toc_Variable-Index" href="#Variable-Index">Variable Index</a>
<li><a name="toc_Key-Index" href="#Key-Index">Key Index</a>
</li></ul>
</div>

</body></html>

