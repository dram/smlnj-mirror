<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="The Fellowship of SML/NJ">
<title>Standard ML of New Jersey Change Log</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article">
<div id="header">
<h1>Standard ML of New Jersey Change Log</h1>
<div class="details">
<span id="author" class="author">The Fellowship of SML/NJ</span><br>
<span id="revnumber">version 2022.1,</span>
<span id="revdate">August 25, 2022</span>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This file documents changes to the <strong>Standard ML of New Jersey</strong> system
since January of 2014 (Versions after 110.78).  Earlier changes are
documented in the <code>HISTORY-pre2015</code> file. The change log primarily
covers the compiler, the compilation manager (<strong>CM</strong>), the <strong>MLRISC</strong>
library, and the runtime system.  There are occasional entries about
other components (<em>e.g.</em>, the <strong>SML/NJ Library</strong> and <strong>ML-LPT</strong>), but
these components have their own change logs that should be consulted.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_2022_1_20220825">Version 2022.1; 2022/08/25</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/08/25]</dt>
<dd>
<div class="paragraph">
<p>Added <code>system/iter-make</code> script to iterate the compilation of the
compiler.  This script replaces the old <code>fixpt</code> script and is necessary
when changing the version number of the system.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/08/15]</dt>
<dd>
<div class="paragraph">
<p>The change log file (<code>HISTORY.txt</code>) has been split into two files;
one covering the period before 2015 and one covering changes since
then.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/08/15]</dt>
<dd>
<div class="paragraph">
<p>The source repository has been migrated to
<a href="https://github.com/smlnj/smlnj"><strong>GitHub</strong></a>.  With this migration, we
have substantially reorganized the source tree and build scripts.</p>
</div>
<div class="paragraph">
<p>The <code>base</code> directory has been eliminated; most of its components
(<code>cm</code>, <code>compiler</code>, <code>runtime</code> and <code>system</code>) have been lifted to
the top-level of the source tree.  The other top-level directories
are <code>doc</code>, <code>libraries</code>, <code>llvm</code>, <code>smlnj-lib</code>, and <code>tools</code>.
The <code>libraries</code> and <code>tools</code> directories hold most of the non-core
components of the system, such as <code>cml</code>, <code>ml-yacc</code>, <em>etc</em>.</p>
</div>
<div class="paragraph">
<p>The <code>config/install.sh</code> script has been replaced by the <code>build.sh</code>
script.  The build process is simplified because the only component
that is not in the <strong>git</strong> repository is the boot files.  We have
also removed the deprecated support for 32-bit systems from the
various build scripts.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/27]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues/235">MSI installer for SMLNJ 110.99.2 reports as
version 0.0.0.0</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/25]</dt>
<dd>
<div class="paragraph">
<p>Implemented Basis Library proposal
<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2021-001-Add-getWindowSz-function-to-Posix.TTY-structure">2021-001</a>
(Add getWindowSz function to Posix.TTY structure).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/25]</dt>
<dd>
<div class="paragraph">
<p>Implemented Basis Library proposal
<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2022-001-Add-value-tau-to-MATH-signature">2022-001</a>
(Add <code>tau</code> to <code>MATH</code> signature).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/24]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues/234">ml-build fails on Windows with error</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/24]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues/51">makeml and installml scripts do not like
locations with spaces</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/22]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues/205">Last branch of case expression omitted by PPAst.ppAst</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/22]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues141">Pretty printing of Absyn in error message does
not respect fixity</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/22]</dt>
<dd>
<div class="paragraph">
<p>Fix for <a href="https://github.com/smlnj/smlnj/issues/68">Unable to interrupt execution by using <code>SIGINT</code></a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/06]</dt>
<dd>
<div class="paragraph">
<p>Fixed some interfaces that did not agree with the <strong>SML Basis Library</strong>
specification.  Bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=318&group_id=33&atid=215"><b>#318</b></a> (<code>IEEEReal.decimal_approx</code> does not
match the Basis Library) and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=319&group_id=33&atid=215"><b>#319</b></a> (Type of <code>Real.fromDecimal</code>
does not match the Basis Library).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/05]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=316&group_id=33&atid=215"><b>#316</b></a> (<code>Real.fromManExp</code> does not return expected
value if <code>man = 0.0</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/07/05]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=317&group_id=33&atid=215"><b>#317</b></a> (Conversion from string to real does not
accept non-finite values).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=314&group_id=33&atid=215"><b>#314</b></a> (<code>IEEEReal.float_class</code> does not match the
Basis Library).  For some reason, the <code>NAN</code> constructor took an argument
in our implementation.  This code was probably an early design of the
API that was changed in the Basis Library specification, but not in our
code.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed a pretty printing issue that arises when printing nested
structure definitions.  For example, opening the <code>OS</code> structure
in the REPL, would result in an extra newline between the colon
and the <code>sig</code> keyword.
This behavior is not present in the legacy version.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/27]</dt>
<dd>
<div class="paragraph">
<p>Adding support for generating a SIG_GC signal when there is a garbage
collection.  I have also added a function</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span>  <span class="tok-kr">val</span> <span class="tok-nv">signalThreshold</span> <span class="tok-p">:</span> <span class="tok-n">int</span> <span class="tok-p">-&gt;</span> <span class="tok-n">unit</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to the <code>SMLofNJ.Internals.GC</code> structure that allows one to specify the
threshold for generating a signal.  The default is <code>1</code>, which means
that for any major collection a signal is generated.  Setting the
threshold to <code>0</code> means that minor collections also generate signals,
while setting the value to something greater than <code>1</code> will filter out
collections of younger generations.  Collections that happen while a
<code>sigGC</code> handler is running are ignored, which should not be an issue
for thresholds of <code>1</code> or greater.</p>
</div>
<div class="paragraph">
<p>These changes fix bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=65&group_id=33&atid=215"><b>#65</b></a> (Garbage collection does not trigger
<code>sigGC</code>) and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=291&group_id=33&atid=215"><b>#291</b></a> (Signals are not delivered for corresponding
events).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/17]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=290&group_id=33&atid=215"><b>#290</b></a> (Incorrect pattern matching for exceptons).
The fix involves changes to <code>FLINT/opt/lcontract.sml</code> (function <code>swiInfo</code>)
and <code>FLINT/opt/fcontract.sml</code> (function fcSwitch). The contraction of
a SWITCH with an constructor as subject is suppressed when the
constructor is an exception constructor, because for exceptions comparison
using the conrep field is inaccurate when the constructor is defined
by an exception identity declaration (e.g., <code>exception B = A</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/05]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=314&group_id=33&atid=215"><b>#314</b></a> (<code>IEEEReal.setRoundingMode</code> is a no-op on Linux).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/05]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=312&group_id=33&atid=215"><b>#312</b></a> (<code>CM.make</code> is unable to handle filenames that
contain a backslash).  We have changed the semantics of paths given
to the functions in the <code>CM</code> structure to be interpreted using the
native pathname syntax (instead of <strong>CM</strong>'s generic syntax).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/06/01]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=284&group_id=33&atid=215"><b>#284</b></a> (Compiler bug: Contract: UsageMap on 132).
The problem was the the <code>CPSTrans.cpstrans</code> function was generating
code for loading spilled parameters in reverse order.  In addition
to fixing the bug, added some detailed documentation of the code.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/05/20]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=310&group_id=33&atid=215"><b>#310</b></a> (Error when REPL tries to print value of type
<code>Posix.FileSys.ST.stat</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/05/10]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=306&group_id=33&atid=215"><b>#306</b></a> (<code>Word8VectorSlice</code>: mapping a subslice produces
wrong result or crashes SML/NJ).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2022/04/03]</dt>
<dd>
<div class="paragraph">
<p>Fix a module compilation performance bug by removing <code>packStr</code> and
<code>packFct</code> from <code>Elaborator/modules/sigmatch.sml</code> (reducing the size of
that file by about 25%), and removing the call of <code>packStr</code>
(in function <code>constrStr</code>) in <code>Elaborator/elaborate/elabmod.sml</code>, replacing
it with a call to <code>Instantiate.instAbstr</code>. Goodbye at last to <code>packStr</code>!</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_2021_1_20211231">Version 2021.1; 2021/12/31</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/12/31]</dt>
<dd>
<div class="paragraph">
<p>Switched over to the <strong>LLVM</strong> version of the compiler.  Doing so has
two major consequences:</p>
</div>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The <strong>MLRISC</strong> code generator that we have used for over 25 years
has been replaced with one based on the https:llvm.org[<strong>LLVM Libraries</strong>].</p>
</li>
<li>
<p>We have dropped support for 32-bit systems.  Since we do not
have a 64-bit Windows port yet, this version only supports "Unix"
systems on the <strong>AMD64</strong> processor (we have tested <strong>Linux</strong> and
*macOS).
A 64-bit Windows version is a high priority and we hope to include
it in the next release.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>+
In addition, we have changed the version numbering scheme to a
<code>YYYY.NN</code> scheme, where <code>YYYY</code> is the year of the release and
<code>NN</code> is the release number for the year.</p>
</div>
<div class="paragraph">
<p>+
<a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/12/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the way that non-printable <code>char</code> values were being
printed in the REPL.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/11/23]</dt>
<dd>
<div class="paragraph">
<p>Remove last traces of the lambda splitting support from CM.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/11/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the <code>Binfile</code> structure (and <code>BINFILE</code> signature) to support both
the old binfile format and a new format (both formats are documented in
the <code>dev-notes/binfile.adoc</code> file).  We are stiull using the old format,
but will be switching to the new format soon.  The new format has a more
structured header and removes the vestigial support for the FLINT lambda
pickles.</p>
</div>
<div class="paragraph">
<p>The new header format includes a proper version number, which should
make migrating to new binfile formats easier.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/11/07]</dt>
<dd>
<div class="paragraph">
<p>Committed changes to fix bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=281&group_id=33&atid=215"><b>#281</b></a> (Redundant error messages for when a constructor
name is misspelled).  Revision r7357.</p>
</div>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Modified <code>Absyn.value</code> datatype by adding an error constructor
<code>ERRORid</code>.</p>
</li>
<li>
<p>Revised <code>ElabData/staticenv/lookup.sml</code> to simplify and improve some
functions (<code>lookVal</code> &#8594; <code>lookIdPath</code>, <code>lookValSym</code> &#8594; <code>lookIdSym</code>) and added
a function <code>lookIdSymOp</code> that returns an option.</p>
</li>
<li>
<p>Revised <code>pat_id</code> and deleted <code>makeAPPpat</code> in <code>ElabUtil</code>.</p>
</li>
<li>
<p>Revised <code>elabPat</code> in <code>ElabCore</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>+
<a href="https://cs.uchicago.edu/~dbm">David MacQueen</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/11/07]</dt>
<dd>
<div class="paragraph">
<p>Committed a massive set of changes from "merge/base" working directory
that contained manually merged changes from "newmc" into a fresh
checkout of the trunk. Base version of the trunk was r7349, which was
tagged to produce <code>$smlnj/sml/tags/pre-merge</code>. The merged trunk
version is r7352.</p>
</div>
<div class="paragraph">
<p>The changes include:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>A completely rewritten match compiler that transforms absyn to
absyn. The old match compiler files in
FLINT/trans have been deleted. The new match compiler is documented
in <code>dev-notes/match-compiler/match-compiler.txt</code> (and successor documents).
The match compiler code is in the new directory
<code>base/compiler/Elaborator/matchcomp</code>. <code>FLINT/trans/translate.sml</code> and
related files were also extensively revised to work with the new
match compiler.</p>
</li>
<li>
<p>PLAMBDA/FLINT types modules in <code>FLINT/kernel</code> have been revised so
that the signatures of the main modules (<code>Lty</code>, <code>LtyKernel</code>, <code>LtyDef</code>,
<code>LtyBasic</code>, <code>LtyExtern</code>) are all disjoint. Function and record metadata
stuctures that were in the FLINT structure (<code>FLINT/flint/flint.sml</code>)
have been moved to <code>kernel/funrecmeta.{sig,sml}</code>. This involved minor
edits to virtually all files in FLINT and a few in CPS.
See <code>dev-notes/FLINT</code> for further documentation.</p>
</li>
<li>
<p>Bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=294&group_id=33&atid=215"><b>#294</b></a> (Compiler bug: Recover) has been fixed by deleting a
few lines of code in <code>FLINT/opt/fcontract.sml</code>. Files <code>opt/collect.sml</code>
and <code>opt/fcontract.sml</code>  been "clarified" to make them somewhat
easier to maintain/debug.</p>
</li>
<li>
<p>The <code>VarCon:VARCON</code> structure defined in <code>ElabData/syntax/varcon.{sig,sml}</code>
has been renamed Variable: VARIABLE (<code>ElabData/syntax/variable.{sig,sml}</code>),
since it no longer contains functionality relating to data constructors.</p>
</li>
<li>
<p>The regression tests (<code>$smlnj/tests</code>) were run and a few true
regressions were fixed, including a type error
(<code>bugs/tests/bug0573.sml</code>). Many regression failures remain that are
due to differences in the pretty printers, reworded error messages,
and new printing conventions for overload scheme type variables.
Some reference test outputs were updated, but at some point all new
outputs should be generated. But first, signature printing should
be redesigned and reimplemented.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">David MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/09/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the <strong>binfile</strong> representation to remove the pickling of
the <strong>FLINT</strong> intermediate representation.  The purpose of this
mechanism was to support cross-module inlining, but it has not
be enabled for many years.  Removing it is the first step toward
migrating the pickling infrastructure to use <strong>ASDL</strong>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/09/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the way that versions are identified to allow a version suffix
(e.g., "-rc1" for "release candidate 1").  I removed the bump-release
mechanism, which might has served a similar purpose, but was restricted
to integer suffixes and has not been used in recent memory.  Also changed
the <code>SMLNJVersion</code> structure, which is generated by the <code>versiontool</code>.
The new interface supports the version suffix and includes both a build
date and a release date in the <code>version</code> information record.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_99_2_20210923">Version 110.99.2; 2021/09/23</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/08/18]</dt>
<dd>
<div class="paragraph">
<p>Fix a benign bug where the size of a floating-point spill record was twice
as large as necessary on 64-bit systems.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/08/10]</dt>
<dd>
<div class="paragraph">
<p>Split out the <code>Real.toLargeInt</code> implementation into target-word-size
versions (the <code>Real64ToIntInf</code> module).  For 64-bit targets, the new
version uses the bit representation of the real number to compute the
result.  The 32-bit version is the old code that uses floating-point
operations.  This change fixes bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=279&group_id=33&atid=215"><b>#279</b></a> (<code>Real.toLargeInt</code> returns
zero for anything in range <code>[-512,512]</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/04/29]</dt>
<dd>
<div class="paragraph">
<p>In the translation from Absyn to PLambda, there was a function (<code>inlops</code>)
that was used to build the primop and type data structures for numeric
types.  This function was being called for every primitive operator,
even though its results only depended on the numeric type.  I added
a hash table to cache the results indexed numeric kind.  This change
speeds up the compiler by about 3% (<em>e.g.</em>, compiling the compiler
went from 58s to 55s on a MacBookPro with a 2.4GHz Intel i9 processor).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_99_1_20210412">Version 110.99.1; 2021/04/12</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/04/10]</dt>
<dd>
<div class="paragraph">
<p>Changed the <strong>AMD64</strong> frame layout to include a word to hold the
<code>Overflow</code> exception.  This value is used by the <strong>LLVM</strong> backend
to generate the exception for checked arithmetic operations.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/04/10]</dt>
<dd>
<div class="paragraph">
<p>Added support for running <strong>SML/NJ</strong> on <strong>M1</strong> Macs via the <strong>Rosetta2</strong>
emulator.  The change is to identify the <strong>arm</strong> processor as <strong>amd64</strong>
in the <code>config/_arch-n-opsys</code> script.  Note that while the system
basically seems to work okay under rosetta, trying to run the <code>makeml</code>
command after having compiled the complier caused a crash.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/04/10]</dt>
<dd>
<div class="paragraph">
<p>Some minor restructuring of the logic in the generic installer.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/03/25]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug with how <strong>FLINT</strong> numeric types were being translated to <strong>CPS</strong>
types.  Specifically, types that were smaller than the default integer
size (<em>e.g.</em>, <code>word8</code>) should have been marked as having a tagged
representation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/02/12]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=280&group_id=33&atid=215"><b>#280</b></a> (110.99 <code>config/install.sh -64</code> fails on macOS 10.15.7).
I was unable to reproduce this problem, but after some investigation, it
appears that the problem was inconsistent build tools being picked up from
the user&#8217;s path.  To protect against this issue, I made the paths to the
<strong>ar</strong> and <strong>ranlib</strong> tools absolute.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2021/01/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed a serious performance bug in the implementation of the <code>CharBuffer</code>
and <code>MonoBuffer</code> structures.  Essentially, if one did not reserve sufficient
space for the contents, it could take quadratic time to fill the buffer.
We now grow the buffer by a factor of 1.5 of its current size, with an
upper bound on the extra growth of 256K.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_99_20201224">Version 110.99; 2020/12/24</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/12/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the layout of the <strong>SML</strong> stack frame on the <strong>AMD64</strong>
architecture to make it compatible with the way that <strong>LLVM</strong>
spills registers.  Essentially, this just involved swapping
the order of the swap area and the ML stuff.  We took this opportunity,
however, to localize up the representation of this information in
the compiler.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/12/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the format of the "magic string" in the header of binfiles.
The new format is "<em>arch</em><code>-</code><em>version</em>", where the architecture
name is limited to at most seven bytes and the version is limited to
at most eight bytes.  The string is padded with spaces to a total
length of 16 bytes.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/12/22]</dt>
<dd>
<div class="paragraph">
<p>Various pretty-printer bug fixes:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=274&group_id=33&atid=215"><b>#274</b></a> (Minor pretty printing glitch when printing
structure specs)</p>
</li>
<li>
<p>bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=276&group_id=33&atid=215"><b>#276</b></a> (Missing option to control extra newlines in REPL)</p>
</li>
<li>
<p>bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=277&group_id=33&atid=215"><b>#277</b></a> (Excess white space when pretty printing a module
signature)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/12/19]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=254&group_id=33&atid=215"><b>#254</b></a> (<code>Real.fromLargeInt</code> produces negative results).
The problem was because the digit size for <code>IntInf.int</code> is only one bit
smaller than the default int and the scaling factor <code>rbase</code> was being
computed using the <code>InlineT.Real64.from_int</code> function (so <code>rbase</code>
ends up being negative). Thus it would return incorrect results
whenever the IntInf representation involved more than one digit.
This is a bug on both 32-bit and 64-bit systems. The fix was to
switch to using <code>InlineT.Real64.from_int{32,64}</code> to convert <code>rbase</code>
and digits to real values.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/12/19]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=267&group_id=33&atid=215"><b>#267</b></a> (Returns an incorrect result for a calculation
on <code>Position.int</code> for 32-bit mode). The problem was that on 32-bit
machines, 64-bit division is implemented by the IntInf module with
the result then being converted to 64-bits. The conversion used did
not test for overflow in the result.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/10/13]</dt>
<dd>
<div class="paragraph">
<p>Changed the semantics of the spans returned by <strong>ml-ulex</strong> so that the
second component of a span is the position of the rightmost character
in the token (instead of the character following the token).
Specifically, the span \((p_1, p_2)\) specifies the
\(p_2 - p_1 + 1\) characters that start with the character at
position \(p_1\) and run to \(p_2\) (inclusive).
This change avoids a potential problem when the span of a token ends
at the last character in a file (when the input is spread across
multiple files).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/09/10]</dt>
<dd>
<div class="paragraph">
<p>Simplified the <strong>binfile</strong> representation by removing the option of
having multiple code objects.  Many years ago, we would split the
code for a compilation unit into multiple independent functions
so that the garbage collector could reclaim code that was only
executed once (or was not referenced).  The actual splitting of
the code in the <code>CpsSplitFun</code> functor (<code>CPS/clos/cps-split.sml</code>)
was replaced by a dummy implementation at some point, so we have
not been generating multiple code objects for some time.  Therefore,
we have simplified the code generator to assume only one code
object and have changed the <strong>binfile</strong> import/export code to only
support a single code object per <strong>binfile</strong>.</p>
</div>
<div class="paragraph">
<p>Also made this change to the bootstrap loader (<code>kernel/boot.c</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_98_1_20200825">Version 110.98.1; 2020/08/25</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/08/25]</dt>
<dd>
<div class="paragraph">
<p>Reverted some of the pretty printing changes that were made in 110.98
to the 110.97 version (the renaming of <code>PrettyPrintNew</code> to <code>PrettyPrint</code>
and the directory reorganizations were unchanged).  These changes
fix bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=266&group_id=33&atid=215"><b>#266</b></a> (Pretty printing regression in SML/NJ 110.98),
<a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=268&group_id=33&atid=215"><b>#268</b></a> (Polymorphic Type Pretty Printing Regression), and
<a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=271&group_id=33&atid=215"><b>#271</b></a> (pretty printer regression for structure binding).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/08/02]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=269&group_id=33&atid=215"><b>#269</b></a> (<code>Word64.fromString</code> causes an <code>Overflow</code> for
greater than 2<sup>32</sup>-1).  This bug was the result of constants from the
32-bit version of the code not getting updated for the 64-bit version.
Scanning of both hexadecimal and octal representations of both integers
and words were affected.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/22]</dt>
<dd>
<div class="paragraph">
<p>Added an additional lowering pass for the <code>STREQL</code> primop.  This
primop is generated to implement pattern matching against string
literals.  Previously it was unrolled in the <strong>MLRISC</strong> code generator,
but we now do the unrolling in <strong>CPS</strong>.  The reason for this change
is that implementing the unrolling in the <strong>LLVM</strong> code generator
would be complicated because of the need to introduce phi nodes
in one of the branches.</p>
</div>
<div class="paragraph">
<p>The unrolling in <strong>CPS</strong> is somewhat different from before in that
we now bake the literal string being tested into the equality tests.</p>
</div>
<div class="paragraph">
<p>Also changed the representation of the primop to include the string
being tested against and removed the <code>STRNEQ</code> primop.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_98_20200716">Version 110.98; 2020/07/16</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/10]</dt>
<dd>
<div class="paragraph">
<p>Implemented <a href="https://github.com/SMLFamily/BasisLibrary/wiki/2020-001-Addition-of-Universal-module">
Basis Library proposal 2020-001 (Addition of Universal module)</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/10]</dt>
<dd>
<div class="paragraph">
<p>Changed the <code>config/install.sh</code> script so that the default size
is 64 bits for any machine that reports its machine as "<code>x86_64</code>."</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/10]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=260&group_id=33&atid=215"><b>#260</b></a> (Perform divide on <code>Position.int</code> crashes
with FPE on Linux).  The fix required adding SIGFPE as a second
source of <code>Overflow</code> exceptions on Linux/amd64 machines.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/08]</dt>
<dd>
<div class="paragraph">
<p>Fixes for structure and signature pretty printing problems that were
introduced in the extensive pretty printer/pretty printing
modifications around revision 6291.</p>
</div>
<div class="paragraph">
<p>Files affected include <code>ElabData/modules/ppmod.sml</code>,
<code>ElabData/types/pptype.sml</code>, <code>TopLevel/print/ppdec.sml</code>,
and <code>Basics/print/pputil.</code>{<code>sig</code>,<code>sml</code>}.</p>
</div>
<div class="paragraph">
<p>The pretty printing for modules still seems quite fragile, so there
are likely to be more pretty printing problems to be fixed later. In
particular, pretty printing of functor and functor signature
declarations haven&#8217;t been tested.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/07]</dt>
<dd>
<div class="paragraph">
<p>Added a new <em>lowering</em> pass following <strong>CPS</strong> optimization, but before
closure conversion.  This pass includes the previous passes for
64-bit operations on 32-bit matchines and for conversions involving
<code>IntInf.int</code>.  It also adds lowering for <code>div</code> and <code>mod</code> to native
machine division (<em>i.e.</em>, <code>quot</code> and <code>rem</code>) and for trapping conversions.</p>
</div>
<div class="paragraph">
<p>The purpose of this change is to simplify code generation in preparation
for migrating to a <strong>LLVM</strong>-based backend.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/06]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=261&group_id=33&atid=215"><b>#261</b></a> (Weird "calc_strictness" message being printed).
Rewrote the function <code>ElabUtil.calc_strictness</code> and moved it to
<code>TypesUtil.calcStrictness</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/02]</dt>
<dd>
<div class="paragraph">
<p>The <code>HTMLDev</code> structure in the pretty-printing library has been
moved into its own library (<code>pp-extras-lib.cm</code>) and renamed as
<code>HTML3Dev</code>.  This change removes the dependency of <code>pp-lib.cm</code>
on <code>html-lib.cm</code>, which allowed us to remove all mention of
<code>html-lib.cm</code> from the compiler <strong>CM</strong> files.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/02]</dt>
<dd>
<div class="paragraph">
<p>Completed the removal of the trigonometry operators from the primops.
This change also allowed the removal of extension support from the
<strong>MLRISC</strong> code generator for the x86.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/07/01]</dt>
<dd>
<div class="paragraph">
<p>Disabled the use of the hardware instructions for the basic trig
functions on the <strong>x86</strong>.  Doing so simplifies cross compilation
from non <strong>x86</strong> hosts and also paves the way to removing the operations
from the compiler&#8217;s primitive operators.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/06/30]</dt>
<dd>
<div class="paragraph">
<p>Improved the <strong>CPS</strong> contraction phase by adding strength-reduction
optimizations to <code>ContractPrim</code>.  These include recognizing when
multiplications and divisions by powers of 2 can be replaced by
shifts.  Previously, these sorts of optimizations were provided
by <strong>MLRISC</strong>, but we plan to simplify the <strong>CPS</strong> IR prior to code
generation by replacing <code>div</code> and <code>mod</code> operations with native
machine arithmetic, which would prevent <strong>MLRISC</strong> from making the
optimizations.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/05/16]</dt>
<dd>
<div class="paragraph">
<p>The <strong>MLRISC</strong> instruction selector for the <strong>x86</strong> and <strong>amd64</strong> targets
erroneously assumed that the <code>idiv</code> instruction sets the <code>OF</code> (overflow)
condition code when dividing the largest negative number by <code>~1</code>.
In fact, such a division operation traps, which is okay, because the
runtime system maps the trap to the <code>Overflow</code> exception.  Since the
check for overflow is unnecessary, it has been removed from the files
<code>MLRISC/amd64/mltree/amd64-gen.sml</code> and <code>MLRISC/x86/mltree/x86.sml</code>.</p>
</div>
<div class="paragraph">
<p>Note that <strong>MLRISC</strong>'s non-trapping signed division operations can
actually trap on overflow, but this was true before this change.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/05/16]</dt>
<dd>
<div class="paragraph">
<p>Changed the semantics of the <code>--debug</code> command-line option for <strong>ml-antlr</strong>.
Previously this option replaced the actions with a print expression, but that
limited its usefulness because of type errors in the generated code.  The new
behavior is to preserve the existing actions and just add the printing code.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/27]</dt>
<dd>
<div class="paragraph">
<p>Added a pass to the elaborator that check for variables that are
bound, but never referenced.  This check can be controlled by
the <code>Control.Elab.unusedWarn</code> flag. Unused top-level variables
are not reported (unless they are bound in the local part of
a local declaration).</p>
</div>
<div class="paragraph">
<p>The check is currently disabled because of false positives
caused by a transformation in the type checker.  For example,
the following function declaration:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">fun</span> <span class="tok-nf">foo</span> <span class="tok-n">n</span> <span class="tok-p">=</span> <span class="tok-kr">let</span>
      <span class="tok-kr">fun</span> <span class="tok-nf">f</span> <span class="tok-n">x</span> <span class="tok-p">=</span> <span class="tok-n">g</span> <span class="tok-n">x</span> <span class="tok-n">-</span> <span class="tok-mi">1</span>
      <span class="tok-kr">and</span> <span class="tok-nf">g</span> <span class="tok-n">x</span> <span class="tok-p">=</span> <span class="tok-n">f</span> <span class="tok-n">x</span> <span class="tok-n">+</span> <span class="tok-mi">1</span>
      <span class="tok-kr">in</span>
        <span class="tok-n">f</span> <span class="tok-n">n</span>
      <span class="tok-kr">end</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>gets represented by the following <code>Absyn</code>:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">val</span> <span class="tok-nv">foo</span> <span class="tok-p">=</span> <span class="tok-kr">let</span>
      <span class="tok-kr">val</span> <span class="tok-nv">foo</span> <span class="tok-p">=</span> <span class="tok-p">(</span><span class="tok-kr">fn</span> <span class="tok-n">n</span> <span class="tok-p">=&gt;</span> <span class="tok-kr">let</span>
              <span class="tok-kr">local</span>
                <span class="tok-kr">val</span> <span class="tok-nv">tmp</span> <span class="tok-p">=</span> <span class="tok-kr">let</span>
                      <span class="tok-kr">val</span> <span class="tok-nv">rec</span> <span class="tok-n">f</span> <span class="tok-p">=</span> <span class="tok-p">(</span><span class="tok-kr">fn</span> <span class="tok-n">x</span> <span class="tok-p">=&gt;</span> <span class="tok-nn">Int</span><span class="tok-p">.</span><span class="tok-n">-</span> <span class="tok-p">(</span><span class="tok-n">g</span> <span class="tok-n">x</span><span class="tok-p">,</span><span class="tok-mi">1</span><span class="tok-p">))</span>
                          <span class="tok-kr">and</span> <span class="tok-nv">g</span> <span class="tok-p">=</span> <span class="tok-p">(</span><span class="tok-kr">fn</span> <span class="tok-n">x</span> <span class="tok-p">=&gt;</span> <span class="tok-nn">Int</span><span class="tok-p">.</span><span class="tok-n">+</span> <span class="tok-p">(</span><span class="tok-n">f</span> <span class="tok-n">x</span><span class="tok-p">,</span><span class="tok-mi">1</span><span class="tok-p">))</span>
                      <span class="tok-kr">in</span> <span class="tok-p">(</span><span class="tok-n">f</span><span class="tok-p">,</span><span class="tok-n">g</span><span class="tok-p">)</span>
                      <span class="tok-kr">end</span>
              <span class="tok-kr">in</span>
                <span class="tok-kr">val</span> <span class="tok-nv">f</span> <span class="tok-p">=</span> <span class="tok-nl">#1</span> <span class="tok-n">tmp</span>
                <span class="tok-kr">val</span> <span class="tok-nv">g</span> <span class="tok-p">=</span> <span class="tok-nl">#2</span> <span class="tok-n">tmp</span>
              <span class="tok-kr">end</span>
            <span class="tok-kr">in</span> <span class="tok-n">f</span> <span class="tok-n">n</span>
            <span class="tok-kr">end</span><span class="tok-p">)</span>
      <span class="tok-kr">in</span> <span class="tok-n">foo</span>
      <span class="tok-kr">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where the instance of <code>g</code> bound to <code>#2 tmp</code> is unused.  This transformation
is done by the <code>wrapRECdec</code> function.
The unused-variable implementation was influenced by
<a href="https://gist.github.com/jvanburen/2ef1a722fba13fc169b670ba6392da52">Jacob Van
Buren&#8217;s patch for Version 110.82</a>.<br></p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/24]</dt>
<dd>
<div class="paragraph">
<p>The <code>LambdaVar.lvar</code> type is represented as an integer; since the earliest
days of the compiler this representation has been concrete, which meant
that the type system was not able to provide any guarantees that <code>int`s and
`lvar`s were not being mixed up.  As of this change, `LambdaVar.lvar</code> is
now an abstract equality type (internally, it is still and <code>int</code>).
Some comments about the changes:<br></p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The <code>LambdaVar</code> structure now includes substructures that implement
hash tables (<code>LambdaVar.Tbl</code>), finite maps (<code>LambdaVar.Map</code>), and
finite sets (<code>LambdaVar.Set</code>).</p>
</li>
<li>
<p>most of the changes involved replacing <code>IntHashTable</code>, <code>IntRedBlackSet</code>,
<code>IntRedBlackMap</code> with the equivalent substructures that were added
 to the <code>LambdaVar</code> structure (<em>e.g.</em>, <code>IntHashTable</code> =&#8658; <code>LambdaVar.Tbl</code>).</p>
</li>
<li>
<p>there were a few place where debugging code assumed that lvars
could be printed as integers.</p>
</li>
<li>
<p>the pickling code requires a mechanism to convert between integers and
lvars; this is the one place where the abstraction is broken.</p>
</li>
<li>
<p>the worst abuse of the fact that the lvar type was <code>int</code> was in the
code generator, where arithmetic was used to generate a unique negative
number that could be used as a hash key, so that a given <code>lvar</code> could
be mapped to two different labels.  I fixed this by using two tables.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
<dt class="hdlist1">[2020/04/24]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=256&group_id=33&atid=215"><b>#256</b></a> (<code>Ref.exchange</code> incorrect). The original
source of the bug was the <strong>Basis Library</strong> sample code, which
has also been fixed.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_97_20200421">Version 110.97; 2020/04/21</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/21]</dt>
<dd>
<div class="paragraph">
<p>Changed the printing of tyvars; <em>e.g.</em>, an <code>OVLDV</code> tyvar introduced
by an occurrence of the overloaded operator "*" that also
acquires the equality attribute will be printed as ''Z[OL(*)].</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/20]</dt>
<dd>
<div class="paragraph">
<p>Eliminated AbsDec and ABSdec constructors</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Eliminated <code>AbsDec</code> constructor in <code>Parse/ast/ast.</code>{<code>sig</code>,<code>sml</code>}
and <code>ABSdec</code> constructor in <code>ElabData/syntax/absyn.</code>{<code>sig</code>,<code>sml</code>}
The "abstraction" declaration that these constructors
implemented was in SML/NJ 0.93, but was eliminated in favor
of opaque "sealing" signature ascription after SML '97.</p>
</li>
<li>
<p>Eliminated all other occurrences of these constructors
throughout the compiler (Front End, FLINT, and cm).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/20]</dt>
<dd>
<div class="paragraph">
<p>File structure reoganization: the top-level <code>compiler/Semant</code>
directory was eliminated. Remaining relevant subdirectories
were <code>Semant/pickle</code>, which moved to <code>ElabData</code>, and <code>Semant/prim</code>,
whose two files, <code>prim-env.sml</code> and <code>primop-bindings.sml</code> moved to
the existing <code>ElabData/prim</code> directory. CM files <code>compiler/core.cm</code>
and <code>ElabData/elabdata.cm</code> changed accordingly.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/20]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=220&group_id=33&atid=215"><b>#220</b></a></p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Major redesign of the overloading resolution mechanisms.
Changed syntax of overload declaration (partly deferred to
110.98). Changed OVLDvar in VarCon.var, added files
overloadclasses.sml and overloadvar.sml to Elaborator/types.
Changed Types.tvKind in ElabData/types/types.{sig,sml},
splitting OVLD tvKind into OVLDV (overloaded
variables/operators), OVLDI (overloaded int literals) and
OVLDW (overloaded word literals). Modified treatment of the
overload metavariables in Unify (Elaborator/types/unify.sml).</p>
</li>
<li>
<p>Changed printing of overload type metavariables (unification
type variables (<code>Types.tyvar</code>)).</p>
</li>
<li>
<p>Files:
<code>ElabData/types/types.</code>{<code>sig</code>,<code>sml</code>}
<code>ElabData/types/overloadclasses.sml</code>  (new)
<code>ElabData/types/overloadvar.sml</code> (new)
<code>ElabData/types/overload.sml</code>
<code>Elaborator/elaborate/elabcore.sml</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/09]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=214&group_id=33&atid=215"><b>#214</b></a></p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Changed printed message when a VALvar binding is shadowed to
print &#8220;&lt;hidden&gt;&#8221; (function <code>ppVar</code> in <code>MiscUtil/print/ppdec.sml</code>).</p>
</li>
<li>
<p>Minor cleanup of <code>dontPickle</code> function in <code>Semant/pickle/pickmod.sml</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/08]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=209&group_id=33&atid=215"><b>#209</b></a></p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Added function <code>checkForbiddenCons</code> to <code>ElabUtil</code>
(<code>Elaborator/elaborate/elabutil.{sig,sml}</code>) that checks if
a symbol is in the forbidden constructor set (<code>it</code>, <code>true</code>,
<code>false</code>, <code>nil</code>, <code>::</code>, and <code>ref</code>).</p>
</li>
<li>
<p>Modified <code>elabEXCEPTIONdec</code> to check for forbidden exception
constructor names. Rewrote function <code>elabEb</code> to simplify.</p>
</li>
<li>
<p>Added a test for forbidden constructor names in function
<code>elabConstr</code> within <code>elabDB</code>.</p>
</li>
<li>
<p>Changed specs for types list and bool to datatype replication
specs in <code>system/Basis/Implementation/{list,bool}.sig</code>
to avoid an error caused by the occurrence of "forbidden"
constructors.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/07]</dt>
<dd>
<div class="paragraph">
<p>Some clean up in the <code>ml-lex/lexgen.sml</code> code.  Replaced the one-off
implementation of finite maps with the <code>RedBlackMapFn</code> functor from
the <strong>SML/NJ Library</strong>.  Also got rid of the uses of polymorphic equality
by changing token equality tests to pattern matching.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/05]</dt>
<dd>
<div class="paragraph">
<p>Turned several functors (<code>ElabModFn</code>, <code>ElabTopFn</code>, <code>SigMatchFn</code>, etc. into
structures and removed the redundant functor application files (and
the directories) in <code>Semant/elaborate</code> and <code>Semant/modules</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/05]</dt>
<dd>
<div class="paragraph">
<p>Fixed bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=195&group_id=33&atid=215"><b>#195</b></a> and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=196&group_id=33&atid=215"><b>#196</b></a></p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=195&group_id=33&atid=215"><b>#195</b></a>: added missing <code>DOdec</code> case in function <code>getDeclOrder</code> in
<code>ElabMod</code> (Elaborator/elaborate/elabmod.sml l. ~563)</p>
</li>
<li>
<p><a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=196&group_id=33&atid=215"><b>#196</b></a>: modified <code>elabDOdec</code> in <code>Elaborator/elaborate/elabcore.sml</code> to
return the empty Static environment (<code>SE.empty</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/02]</dt>
<dd>
<div class="paragraph">
<p>Various minor changes related to the <strong>heap2exec</strong> and <strong>heap2asm</strong>
programs.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Modified the <code>config/install.sh</code> script to remove <code>bin/heap2exec</code>
when the required helper <code>bin/heap2asm</code> is <em>not</em> installed.</p>
</li>
<li>
<p>Added <code>-static</code> and <code>-dynamic</code> as options to <strong>heap2exec</strong>
(these are the same as <code>--linkwith-a</code> and <code>--linkwith-so</code>)</p>
</li>
<li>
<p>Rewrote <strong>heap2asm</strong> be a bit more future-proof.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/04/02]</dt>
<dd>
<div class="paragraph">
<p>Addressed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=247&group_id=33&atid=215"><b>#247</b></a> (@SMLVersion should report 64/32 bit) by
adding a new command-line option (<code>@SMLwordsize</code>) to the <code>.run-sml</code>
command script.  Specifying this option will cause the the wordsize
to be printed (either <code>32</code> or <code>64</code>) and then the program will exit.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/03/19]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=252&group_id=33&atid=215"><b>#252</b></a> (Boyer Benchmark Compile Failure).  This crash
was caused by a typo in the <code>CPS/main/build-literals.sml</code> code that
caused an incorrect opcode to be generated for <code>SAVE</code>/<code>LOAD</code>
instructions when the offset was <code>&gt;= 256</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/03/04]</dt>
<dd>
<div class="paragraph">
<p>Fixed the calculation of the maximum array/vector length for
64-bit targets.  We had been using the calculation for 32-bit
targets.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2020/01/14]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=245&group_id=33&atid=215"><b>#245</b></a> (Lazy data types result in Compiler Bug error).
The problem was that a number of symbols (<em>e.g.</em>, <code>deref</code>) had been
dropped from the <code>_Core</code> structure, but were required to support
the lazy (and profiling) features in the compiler.  The symbols have
been reinstated and a comment has been added to explain why they
are being included.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/23]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=244&group_id=33&atid=215"><b>#244</b></a> (Compiler bug: PPObj: ppFields in ppval.sml).
The code generator was using the wrong length tag for raw64 records
on 64-bit machines (twice the length).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/21]</dt>
<dd>
<div class="paragraph">
<p>Clean up various issues in the configuration/build machinery for <strong>asdl</strong>.
This includes a fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=240&group_id=33&atid=215"><b>#240</b></a> (Non-default 64-bit installation
build failure)</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/18]</dt>
<dd>
<div class="paragraph">
<p>Fix bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=239&group_id=33&atid=215"><b>#239</b></a> (<code>Date.toTime</code> is incorrect (by a factor of 10E9)).
Thanks to Johannes 5 Joemann for both the report and fix.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_96_20191213">Version 110.96; 2019/12/13</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/12]</dt>
<dd>
<div class="paragraph">
<p>Bug fix for a problem where ^C (and other signals might be ignored).
The fix is to use word-sized fields in the VProc state vector so that
the word-sized move operations in the assembly code do not clobber
adjacent fields.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/12]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=234&group_id=33&atid=215"><b>#234</b></a> (Converting NaN to a string causes an infinite
loop on 64-bit machines).  The problem was in <code>MLRISC/amd64/mltree/amd64-gen.sml</code>,
which was not generating comparisons that work correctly when the
arguments are unordered.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/12]</dt>
<dd>
<div class="paragraph">
<p>Removed assertion checking from the <strong>amd64</strong> runtime makefiles.  It
has not turned up any errors since 110.94 was released, so we will
assume that things are working the way that they should.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/12/01]</dt>
<dd>
<div class="paragraph">
<p>Bugfix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=237&group_id=33&atid=215"><b>#237</b></a> (<strong>heap2exec</strong> script fails on 110.95).
The fix was provided by Kirill Boltaev.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/23]</dt>
<dd>
<div class="paragraph">
<p>Changed the default installation size to 64 bits on <strong>macOS</strong> 10.14
Mojave and later.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/14]</dt>
<dd>
<div class="paragraph">
<p>Fixed some code rot in the <strong>eXene</strong> sources (bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=233&group_id=33&atid=215"><b>#233</b></a>).  With
the <code>LargeWord</code> module changing from <code>Word32</code> to <code>Word64</code>, there were
a few places were things broke.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/14]</dt>
<dd>
<div class="paragraph">
<p>Added support for 64-bit executables on <strong>FreeBSD</strong>.  As part of this
effort, we fixed a couple of regressions (makefile issues) for the
32-bit version on <strong>FreeBSD</strong> that were introduced when the <code>X86.prim.asm</code>
file was rewritten.  We also switch from <strong>BSD</strong> signal handling to
<strong>POSIX</strong> signal handling, since that is what we use for most other systems.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed <code>config/install.sh</code> script, which was not passing the size
option to the <code>.link-sml</code>, which caused confusion for the "<strong>-64</strong>"
flag.  This problem was later reported as bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=235&group_id=33&atid=215"><b>#235</b></a> and
<a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=236&group_id=33&atid=215"><b>#236</b></a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/10]</dt>
<dd>
<div class="paragraph">
<p>Many years ago, <strong>SML/NJ</strong> had a bytecode interpreter, but it was mostly
removed from the system a long time ago.  There were, however, some
remnants of it in the runtime system.  These have now been removed.</p>
</div>
<div class="paragraph">
<p>Having made this change, the distinction between the "target" and
"host" architectures is no longer necessary.  Therefore, these have
been merged into a single architecture property.  The effects of this
merge are as follows:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>the <code>TARGET_xxx</code> and <code>HOST_xxx</code> C-preprocessor symbols have been
replaced with a single <code>ARCH_xxx</code> symbol in the runtime system.</p>
</li>
<li>
<p>The <code>SMLofNJ.SysInfo</code> structure now provides <code>getArchName</code> and
<code>getArchSize</code> functions.</p>
</li>
<li>
<p>The following <code>SMLofNJ.SysInfo</code> functions are deprecated and will
be removed in 110.97: <code>getHostSize</code>, <code>getHostArch</code>, and
<code>getTargetArch</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_95_20191109">Version 110.95; 2019/11/09</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/09]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=230&group_id=33&atid=215"><b>#230</b></a> (New literals-lifting code does not handle
pair of reals).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/09]</dt>
<dd>
<div class="paragraph">
<p>Simplified the runtime-system build rules for Cygwin.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/08]</dt>
<dd>
<div class="paragraph">
<p>Created the script <code>config/prepare-win-install.sh</code>, which implements
the fetching and unbundling of source and bin files in preparation
for a Windows installation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/07]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=229&group_id=33&atid=215"><b>#229</b></a> (<code>Real.fromString</code> errors). This bug was
actually two unrelated issues.  The problem that <code>Real.toString</code>
returns <code>Real.posInf</code> for <code>0.0e123213213123213123123</code> has been
fixed in the <code>RealScan</code> module (<code>system/basis/Implementation/real-scan.sml</code>).
The second bug was a regression introduced in 110.93, where the
<code>SIGFPE</code> signal was specified as the result of the <code>into</code> instruction,
whereas <strong>Linux</strong> actually signals <code>SIGSEGV</code> for <code>into</code>.  Note that
there may be a related issue of <strong>BSD</strong> systems, where <code>SIGBUS</code> might
be the signal, but we need access to a test machine to verify.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/07]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=230&group_id=33&atid=215"><b>#230</b></a> (segmentation fault when compiling MLton sources
with SML/NJ 64-bit).  The problem was that when a large vector was
being created, the assembly code did not correctly restore the stack
state before trying to call the runtime system to do the allocation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/11/04]</dt>
<dd>
<div class="paragraph">
<p>The runtime now uses <code>MAP_ANON</code> for allocating memory on 64-bit Linux.
This change fixes a problem with versions of Linux that do not allow
access to <code>/dev/zero</code> (such as on <strong>ChromeBooks</strong>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_94_20191031">Version 110.94; 2019/10/31</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/23]</dt>
<dd>
<div class="paragraph">
<p>Modified the generic installed (<code>base/system/smlnj/installer/generic-install.sml</code>)
to support conditional targets.  You can now write tests like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>if UNIX
  unix-utils
endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>The symbols that can currently be tested for are <code>SIZE_32</code>, <code>SIZE_64</code>,
<code>UNIX</code>, and <code>WINDOWS</code>.  See the <code>config/targets</code> file for more details.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/23]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=227&group_id=33&atid=215"><b>#227</b></a> (CPS contraction is taking an excessive amount
of time on word8 basis test).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/22]</dt>
<dd>
<div class="paragraph">
<p>Modified the CPS contraction phase to optimize the case where a
numeric conversion is applied to a constant value.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/21]</dt>
<dd>
<div class="paragraph">
<p>Modified the Unix installer script (<code>base/system/smlnj/installer/nix-install.sml</code>)
to pass a size argument to the configuration script.  This argument is used
by the <strong>ASDL</strong> configuration.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/21]</dt>
<dd>
<div class="paragraph">
<p>Overhauled the installation script (<code>config/install.sh</code>) and various
script templates (<em>e.g.</em>, <code>config/_run-sml</code>) to allow setting the
default size.  The <code>config/install.sh</code> script now supports the following
arguments:</p>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-default</strong> <em>size</em></dt>
<dd>
<p>specify the default size for the <strong>sml</strong> and other commands, where
<em>size</em> is either <strong>32</strong> or <strong>64</strong>.</p>
</dd>
<dt class="hdlist1"><strong>-32</strong></dt>
<dd>
<p>install the 32-bit version of the system.</p>
</dd>
<dt class="hdlist1"><strong>-64</strong></dt>
<dd>
<p>install the 64-bit version of the system.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>It is possible to install both versions in the same location by running
the <code>install.sh</code> script twice.  For example, the commands</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="shell"><span></span>% config/install.sh -32
% config/install.sh -default <span class="tok-m">64</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will install both versions with the 64-bit version as default.  One
would then use the command <strong>sml -32</strong> to run the 32-bit version of
the system.  Note that the default version must be installed second.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/21]</dt>
<dd>
<div class="paragraph">
<p>Added support for the <strong>-64</strong> flag to the <code>fixpt</code> script in <code>base/system</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/17]</dt>
<dd>
<div class="paragraph">
<p>Added support for the <strong>-64</strong> flag to the <code>cmb-make</code> script in <code>base/system</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/17]</dt>
<dd>
<div class="paragraph">
<p>Renamed the <code>REAL</code> representation constructor to <code>Raw64</code>, which matches
what is going on in the runtime system.  Also renamed the <code>toReal</code> function
to <code>toReal64</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/15]</dt>
<dd>
<div class="paragraph">
<p>Updated the <code>SMLofNJ.SysInfo</code> structure by removing constructors from the
<code>oskind</code> datatype that correspond to obsolete systems.  Also added a
<code>getHostSize</code> function that returns the host architecture&#8217;s native word
size in bits (<em>e.g.</em>, 32 or 64).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/13]</dt>
<dd>
<div class="paragraph">
<p>Added the <strong>-64</strong> flag to the <code>testml</code> script in <code>base/system</code> and
to the <code>.run-sml</code> script.  Thus, one will be able to specify the
32-bit version of SML/NJ using the command <strong>sml -32</strong> and the
64-bit version using the command <strong>sml -64</strong>.  Currently, 32-bits
is the default, since the 64-bit system is unstable.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/13]</dt>
<dd>
<div class="paragraph">
<p>Removed obsolete operating systems from the <code>SMLofNJ.SysInfo.os_kind</code>
datatype.  This change reduces the type to two constructors: <code>UNIX</code>
and <code>WIN32</code>.  Also added a function <code>getHostSize</code> to the <code>SysInfo</code>
structure, which returns the host word size in bits (<strong>i.e.</strong>, either
<code>32</code> or <code>64</code>).  The word size is now reported in the compiler&#8217;s
banner message at startup.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=130&group_id=33&atid=215"><b>#130</b></a> (failure to raise <code>Bind</code> exception). Added
a function <code>refutable</code> to <code>ElabData/types/typesutil.{sig,sml}</code> and
used it to limit type generalization of val bindings in
<code>Elaborator/types/typecheck.sml</code>.
The fix does not deal properly with refutability of OR patterns, but
OR patterns in val bindings is a dubious feature.</p>
</div>
<div class="paragraph">
<p>This change also fixes bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=188&group_id=33&atid=215"><b>#188</b></a> (Missing warning for
nonexhaustive valbind patterns), bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=190&group_id=33&atid=215"><b>#190</b></a> (Unexpected exception
in SML/NJ with invalid list pattern match), and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=199&group_id=33&atid=215"><b>#199</b></a> (Compiler
bug in pretty printing of result).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">David MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/04]</dt>
<dd>
<div class="paragraph">
<p>Modified the <strong>cmb-make</strong> script to support passing compiler control
flags to the build command.  The flags should be specified after the
path to <strong>sml</strong> command (if it is given).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/04]</dt>
<dd>
<div class="paragraph">
<p>Finished the implementation of the new literal bytecode engine.
There is a control flag (<code>Control.CG.newLiterals</code> that allows
switching between the old and new bytecodes).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/04]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=225&group_id=33&atid=215"><b>#225</b></a> (<code>Math.ln</code> giving erroneous answers on Windows).
The problem was an inconsistency in the way the Unix and Microsoft
assemblers interpreted the addressing mode for the <code>FLD</code> instruction.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/10/03]</dt>
<dd>
<div class="paragraph">
<p>Clean up in the Basis Posix library code (both SML and runtime) to
be consistent about when the <code>SysWord.word</code> type is being used to
communicate information between SML code and the runtime system.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_93_20190905">Version 110.93; 2019/09/05</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/09/04]</dt>
<dd>
<div class="paragraph">
<p>Add support for specifying a 32 or 64-bit target as command-line option
to the <code>.arch-n-opsys</code> and <code>.link-sml</code> scripts.  The default size is
currently 32-bits, but that will change once 64-bit support is solid.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/09/03]</dt>
<dd>
<div class="paragraph">
<p>Generalize code generation for conversions involving tagged integers/words,
where the size is <em>not</em> the default integer size.  This situation only
occurred for <code>Word8.word</code> values on 32-bit targets, but also occurs for
32-bit values on 64-bit targets.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/09/02]</dt>
<dd>
<div class="paragraph">
<p>Rewrote the expansion of the <code>INLLSHIFT</code>, <code>INLRSHIFTL</code>, and <code>INLRSHIFT</code>
primops (<code>compiler/FLINT/trans/transprim.sml</code>).  The expansion process
now correctly handles shift operations on types that are smaller than
the default tagged-integer size.  This change also allows the <code>Word8</code>
shift operations to be inlined.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/09/02]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the constant folding of arithmetic-right-shift operations.
The sign was not getting extended for words when the most-significant-bit
was set.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/25]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the <code>Real.toManExp</code> function (the exponent was off
by one, which meant that the mantissa was two times its expected
value).  This fix also fixes a problem in <code>Real.toLargeInt</code>, where
the function would go into an infinite loop in some cases.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">UPDATE</div>
</td>
<td class="content">
<div class="title">2022/06/29</div>
<div class="paragraph">
<p>This change probably also fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=208&group_id=33&atid=215"><b>#208</b></a> (<code>Real.toManExp</code>
produces incorrect results in some cases).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/24]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=173&group_id=33&atid=215"><b>#173</b></a> (<code>OS.Process.sleep</code> only works with whole numbers).
For systems that have finer-grain sleep function, such as the
<code>nanosleep</code>(2) system call, the <code>OS.Process.sleep</code> and <code>Posix.Process.sleep</code>
functions now support sub-second granularity.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/18]</dt>
<dd>
<div class="paragraph">
<p>Restructured the CPS contraction phase to make the fusion of
integer/word conversions more uniform.  Also fixed a bug
where <code>Int32.fromLarge(Word32.toLargeInt 0wxffffffff)</code> would
return <code>~1</code> instead of raising <code>Overflow</code>.  The problem was
that <code>TEST(m,n) o COPY(n,p)</code> was getting fused to <code>COPY(m,p)</code>
when <code>m = p</code>, instead of <code>TRUNC(m,p)</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/14]</dt>
<dd>
<div class="paragraph">
<p>Int64 comparisons were not always correct, which lead to some positive
values being printed as negative numbers (basically when the sign
bit of the lower word was set).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/13]</dt>
<dd>
<div class="paragraph">
<p>Added <code>Unsafe.IntInf</code> structure, which provides access to the
internal representation of the <code>IntInf.int</code> type.  Note that
this representation may change in the future.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=223&group_id=33&atid=215"><b>#223</b></a> (Incremental Build fails on Windows).  There was
a missing <code>CloseHandle()</code> when getting a file&#8217;s timestamp.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_92_20190810">Version 110.92; 2019/08/10</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/08/08]</dt>
<dd>
<div class="paragraph">
<p>Changed <code>base/system/allcross</code> script to use <code>cmb-cross</code> script.
Also modified the <code>cmb-cross</code> script to build compressed tar
files, when given the <code>-z</code> option, and to clean up intermediate
files.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/16]</dt>
<dd>
<div class="paragraph">
<p>Restructured the <strong>amd64</strong> machine-code generation implementation and
filled in many of the missing encodings.  It should be complete for
<strong>SML/NJ</strong> code generation, but needs more work to support the full set
of operations described in the <code>amd64.mdl</code> file.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/16]</dt>
<dd>
<div class="paragraph">
<p>Some cleanup in the <strong>x86</strong> MLRISC backend.  Removed the <code>MULB</code>,
<code>MULW</code>, and <code>MULL</code> unsigned-multiplication instructions, since they
are not binary operations.  The <code>MULL</code> instruction is covered by
the <code>MULL1</code> constructor in the <code>multDivOp</code> datatype.  The same change
was applied to the <strong>amd64</strong> backend.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/15]</dt>
<dd>
<div class="paragraph">
<p>Many changes to the <strong>amd64</strong> machine description:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Removed the <code>PUSHB</code>, <code>PUSHW</code>, and <code>PUSHL</code> instructions, since the matching
<code>POP</code> operations are not supported.</p>
</li>
<li>
<p>Removed the <code>CALLQ</code> operation, since it is the same as <code>CALL</code>.</p>
</li>
<li>
<p>Removed the <code>CLTD</code> and <code>CQTO</code> operations, since those names are just
synonyms for <code>CDQ</code> and <code>CDO</code>.</p>
</li>
<li>
<p>Replaced the <code>INTO</code> operation (which is not valid in 64-bit mode) with
<code>INT of byte</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/13]</dt>
<dd>
<div class="paragraph">
<p>New script for cross compiling to other architectures; the script
is still called <code>cmb-make</code>, but now supports target-specific
dependencies in the front-end (<em>i.e.</em>, representation of numeric
types and endianess).  The cross compilation scheme was developed
by Matthias Blume and then encoded in a script.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/11]</dt>
<dd>
<div class="paragraph">
<p>The runtime system now builds for the amd64 architecture.  Most of
the changes relate to the difference between the flat BIBOP on 32-bit
platforms and the two-level BIBOP on 64-bit platforms.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/09]</dt>
<dd>
<div class="paragraph">
<p>Fix bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=224&group_id=33&atid=215"><b>#224</b></a> (<code>Word64.fromLargeInt</code> fails).  The problem was
an incorrect record kind in <code>CPS/opt/infcnv.sml</code> (it was <code>RK_RECORD</code>
instead of <code>RK_RAWBLOCK</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/07/08]</dt>
<dd>
<div class="paragraph">
<p>Changed the <code>rep</code> datatype constructor <code>Word32</code> to <code>Raw</code>  (which
covers both 32 and 64-bit numbers on 32-bit platforms).  We now
check the length of the raw object when converting to an
concrete numeric type.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/28]</dt>
<dd>
<div class="paragraph">
<p>Removed the use of runtime-type passing for polymorphic arrays.
The effect of this change is that code that uses the <code>Array.array</code>
type will be faster when the element type is <strong>not</strong> <code>real</code> (<em>e.g.</em>,
sorting an <code>Int32.int array</code> was 1.2 times faster), but
slower when the type is <code>real</code>.  Use the monomorphic type
<code>RealArray.array</code> for best performance on arrays of reals.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a> and
<a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_91_20190620">Version 110.91; 2019/06/20</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/20]</dt>
<dd>
<div class="paragraph">
<p>We added a new primop, <code>REAL_TO_BITS</code> that casts a floating-point value to the
same-size word value.  This primop allows the Assembly.logb function to be
implemented in <strong>SML</strong>.<br></p>
</div>
<div class="paragraph">
<p>We have also refactored the implementation of the <code>Math</code> structure to share
common code across the versions that are specialized for different levels of
hardware support.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/19]</dt>
<dd>
<div class="paragraph">
<p>Rewrote the assembly code for the x86 and AMD64 targets.  Previously, there
were separate source files for Unix and Windows; these have been replaced
by a single common file (one for each architecture).  The <code>assyntax.h</code> file
has also been replaced by <code>x86-syntax.h</code>, which covers both the x86
and AMD64 on both UNIX and Windows.<br></p>
</div>
<div class="paragraph">
<p>The <code>AMD64.prim.asm</code> file now compiles, although there are a few minor
issues that will have to be fixed once we have a working code generator.
We have also fixed a number of issues in the garbage collector related
to the use of the 2-level BIBOP on 64-bit targets.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/18]</dt>
<dd>
<div class="paragraph">
<p>Some cleanup in the interval-timer code.  In keeping with the other
time-specific functions, I have switched the runtime-system API to
use unsigned 64-bit nanoseconds to specify time values.  I have also
added an implementation for <code>c-libs/smlnj-runtime/itick.c</code>, which
was missing.   Lastly, moved the Windows-specific file <code>win32-timers.c</code>
from <code>runtime/kernel</code> to <code>runtime/mach-dep</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/16]</dt>
<dd>
<div class="paragraph">
<p>Added 64-bit implementations of the target-specific <strong>Basis Library</strong>
modules in directory <code>Basis/Implementation/Target64Bit</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/16]</dt>
<dd>
<div class="paragraph">
<p>Added <code>PackWord64Big</code> and <code>PackWord64Little</code> structures to Basis Library.
Note that the implementation of these is target-specific.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/16]</dt>
<dd>
<div class="paragraph">
<p>Added <code>bigEndian</code> flag to the <code>TARGET</code> signature.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_90_20190612">Version 110.90; 2019/06/12</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed the Concurrent ML library to use 64-bit positions (both Unix
and Windows) versions.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/11]</dt>
<dd>
<div class="paragraph">
<p>Moved the year offset from SML to the runtime system.  This change is
necessary because Windows uses 1601 as year 0, whereas UNIX uses 1900.
We have also switched to using unsigned 64-bit times in nanoseconds as
the interface between the Basis code and runtime system.  This change
is consistent with the other places where time values are communicated
between the runtime and SML code.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed a problem with CM&#8217;s symbol filtering (see bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=222&group_id=33&atid=215"><b>#222</b></a>).</p>
</div>
<div class="paragraph">
<p>The problem could manifest itself when a library <code>l2.cm</code> imported two
symbols <code>A</code> and <code>B</code> from <code>l1.cm</code> and then exported the same <code>A</code> but a
different <code>B</code> (which could have been defined in terms of the imported
<code>B</code>).  Moreover, for the problem to occur both <code>A</code> and <code>B</code> within
<code>l1.cm</code> must have come from the same SML source file.</p>
</div>
<div class="paragraph">
<p>With the above setup, when running</p>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-nn">CM</span><span class="tok-p">.</span><span class="tok-n">make</span> <span class="tok-s2">&quot;l2.cm&quot;</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>it was possible that instead of seeing the new <code>A</code> defined within
<code>l2.cm</code> one would still see the original version that came from
<code>l1.cm</code>.</p>
</div>
<div class="paragraph">
<p>+
<a href="https://people.cs.uchicago.edu/~blume">Matthias Blume</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/04]</dt>
<dd>
<div class="paragraph">
<p>Various 64-bit porting changes to the <strong>Windows</strong> implementation of
the <strong>Basis Library</strong> and runtime system:</p>
</div>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Add a target-specific <code>Handle</code> structure to support the <code>HANDLE</code> type,
which is a pointer-sized word value.</p>
</li>
<li>
<p>Changes to support the use of 64-bit file positions.</p>
</li>
<li>
<p>Replaced pairs of argumnents representing time values (seconds and
microseconds) with a single 64-bit count of microseconds.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>+
<a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/04]</dt>
<dd>
<div class="paragraph">
<p>Implemented <a href="https://github.com/SMLFamily/BasisLibrary/wiki/2019-001-Correction-to-PRIM_IO">
Basis Library proposal 2019-001 (Correction to the PRIM_IO signature)</a>.
This proposal changes the return type of the <code>avail</code> function in a reader to
be <code>Position.int option</code>, which is necessary to support large files.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/03]</dt>
<dd>
<div class="paragraph">
<p>Added primop support (<code>PTR_TO_WORD</code> and <code>WORD_TO_PTR</code>) for the
<code>c_pointer</code> type that was added in 110.89.  These primops are
exposed in the new <code>InlineT.Pointer</code> structure.  We define a
<code>PointerImp</code> structure that is used inside the Basis implementation
and a <code>Unsafe.Pointer</code> structure that is visible to users.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_89_20190601">Version 110.89; 2019/06/01</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/01]</dt>
<dd>
<div class="paragraph">
<p>Switched the <code>Position</code> structure to be bound to <code>Int64</code> and updated
the runtime system to use 64-bit integers for file offsets and
time values (in nanoseconds).  This change fixes bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=33&group_id=33&atid=215"><b>#33</b></a>
(Overflow exception with inputLine function) and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=36&group_id=33&atid=215"><b>#36</b></a> (Can&#8217;t
open very large file).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/06/01]</dt>
<dd>
<div class="paragraph">
<p>Added abstract <code>c_pointer</code> type to the primitive types.  This type
will be used to represent runtime-system pointers (<em>e.g.</em>, the
<code>HANDLE</code> values in the Windows implementation).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/31]</dt>
<dd>
<div class="paragraph">
<p>Removed makefiles and code for architectures and operating systems
that are no longer supported (<em>e.g.</em>, the DEC Alpha and HPPA
architectures).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/31]</dt>
<dd>
<div class="paragraph">
<p>Switched the <code>FixedInt</code> and <code>LargeWord</code> structure aliases to be 64-bits
(<em>i.e.</em>, <code>FixedInt</code> is now bound to <code>Int64</code> and <code>LargeWord</code> is bound
to <code>Word64</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/30]</dt>
<dd>
<div class="paragraph">
<p>We are now assuming that we have at least <strong>C99</strong> support (for
practical purposes, this assumption is even true on Windows).
With this assumption, the allocation of small objects in the
runtime has been switched from macros to inline functions
(see <code>runtime/include/ml-objects.h</code>).  This change allows a
graceful handling of 32-bit integers, which are heap allocated
on 32-bit machines, but tagged on 64-bit machines.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed various bugs in the implementation of the <code>Word64</code> operations.
The addition and subtraction operators were using arithmetic right
shifts, instead of logical right shifts.  Also, the translation
of 64-bit shift operations was incorrect because of a typo in
the variable names.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/27]</dt>
<dd>
<div class="paragraph">
<p>Created a simplified version of the <code>MLRiscGen</code> functor.  This version
of the functor, which is in the file <code>CodeGen/main/mlrisc-gen-fn.sml</code>
does not include the memory disambiguation and GC types code.  Since
the old version (<code>CodeGen/main/mlriscGen.sml</code>) did not use these
features by default, there should be no difference in the quality of
the generated code.</p>
</div>
<div class="paragraph">
<p>The purpose of this change is to remove unused code that has 32-bit
dependencies.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/25]</dt>
<dd>
<div class="paragraph">
<p>Added contraction for unsigned <code>REM</code> and <code>NEG</code> operations in
<code>CPS/opt/contract-prim.sml</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_88_20190515">Version 110.88; 2019/05/15</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/15]</dt>
<dd>
<div class="paragraph">
<p>Moved the <code>compiler/DEVNOTES</code> directory to the <code>dev-notes</code> tree
and renamed it <code>old-compiler-notes</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/15]</dt>
<dd>
<div class="paragraph">
<p>Added 64-bit versions of <code>NumFormat</code> and <code>NumScan</code>.  We use the 32-bit
version for numbers of 32-bits or less and the 64-bit versions for
numbers with up to 64 bits.  Thus, on 32-bit machines, the default
<code>int</code> and <code>word</code> types use <code>NumFormat32</code> and <code>NumScan32</code>, while on
64-bit machines they use <code>NumFormat64</code> and <code>NumScan64</code>.  This change
also required splitting out some common code into a <code>ScanUtil</code>
structure and also splitting out the scanning of real numbers into
the <code>ScanReal</code> structure (formatting of reals was already in its own
structure).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/15]</dt>
<dd>
<div class="paragraph">
<p>Reimplemented the 64-bit <code>int</code> and <code>word</code> types to put them on a
(mostly) equal footing with the other precisions.  In this new implementation,
the basic types <code>int64</code> and <code>word64</code> are now <code>PRIMITIVE</code> (instead
of being <code>ABSTRACT</code> type represented by pairs of boxed 32-bit words).
Arithmetic and comparison operations on these types are represented as
primops and are preserved as such up to just before closure conversion.
At that point, the new <code>Num64Cnv</code> structure (<code>compiler/CPS/opt/numcnv.sml</code>)
is used to expand 64-bit operations and constants into 32-bit operations.
Most of the 64-bit primops are inline expanded, but multiplication and
division operations are converted to calls to library code from the
<code>CoreInt64</code> and <code>CoreWord64</code> modules (<code>system/smlnj/init</code>).</p>
</div>
<div class="paragraph">
<p>Because the type are primitive, we were able to change the runtime
representation to use packed records (<code>RK_RAWBLOCK</code>) to represent
them, which saves space and should also help with performance.</p>
</div>
<div class="paragraph">
<p>See the <code>dev-notes/num64.md</code> file for more details about the
implementation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/09]</dt>
<dd>
<div class="paragraph">
<p>Reorganized the Basis Library source files (<code>system/Basis</code>) to isolate
dependences on target word size.</p>
</div>
<div class="paragraph">
<p>In the <code>Basis/Implementation</code> directory, I created subdirectories
(<em>e.g.</em>, <code>Target32Bit</code>) to hold implementations that are specific
to the target.  These directories include a <code>bind-structs.sml</code> file
that replaces the many <code>bind-*.sml</code> files in <code>Basis/Implementation</code>.</p>
</div>
<div class="paragraph">
<p>In the <code>Basis/Exports</code> directory, I replaced the many individual
files (each with a single module renaming) with <code>bind-common.sml</code>
(for target-independent bindings) and a target-specific file
(either <code>bind-target-32-bit.sml</code> or <code>bind-target-64-bit.sml</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/05]</dt>
<dd>
<div class="paragraph">
<p>Some of the CPS optimization modules (<code>Expand</code> and <code>EtaSplit</code> were
written as functors over the machine spec, when, in fact, they never
reference their functor argument.  Therefore, they have been converted
to structures.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/04]</dt>
<dd>
<div class="paragraph">
<p>We now use the <code>InlineT.identity</code> primop for <code>Fn.id</code>, so the compiler
can optimize it.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/03]</dt>
<dd>
<div class="paragraph">
<p>Fixed pretty-printing regression in 110.87; value of <code>char</code> type
were missing their enclosing quotes.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_87_20190503">Version 110.87; 2019/05/03</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/03]</dt>
<dd>
<div class="paragraph">
<p>Made the <code>Char.chr</code> operator inline (a primop was added to support
this change in 110.86).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/03]</dt>
<dd>
<div class="paragraph">
<p>Major renaming of the primitive operators in the <code>Inline</code> structure
(as described in <code>dev-notes/primop-list.md</code>).  Also cleaned up the
<strong>Basis Library</strong> implementation to remove most (but not all)
32-bit dependencies.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/03]</dt>
<dd>
<div class="paragraph">
<p>Added cases to the top-level pretty printer to handle the new basic
types that were added in 110.86 (<strong>e.g.</strong>, <code>word8vector</code> and <code>chararray</code>).
Also changed the way that primitive types are handled to use a
table keyed by tycons, instead of a sequence of nested conditionals.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_86_20190502">Version 110.86; 2019/05/02</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/01]</dt>
<dd>
<div class="paragraph">
<p>Added <code>word8vector</code> and <code>chararray</code> to the primitive types that
the compiler knows about.  These will be used in the rewriting
of the <code>InlineT</code> structure.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/01]</dt>
<dd>
<div class="paragraph">
<p>Replaced the <code>Primop.primop</code> constructors <code>NUMSUBSCRIPT</code> and <code>NUMUPDATE</code>
with</p>
</div>
<div class="paragraph">
<p><code><code>`sml
| NUMSUBSCRIPT of numkind
| NUMSUBSCRIPTV of numkind
| NUMUPDATE of numkind
| INLNUMSUBSCRIPT of numkind
| INLNUMSUBSCRIPTV of numkind
| INLNUMUPDATE of numkind
</code>`</code></p>
</div>
<div class="paragraph">
<p>This design matches the naming conventions for polymorphic subscripting
and updating.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/01]</dt>
<dd>
<div class="paragraph">
<p>Added <code>Primop.INLCHR</code> to implement <code>Char.chr</code> as an inline function.
This change also required moving the definition of the <code>Chr</code>
exception to the <code>Core</code> module so that it is accessible to the
translate phase.  The inline version of Char.chr will be enabled
in the 110.87 release (we need the internal primop before we can
use it).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/05/01]</dt>
<dd>
<div class="paragraph">
<p>Major overhaul of the representation of primitive operators (both in
the <code>Primop</code> and <code>CPS.P</code> structures).  The primitive arithmetic and
comparison operations are now defined in the <code>ArithOps</code> structure
(<code>ElabData/prim/arithops.sml</code>).  There are three datatypes defined
in this module</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>arithop&#8201;&#8212;&#8201;integer arithmetic operations that may raise overflow</p>
</li>
<li>
<p>pureop&#8201;&#8212;&#8201;arithmetic operations that are pure</p>
</li>
<li>
<p>cmpop&#8201;&#8212;&#8201;comparison operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>These types are used in both the <code>Primop</code> and <code>CPS.P</code> modules,
which makes the translation between representations more direct.</p>
</div>
<div class="paragraph">
<p>Some details:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>inline division and modulo operations were added to the
<code>Primop.primop</code> datatype; the expansion of these in
the <code>TransPrim</code> module (<code>FLINT/trans/transprim.sml</code>)
adds explicit checks for division by zero.</p>
</li>
<li>
<p>the <code>FSGN</code> operator was added to the <code>Primop.primop</code> datatype,
since the new <code>cmpop</code> datatype does not include it (the
CPS IR already had FSGN as a separate <code>branch</code> constructor).</p>
</li>
<li>
<p>unsigned comparison operations are now represented by using
the <code>UINT</code> <code>numkind</code>, which is consistent with how they
are represented in <code>CPS</code>.</p>
</li>
<li>
<p>Renamed the primop <code>ROUND</code> to <code>REAL_TO_ROUND</code>.</p>
</li>
<li>
<p>the encodings for operators were revised in the pickler, resulting
in a more compact use of the numeric codes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/28]</dt>
<dd>
<div class="paragraph">
<p>Removed unused record kind constructors (<code>RK_SPILL</code>, <code>RK_EXN</code>, and
<code>RK_BLOCK</code>) from <code>CPS.record_kind</code> datatype.  Also renamed <code>RK_I32BLOCK</code>
to <code>RK_RAWBLOCK</code> and <code>RK_FBLOCK</code> to <code>RK_RAW64BLOCK</code>.  Various other
renamings to remove 32-bit assumptions.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/28]</dt>
<dd>
<div class="paragraph">
<p>Renamed <code>DTAG_raw32</code> to <code>DTAG_raw</code>, since the semantics on 64-bit systems
will be to require word-size aligned raw data.  Also renamed <code>ML_AllocRaw32</code>
to <code>ML_AllocRaw</code> and <code>ML_ShrinkRaw32</code> to <code>ML_ShrinkRaw</code> for similar reasons.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/28]</dt>
<dd>
<div class="paragraph">
<p>Removed unused flags from the <code>Control</code> structure; most of these came
from <code>Control.CG</code>, where roughly 20 out of 60 flags were no longer used.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/27]</dt>
<dd>
<div class="paragraph">
<p>Split the contraction of primitive operators out of the <code>Contract</code>
structure into its own <code>ContractPrim</code> structure.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/27]</dt>
<dd>
<div class="paragraph">
<p>Split the translation of primops to PLambda out into its own file
(<code>compiler/FLINT/trans/transprim.sml</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/27]</dt>
<dd>
<div class="paragraph">
<p>Fixed regression: <code>Word32.toInt 0wx8002DE32;</code> would return <code>187954</code> instead
of raising <code>Overflow</code>.  The problem was a mistake in the way that the overflow
trap was being generated in <code>MLRiscGen</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/26]</dt>
<dd>
<div class="paragraph">
<p>Some minor primop cleanup.</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Changed the types of <code>Primop.ROUND</code> and <code>Primop.REAL</code>
to take bitwidths, instead of numkinds, since the kinds are always the same.
Also, the fields are now called <code>from</code> and <code>to</code> (instead of <code>fromkind</code> and
<code>tokind</code>) to be consistent with other conversion primops.</p>
</li>
<li>
<p>Renamed <code>ABS</code> to <code>FABS</code>, since it is only used on floating-point numbers.</p>
</li>
<li>
<p>Renamed the CPS primitive operator <code>ROUND</code> to <code>REAL_TO_INT</code> and the operator
<code>REAL</code> to <code>INT_TO_REAL</code>.</p>
</li>
<li>
<p>Renamed the <code>Primop.REAL</code> to <code>Primop.INT_TO_REAL</code> so that it is not confused
with the other constructors named <code>REAL</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/23]</dt>
<dd>
<div class="paragraph">
<p>Improvements to the core 64-bit int and word modules in <code>system/smlnj/init</code>.
Replaced <code>Int64.+</code>, <code>Int64.-</code>, <code>Word64.+</code>, and <code>Word64.<strong></code> with versions
from *Hacker&#8217;s Delight</strong> that use fewer conditional branches.  Also
replaced the relational operators (<code>&lt;</code>, <code>&#8656;</code>, etc) with more direct
implementations.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/21]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=213&group_id=33&atid=215"><b>#213</b></a> (<code>Int32.div</code> raises <code>Div</code> instead of <code>Overflow</code>
when dividing <code>minInt</code> by <code>~1</code>).  Since the compiler generates an
explicit test for division by zero, we know that the only arithmetic
traps must be caused by other operations.  Therefore, we can just
map any arithmetic trap to <code>Overflow</code>.</p>
</div>
<div class="paragraph">
<p>Also removed the old SPARC assembly code for multiplication and
division.  The code generator always uses the native hardware
instructions, so the assembly code is not needed.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/21]</dt>
<dd>
<div class="paragraph">
<p>Yet another attempt to get the implementation of <code>use</code> in the REPL
working in a sensible way.</p>
</div>
<div class="paragraph">
<p>With these changes, <code>use</code> should behave as follows.
If an invocation of <code>use</code> encounters
a compilation error (either in the initial file or in a nested
invocation of <code>use</code>), then the compiler error message will be
printed and the call to <code>use</code> will immediately return <code>()</code>.
If an invocation of <code>use</code> raises an exception during execution
of the compiled code (either in the initial file or in a nested
invocation of <code>use</code>), then the exception will be reported at
the top-level.  Any change to the global state or environment
that occurs before an error is encountered, will <strong>not</strong> be rolled
back.</p>
</div>
<div class="paragraph">
<p>Files specified as command-line arguments to the <strong>sml</strong> command
will be treated as if <code>use</code> was invoked on them.  If there is an
error, then the error will be reported and the <strong>sml</strong> command
will terminate with a non-zero exit status (at least on Unix).</p>
</div>
<div class="paragraph">
<p>This change fixes bugs <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=193&group_id=33&atid=215"><b>#193</b></a>, <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=217&group_id=33&atid=215"><b>#217</b></a>, and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=219&group_id=33&atid=215"><b>#219</b></a>.
There is a connection between this change and <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=183&group_id=33&atid=215"><b>#183</b></a>, which
was fixed in Version 110.82.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/21]</dt>
<dd>
<div class="paragraph">
<p>Change to the CPS primops: moved the <code>F_SGN</code> operator (which is unary)
from the <code>fcmp</code> datatype to the <code>branch</code> datatype (and renamed it <code>FSGN</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/21]</dt>
<dd>
<div class="paragraph">
<p>Finished conversion of the CPS IR to a form that is compatible with
ASDL.  Basically, this involved converting the datatype constructor
names to upper-case identifiers.</p>
</div>
<div class="paragraph">
<p>These changes are a step in the plan to eventually switch to an LLVM-based
code generator that will be given pickled CPS code as its input.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/08]</dt>
<dd>
<div class="paragraph">
<p>Starting to migrate the CPS IR toward the ASDL version.  Changed the
names of the <code>CPS.P.arith</code> and <code>CPS.P.cmpop</code> constructors to be upper-case
alpha IDs (many of them were symbolic identifiers).  Also split out the
various utility functions into the new <code>CPSUtil</code> module (<code>CPS/cps/cps-util.sml</code>).
Lastly, moved the <code>literals.sml</code> file from <code>FLINT/main</code> to <code>CPS/main</code> (where
it belongs).</p>
</div>
<div class="paragraph">
<p>Note that the <code>CPS.P.arithop</code> datatype is now identical to the <code>Primop.arithop</code>
datatype</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2019/04/07]</dt>
<dd>
<div class="paragraph">
<p>Reorganized the backend of the compiler by moving the CPS-related
code into its own directory tree (<code>Compiler/CPS</code>) and replacing the
<code>FLINTComp</code> functor with the <code>FLINTOpt</code> structure and the <code>CPSCompFn</code>
functor.  The conversion from FLINT to CPS is part of the <code>CPSCompFn</code>
functor, which takes the program representation all the way from
FLINT to machine code segments.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_85_20181221">Version 110.85; 2018/12/21</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/12/21]</dt>
<dd>
<div class="paragraph">
<p>Modified <code>config/install.sh</code> to look for a pre-Mojave SDK when trying
to install on macOS 10.14 Mojave.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/12/21]</dt>
<dd>
<div class="paragraph">
<p>Updated <code>runtime/objs/cygwin.def</code> so that the runtime system will build
on 32-bit Cygwin.  Also updated installation script to suggest using
the 32-bit version of Cygwin when a user tries to install it on Cygwin64.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/11/10]</dt>
<dd>
<div class="paragraph">
<p><strong>Xcode</strong> 10.1, which is Apple&#8217;s development environment for <strong>macOS 10.14
Mojave</strong>, does not include the libraries needed to build 32-bit executables,
such as the SML/NJ runtime, although 32-bit programs will still run.</p>
</div>
<div class="paragraph">
<p>To support building on Mojave, I added a new Makefile (<code>mk.x86-darwin18</code>)
for the runtime system and modified the <code>config/install.sh</code>
script to use this makefile when necessary.  This new makefile expects
that the <code>MacOSX10.13.sdk</code> directory from <strong>Xcode</strong> 9 has been
copied into the <strong>Xcode</strong> 10 SDKs directory.  Note that updating <strong>Xcode</strong>
from the AppStore will likely remove the 10.13 SDK, so you should keep
a copy in a safe place.</p>
</div>
<div class="paragraph">
<p>The <strong>Xcode</strong> SDKs live in <code>Platforms/MacOSX.platform/Developer/SDKs</code>
under the <code>Developer</code> directory.  One can determine the path to the
current developer directory using the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="shell"><span></span>% xcode-select -p</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/10/10]</dt>
<dd>
<div class="paragraph">
<p>Removed several unsupported primitive operators from the compiler.
In the CPS IR, these were <code>free</code>, <code>acclink</code>, <code>setpseudo</code>, <code>setmark</code>, and
<code>getpseudo</code>.  The pseudo-register operations were not supported in the
code generator, while the others were no-ops.  The corresponding
operators <code>GETPSEUDO</code>, <code>SETPSEUDO</code>, <code>SETMARK</code>, and <code>DISPOSE</code> were removed
from <code>ElabData/prim/primop.sml</code> and their bindings were removed from
<code>Semant/prim/primop-bindings.sml</code> and the <code>InlineT</code> and <code>Unsafe</code>
structures.</p>
</div>
<div class="paragraph">
<p>The <code>AllocProf</code> module in the compiler was also disabled, since it
relied on the pseudo registers for recording profile information at
runtime.  Furthermore, uses of the <code>acclink</code> primitive operation in
<code>FLINT/cps/closure.sml</code> when static profiling is enabled were removed.</p>
</div>
<div class="paragraph">
<p>These changes were committed as revision 4886.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/10/08]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=216&group_id=33&atid=215"><b>#216</b></a> (run-time system fatal error with large top-level
value).  The problem was in the code for building literals.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/23]</dt>
<dd>
<div class="paragraph">
<p>Change CPS operators for wrapping/unwrapping integer and float values to
be word-size flexible.  We now use a single <code>wrap</code> (and <code>unwrap</code>) operator
that is parameterized by a <code>numkind</code> value.  We also changed the <code>wrap</code>/<code>unwrap</code>
operators to <code>box</code>/<code>unbox</code>.  The mapping from old operators to new ones
is as follows:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>wrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>box</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>unwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unbox</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>iwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wrap(INT defaultIntSz)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>iunwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unwrap(INT defaultIntSz)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>i32wrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wrap(INT 32)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>i32unwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unwrap(INT 32)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>fwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wrap(FLOAT 64)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>funwrap</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8658;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unwrap(FLOAT 64)</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/13]</dt>
<dd>
<div class="paragraph">
<p>Further cleanup for 64BIT in function <code>atomeq</code> in <code>PEqual</code>.
(<code>base/compiler/FLINT/trans/pequal.sml</code>).
Added <code>numKind</code>, <code>intEqTy</code>, and <code>uintEqTy</code> functions.
The <code>numKind</code> function should be extended once <code>int64</code> and <code>word64</code> are treated as primitive
types in the compiler.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed 64BIT issue in module <code>MatchComp</code>
(<code>base/compiler/FLINT/trans/matchcomp.sml</code>).
Added <code>int64Ty</code> and <code>word64Ty</code> cases to function <code>numCon</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed 64BIT issue in module <code>Equal</code>
(<code>base/compiler/FLINT/reps/equal.sml</code>).
Exports just one function: <code>equal_branch</code>, which is called once in
<code>reps/wrapping.sml</code> to type-specialize branches on calls to <code>POLYEQUAL</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/12]</dt>
<dd>
<div class="paragraph">
<p>The CPS optimizer had a mechanism for checking the CPS against the FLINT
types, which required maintaining a mapping from lvars to their FLINT
types.  This code has long since bit-rotted and cannot even handle a
simple expression like <code>1+2</code>.  Therefore, I&#8217;ve removed the mapping (a hash
table) from the CPS optimizer and the vestigial code that modified it
in the various CPS optimization passes.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/12]</dt>
<dd>
<div class="paragraph">
<p>Modified the <code>InfCnv</code> (now named <code>IntInfCnv</code>) structure to remove
32-bit dependencies.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/11]</dt>
<dd>
<div class="paragraph">
<p>Modified <code>Pequal</code> (in <code>base/compiler/FLINT/trans/pequal.sml</code>) and
<code>Translate</code> (in <code>base/compiler/FLINT/trans/translate.sml</code>) to remove
32-bit dependencies. though further changes will be required to
properly handle <code>int64</code> and <code>word64</code> types when <code>defaultIntSz</code> = 64.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/11]</dt>
<dd>
<div class="paragraph">
<p>Reimplemented the <code>Switch</code> module (int <code>base/compiler/FLINT/cps</code>).  The
new implementation follows the same basic design as before, but the code
is better organized and documented, and it now uses the concrete <code>CPS</code>
representations, instead of being parameterized over an abstraction of
them.  It also now uses binary search for boxed (e.g., <code>Int32.int</code>)
switches.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_84_20180903">Version 110.84; 2018/09/03</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/03]</dt>
<dd>
<div class="paragraph">
<p>Reimplemented the array/vector-slice modules to use a (base, start, length)
representation (as does Substring in system/smlnj/init/substring.sml).  Also
fixed a bug in the slice findi functions, where the index being passed to the
predicate function was not adjusted to be slice-relative.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/02]</dt>
<dd>
<div class="paragraph">
<p>Implemented <a href="https://github.com/SMLFamily/BasisLibrary/wiki/2018-002-Additional-slice-operations">
Basis Library proposal 2018-002 (Additional slice operations)</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/09/02]</dt>
<dd>
<div class="paragraph">
<p>Improved implementation of <code>CharVectorSlice.map</code> and <code>CharVectorSlice.mapi</code>
to not build intermediate list of results.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/08/28]</dt>
<dd>
<div class="paragraph">
<p>A beta-release of ASDL library and <strong>asdlgen</strong> tool have been added to
the system.  This version of the tool implements SML support, but the
C++ support is not complete.  There is a CM tool for ASDL, which
recognizes the <code>.asdl</code> file suffix.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/08/28]</dt>
<dd>
<div class="paragraph">
<p>Two changes to the installer (<code>base/base/system/smlnj/installer</code>):</p>
</div>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The build scripts for programs are now named <code>build.sh</code> (instead of
<code>build</code>) on Unix systems.</p>
</li>
<li>
<p>The <strong>config</strong> action has been added to support module configuration.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/08/27]</dt>
<dd>
<div class="paragraph">
<p>Added <code>RENAME</code> extension style to CM tool support.  This extension
style allows arbitrary file names to be generated from the base name.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/08/19]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the implementation of monomorphic buffers: the functions
<code>CharBuffer.add1</code> and <code>Word8Buffer.add1</code> had an incorrect length
test.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/06/15]</dt>
<dd>
<div class="paragraph">
<p>Fixed a compiler bug (<code>arg ty lists wrong length</code>) in <code>unifyTy</code> that
could occur when one of the type constructors is the <code>ERRORtyc</code>.
This bug occurs because the <code>ERRORtyc</code> is equal to any other type
constructor, which (incorrectly) implies that the number of type
arguments should be equal.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_83_20180601">Version 110.83; 2018/06/01</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=206&group_id=33&atid=215"><b>#206</b></a> (Parsing of explicit type variables and val rec
is broken).  This bug was also bug number 1261 in the old bugs list.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed minor bug in Date.toString (missing leading "0" for day of month).
This issue was bug number 1444 in the old bugs list.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/29]</dt>
<dd>
<div class="paragraph">
<p>Cleaned up match compiler code (<code>FLINT/trans/matchcomp.sml</code>) and added
typing and function comments.  Added debugging and printing
infrastructure, including new <code>FLINT/trans/mcprint.sml</code> file, and new
<code>Control.MC.debugging</code> flag.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/29]</dt>
<dd>
<div class="paragraph">
<p>Fixed parser to allow parentheses around <code>val rec</code> patterns.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/28]</dt>
<dd>
<div class="paragraph">
<p>Fixed the scanner to produce the correct error message for bad escape
sequences in string literals.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/26]</dt>
<dd>
<div class="paragraph">
<p>Fixed old bug number 1383: <code>Char.toCString #"\000"</code> returned <code>"\\0"</code>,
instead of <code>"\\000"</code>, which caused <code>String.toCString</code> to produce invalid
results.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/19]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=201&group_id=33&atid=215"><b>#201</b></a> (The AMD64.cm library is missing).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/18]</dt>
<dd>
<div class="paragraph">
<p>Added <code>MONO_BUFFER</code> signature, with instances <code>CharBuffer</code> and <code>Word8Buffer</code>,
to Basis implementation
(<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2018-001-Addition-of-monomorphic-buffers">
Basis Library Proposal 2018-001</a>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/16]</dt>
<dd>
<div class="paragraph">
<p>Fix a bug where &#8220;0w&#8221; was being accepted as a prefix for a hexidecimal
word value in <code>Word.fromString</code>/<code>scan</code> (ignoring case, only &#8220;0x&#8221;
and &#8220;0wx&#8221; are valid prefixes).  This change fixes bug number 1375
from the old bugs list.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/13]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the parsing of bindings involving the <code>op</code> keyword.
The parser was more restrictive than the definition.  This change
fixes bug number 1370 from the old bugs list.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/12]</dt>
<dd>
<div class="paragraph">
<p>The lexer gave an unmatched close comment error on "*)", when it
should have scanned it as the tokens "*" ")".  This change
fixes bug number 330 in the old bugs list.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: there is some ambiguity as to what the correct behavior
should be here.  The <em>Definition of Standard ML</em> (1997) only says that
unmatched <em>open</em> comments should be signalled as errors, but the
<em>Commentary on the Definition of Standard ML</em> (1991) says otherwise in
Appendix D.  <strong>SML/NJ</strong> started signalling an error in version 0.71,
but we choose to revert to accepting this sequence, to match
the 1997 Definition (and the behavior of other systems).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/07]</dt>
<dd>
<div class="paragraph">
<p>The <code>sameSign</code> function returned incorrect results in the <code>Int31</code>
and <code>Int32</code> modules.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed various minor parsing and scanning issues:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>correct syntax for type variables</p>
</li>
<li>
<p>signature/structure/functor IDs should always be alpha IDs</p>
</li>
<li>
<p>the equality ID (<code>=</code>) cannot appear in a binding context.  Note that
we still allow the syntax <code>val op = = &#8230;&#8203;</code> because it is needed to
parse the file <code>system/smlnj/init/built-in.sml</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/05/05]</dt>
<dd>
<div class="paragraph">
<p>Completed overhaul of the way that int/word literals are handled in
the compiler.  We now use <code>IntInf.int</code> to represent the values in
all IRs.  This change also results in better CPS contraction, since
we now perform constant folding for both signed and unsigned values
at all sizes.  We were also able to get rid of the tricky code that
worries about large tagged integer values that might cause overflow
during code generation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/04/21]</dt>
<dd>
<div class="paragraph">
<p>Improved the reporting of errors involving literal values.  We now
use the original source text when describing the value in the error
message.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/04/20]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=191&group_id=33&atid=215"><b>#191</b></a> (Compiler crash when handling large reals).
We now issue a warning for real literals that will round to zero and
an error for real literals that are too large to represent.  There
still needs to be done some work to support sub-normal literal values
(these are currently rounded to zero).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/04/14]</dt>
<dd>
<div class="paragraph">
<p>Changed the representation of real literals from strings to <code>RealLit.t</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/04/13]</dt>
<dd>
<div class="paragraph">
<p>Removed real patterns from Absyn and FLINT, since they are not allowed
by SML'93 and were not present in the AST representation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2018/04/12]</dt>
<dd>
<div class="paragraph">
<p>Fix for bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=194&group_id=33&atid=215"><b>#194</b></a> (<code>Real.fromString</code> overflows or hangs).  There
were two issues here.  First, the <code>Overflow</code> exception was being raised
when scanning large exponents, but it was not being handled by the
scanning code.  The second issue was that the scaling loop for large
exponents did not immediately terminate once infinity (or zero) was
reached, so it could take a long time.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/10/22]</dt>
<dd>
<div class="paragraph">
<p>Moved the Version-1 literal building code into <code>gc/old-literals.c</code>.
This file can be removed once the compiler generates the Version-2
literal bytecode.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/10/16]</dt>
<dd>
<div class="paragraph">
<p>Moved the check for whether a int or word literal is in range for
its type from the absyn&#8594;plambda translation to the overload
resolver (<code>compiler/Elaborator/types/overload.sml</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/10/14]</dt>
<dd>
<div class="paragraph">
<p>Part 1 of an overhaul of the way that the compiler treats int/word
literals.  The end goal is to use <code>IntInf.int</code> to represent literals
throughout all phases of the compiler.  In this step, we changed the
representation of literals in the <code>Absyn</code> representation (earlier
representations already used IntInf.int).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_82_20171016">Version 110.82; 2017/10/16</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/10/01]</dt>
<dd>
<div class="paragraph">
<p>Fixed unnumbered bug in <code>IntInf.mod</code> and <code>IntInf.rem</code> functions,
where the <code>Div</code> exception was <strong>not</strong> getting raised when both
arguments are <code>0</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/09/20]</dt>
<dd>
<div class="paragraph">
<p>Various bits of cleanup in the handling of primitive operations, such
as removing the <code>ptnum</code> mechanism for translating from Absyn to FLINT.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">David MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/09/20]</dt>
<dd>
<div class="paragraph">
<p>Added <code>Target</code> module, which specifies the properties of the target
(<em>e.g.</em>, the size in bits of the default int type).  Reworked the
generation of the <code>InlineT</code> structure to be target specific.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/09/18]</dt>
<dd>
<div class="paragraph">
<p>Removed FLINT primops (and their CPS counterparts) that are not
in the <code>InlineT</code> structure and, thus, are never used by the compiler.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/09/18]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=123&group_id=33&atid=215"><b>#123</b></a> (missing nonexhaustive bind warning). The <code>mkVBs</code>
function in <code>FLINT/trans/translate.sml</code> was adding a redundant default
rule by calling <code>ElabUtil.completeMatch</code> after a default rule had
already been explicitly added to the match for let bindings.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">David MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/09/18]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=183&group_id=33&atid=215"><b>#183</b></a> (status code returned by sml REPL).  This fix
restores the version 110.79 behavior of having <code>sml foo.sml</code> exit with
a non-zero status when there is a type-checking error in <code>foo.sml</code>.
It also cleans up the error messages associated with <code>use</code> when there
is a syntax error.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/08/28]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=185&group_id=33&atid=215"><b>#185</b></a> (Bring command line help text into parity with man page).
Added missing options (<code>@SMLversion</code> and <code>@SMLsuffix</code>) to the
help message that is printed for the command &#8220;sml -h&#8221;.  Also
adjusted the order of options in the help message, and in the man
page, so that the orders match.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/08/12]</dt>
<dd>
<div class="paragraph">
<p>Changed the way that we test for allocation-space addresses in minor GCs.
Instead of using the BIBOP, we now do a pointer range test.  On 32-bit
systems, this change results in a small (~0.13%) performance boost, but
we expect a bigger impact on 64-bit hardware, where the cost of BIBOP
probes will be higher and there are more registers available to hold
the nursery bounds.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/08/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed some issues in build-literals.c.  These were mostly false
positives in the assertions, but there was also a bug in the way
that the available space was tracked that could conceivably
result in a crash (but was very unlikely).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/06/07]</dt>
<dd>
<div class="paragraph">
<p>Updated _arch-n-os script to recognize macOS 10.13 (High Sierra)
as a valid target.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/05/17]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the way that JSON string values were being printed.
The code previously assumed that C-style escaping will work, but
that is not true for "\'" (as well as for control and non-ASCII
characters).  The new implementation assumes that the string value
is UTF-8 and uses the "\\u" escape sequences for characters outside
the JSON escapes and printable ASCII characters.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_81_20170501">Version 110.81; 2017/05/01</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/04/28]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=129&group_id=33&atid=215"><b>#129</b></a> (Symbolic identifiers are allowed as strids).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/04/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=179&group_id=33&atid=215"><b>#179</b></a> (ml-ulex writing debug messages to stdOut).
Both <strong>ml-ulex</strong> and <strong>ml-antlr</strong> now direct their debug and status messages
to <code>stdErr</code> (instead of <code>stdOut</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2017/02/09]</dt>
<dd>
<div class="paragraph">
<p>Linux distributions are starting to require that the stack be marked
as non-executable in applications.  Because the runtime system includes
assembly code, this marking was not happening.  We&#8217;ve added <code>.section</code>
directives to the <code>PPC.prim.asm</code> and <code>X86.prim.asm</code> files as
per <a href="https://wiki.gentoo.org/wiki/Hardened/GNU_stack_quickstart#Patching" class="bare">https://wiki.gentoo.org/wiki/Hardened/GNU_stack_quickstart#Patching</a>.
Thanks to Daniel Moerner for reporting this issue and for providing
a pointer to the fix.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/10/15]</dt>
<dd>
<div class="paragraph">
<p>Added <code>--debug</code> command-line option to <strong>ml-antlr</strong>.
This flag causes &lt;b&gt;ml-antlr&lt;/b&gt; to generate debug actions that print
the left-hand-side non-terminal of the production.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/15]</dt>
<dd>
<div class="paragraph">
<p>Working on 64-bit support.  Changes include making code generation
dependent on the target word size and abstracting over the BIBOP
representation in the runtime system.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/15]</dt>
<dd>
<div class="paragraph">
<p>Further cleanup of the separation of FLINT from the front-end.
Eliminated all references to <code>ModulePropLists</code> (<code>module-plists.sml</code>) in
the front end and in pickling, and moved <code>module-plists</code> from
<code>Semant/modules</code> to <code>FLINT/trans</code>.  <code>ModulePropLists</code> is now only used
in <code>FLINT/trans/translate.sml</code>.</p>
</div>
<div class="paragraph">
<p>Revision: 4314</p>
</div>
<div class="paragraph">
<p>Files changed:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>compiler/ElabData/modules/modules.sml</code>  (cleaned up)</p>
</li>
<li>
<p><code>compiler/Elaborator/print/ppmod.sml</code> (cleaned up)</p>
</li>
<li>
<p><code>compiler/FLINT/trans/module-plists.sml</code> (moved from <code>Semant/modules</code>)</p>
</li>
<li>
<p><code>compiler/Semant/modules/instantiate-param.sml</code> (deleted)</p>
</li>
<li>
<p><code>compiler/Semant/pickle/pickmod.sml</code> (no longer mentions property lists)</p>
</li>
<li>
<p><code>compiler/Semant/pickle/unpickmod.sml</code> (ditto)</p>
</li>
<li>
<p><code>compiler/Semant/statenv/prim.sml</code></p>
</li>
<li>
<p><code>compiler/Semant/types/tp-var-info.sml</code>  (deleted)</p>
</li>
<li>
<p><code>compiler/core.cm</code>  (modified for move of <code>module-plists.sml</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/14]</dt>
<dd>
<div class="paragraph">
<p>Eliminated dependency of <code>PlambdaType</code> from the front end by adding a
type <code>TKind.tkind</code> which is a simplified standin for <code>PlambdaType.tkind</code>
for use during elaboration. <code>TKind.tkind</code> values are translated on
demand to <code>PlambdaType.tkind</code> in <code>trans/transtypes.sml</code>. Types still has
a <code>tycpath</code> type but it is defined using <code>TKind.tkind</code> now. The new structure
<code>SigPropList</code> replaces <code>ModulePropLists</code>
(<code>Semant/modules/module-plists.sml</code>) for use in <code>instantiate.sml</code>.
<code>Instantiate</code> is now defined directly as a structure so the functor
application in <code>Semant/modules/instantiate.sml</code> no longer exists.</p>
</div>
<div class="paragraph">
<p>Files changed:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>ElabData/basics/debindex.sig</code>  (moved here from <code>Elaborator/basics</code>)</p>
</li>
<li>
<p><code>ElabData/basics/debindex.sml</code>  (ditto)</p>
</li>
<li>
<p><code>ElabData/basics/sig-plist.sml</code> (new)</p>
</li>
<li>
<p><code>ElabData/basics/tkind.sml</code>     (new)</p>
</li>
<li>
<p><code>ElabData/types/types.sig</code></p>
</li>
<li>
<p><code>ElabData/types/types.sml</code></p>
</li>
<li>
<p><code>Elaborator/modules/instantiate.sml</code></p>
</li>
<li>
<p><code>Elaborator/print/ppmod.sml</code></p>
</li>
<li>
<p><code>FLINT/trans/transtkind.sml</code>    (new)</p>
</li>
<li>
<p><code>FLINT/trans/transtypes.sml</code></p>
</li>
<li>
<p><code>TopLevel/interact/evalloop.sml</code></p>
</li>
<li>
<p><code>ElabData/elabdata.cm</code></p>
</li>
<li>
<p><code>Elaborator/elaborate.cm</code></p>
</li>
<li>
<p><code>core.cm</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/14]</dt>
<dd>
<div class="paragraph">
<p>Added support for Successor ML record-expression-punning syntax.  For
example, one can now define a function <code>f</code> as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">fun</span> <span class="tok-nf">f</span> <span class="tok-n">x</span> <span class="tok-p">=</span> <span class="tok-p">{</span><span class="tok-n">x</span><span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which is equivalent to the definition</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">fun</span> <span class="tok-nf">f</span> <span class="tok-n">x</span> <span class="tok-p">=</span> <span class="tok-p">{</span><span class="tok-n">x</span> <span class="tok-p">=</span> <span class="tok-n">x</span><span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/14]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the parser.  Asterix (<code>*</code>) was not allowed as a record label
when using the record-pattern-punning syntax.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/14]</dt>
<dd>
<div class="paragraph">
<p>Added support for <code>do exp</code> <strong>Successor ML</strong> syntax.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=153&group_id=33&atid=215"><b>#153</b></a> (Enabling Successor ML features is delayed).
We now use a function <code>Control.setSuccML</code> to switch to/from <strong>Successor ML</strong>
mode in the REPL. The function resets the parser, so the next input will
be correctly parsed.  The <code>Control.succML</code> flag is no longer visibile
in the REPL.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/09/12]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=149&group_id=33&atid=215"><b>#149</b></a> (Datatype replication exposes hidden constructors).
Added boolean field <code>stripped</code> to DATATYPE variant of tyckind in
<code>compiler/ElabData/types/types.sml</code> with default value <code>false</code>.
<code>stripped</code> is set to true when a datatype is matched with a simple
<code>type</code> spec in signature matching, and datatypes with <code>stripped</code> set
to true are disallowed in datatype replications.</p>
</div>
<div class="paragraph">
<p>Files changed:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>compiler/ElabData/types/types.sig</code></p>
</li>
<li>
<p><code>compiler/ElabData/types/types.sml</code></p>
</li>
<li>
<p><code>compiler/ElabData/types/typesutil.sml</code></p>
</li>
<li>
<p><code>compiler/ElabData/types/core-basictypes.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/types/basictypes.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/types/eqtypes.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/modules/evalent.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/modules/sigmatch.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/modules/instantiate.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/print/ppabsyn.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/print/pptype.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/elaborate/elabcore.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/elaborate/elabmod.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/elaborate/elabtype.sml</code></p>
</li>
<li>
<p><code>compiler/Elaborator/elaborate/elabsig.sml</code></p>
</li>
<li>
<p><code>compiler/Semant/pickle/pickmod.sml</code></p>
</li>
<li>
<p><code>compiler/Semant/pickle/unpickmod.sml</code></p>
</li>
<li>
<p><code>compiler/MiscUtil/print/ppobj.sml</code></p>
</li>
<li>
<p><code>compiler/FLINT/trans/transtypes.sml</code></p>
</li>
<li>
<p><code>compiler/FLINT/trans/pequal.sml</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/31]</dt>
<dd>
<div class="paragraph">
<p>Added <code>%tokentype</code> directive to <strong>ml-antlr</strong>; this directive allows users
to specify the token datatype externally, which is necessary in order
to share a lexer with two different <strong>ml-antlr</strong> parsers.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/20]</dt>
<dd>
<div class="paragraph">
<p>Change the interface to <code>AMD64Gen</code> in <strong>MLRISC</strong>; the <code>signBit</code> and
<code>negateSignBit</code> callbacks now return an <code>MLTree.rexp</code> (instead of a
label).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_80_20160819">Version 110.80; 2016/08/19</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/16]</dt>
<dd>
<div class="paragraph">
<p>Fixed <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=151&group_id=33&atid=215"><b>#151</b></a> (Error installing from source on Mac OS X).  The fix
involves both changes to the <code>config/install.sh</code> script and the
<code>mk.x86-darwin</code> makefile.  With this fix, we include the <code>SDK</code> argument
to the <code>/usr/bin/as</code> only when the OS version is 10.10 (Yosemite) or
later.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/10]</dt>
<dd>
<div class="paragraph">
<p>Added the proposed <code>unzipMap</code>, <code>unzipMapi</code>, <code>find</code>, and <code>findi</code> functions
to the <code>ListPair</code> module.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/10]</dt>
<dd>
<div class="paragraph">
<p>Added the proposed <code>mapLeft</code>, <code>mapRight</code>, <code>appLeft</code>, and <code>appRight</code>
functions to the <code>Either</code> module.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/09]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=145&group_id=33&atid=215"><b>#145</b></a> (Internal exception occurs on bogus annotation
instead of typechecking diagnostic). Added missing <code>OVLD_UB</code> case in
function <code>failMessage</code> in <code>compiler/Elaborator/types/unify.sml</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~dbm">Dave MacQueen</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/08/04]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=166&group_id=33&atid=215"><b>#166</b></a> (Can&#8217;t install SML/NJ in directories containing
spaces).  Thanks to Eugene Sharygin for the patch.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/06/21]</dt>
<dd>
<div class="paragraph">
<p>Fixed incorrect dividend sign extension before 32-bit divide in amd64
code generator in MLRISC</p>
</div>
<div class="paragraph">
<p><a href="https://gallium.inria.fr/~rainey/">Mike Rainey</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/06/16]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=150&group_id=33&atid=215"><b>#150</b></a> (Add title to batch script).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/05/11]</dt>
<dd>
<div class="paragraph">
<p>Implemented the changes for
<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2016-001-Add-popCount-to-WORD-signature">
Basis Library Proposal 2016-001</a>.  This proposal added the <code>popCount</code>
function to the <code>WORD</code> signature.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/05/03]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=156&group_id=33&atid=215"><b>#156</b></a> (sml resumes after SIGSTOP with bogus exception
report).  The fix is a bit of a hack: I modified the <code>non_bt_hdl</code>
function in <code>evalloop.sml</code> to match an <code>IO.Io</code> exception with
the appropriate shape for this situation.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/04/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=154&group_id=33&atid=215"><b>#154</b></a> (Return code for ml-ulex when there is an error).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/04/07]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=155&group_id=33&atid=215"><b>#155</b></a> (Misleading printing of word literals in
error messages).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2016/04/02]</dt>
<dd>
<div class="paragraph">
<p>Fixed a bug in the implementation of the <code>--ml-lex-mode</code> flag for
<strong>ml-ulex</strong>.  The <code>\h</code> escape sequence is supposed to map to the
character range <code>[\128-\255]</code>, but did not.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/11/09]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=147&group_id=33&atid=215"><b>#147</b></a> (Hexadecimal escapes in strings are not supported).
We previously did not support Unicode escapes in string literals.  We now
do so, <span class="line-through">with non-ascii codepoints being mapped to the
UTF-8 encoding</span> with escape values in the range 0..255 being mapped to the
corresponding 8-bit character.  Values outside that range are flagged
as an error.</p>
</div>
<div class="paragraph">
<p><em>Revised August 4, 2016</em></p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/10/28]</dt>
<dd>
<div class="paragraph">
<p>Partial fix for the noisy exception-stack traces on the <code>Error</code> exception.
The cases that are handled by this change are applying <code>use</code> to a non-existent
file and when there are compilation errors in a program being built by
<code>CM.make</code>.  What remains to be handled is the situation where <code>CM.make</code> is
applied to a non-existent file.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version_110_79_20151004">Version 110.79; 2015/10/04</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/10/04]</dt>
<dd>
<div class="paragraph">
<p>Patched <code>base/compiler/FLINT/clos/closure.sml</code> so that <strong>Twelf</strong> will
build again.  Fixes bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=140&group_id=33&atid=215"><b>#140</b></a> (Lookup failure in <code>closure.sml</code>
when compiling <strong>Twelf</strong>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/28]</dt>
<dd>
<div class="paragraph">
<p>Added support for a <strong>Successor ML</strong> tool to CM.  This tool allows one
to specify that a source file <code>fool.sml</code> is <strong>Successor ML</strong> source code in the
following ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>foo.sml : succ-ml
foo.sml : sml (succ-ml)
foo.sml (succ-ml)</pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/28]</dt>
<dd>
<div class="paragraph">
<p>Added the directory <code>base/old-basis</code> to support backward-compatible
views of the <strong>Basis Library</strong>.  You can use these by replacing the
line</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$/basis.cm</pre>
</div>
</div>
<div class="paragraph">
<p>with</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$/basis-2004.cm</pre>
</div>
</div>
<div class="paragraph">
<p>in your CM files.</p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/28]</dt>
<dd>
<div class="paragraph">
<p>New implementation of <code>Date</code> structure in the Basis, which fixes bugs
<a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=138&group_id=33&atid=215"><b>#138</b></a> (Incorrect behavior for <code>Date.fromTimeLocal</code>) and
<a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=139&group_id=33&atid=215"><b>#139</b></a> (<code>Date.date</code> is broken).  Note that some more thought should
be given to the correct semantics of <code>Date.date</code> when dealing with
offsets.  For example, should an offset of +23 hours produce the same
date as an offset of -1 hours?  Currently our implementation produces
different results (by a day) for these two situations.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/25]</dt>
<dd>
<div class="paragraph">
<p>Implemented the changes for
<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2015-003-Additional-operations-on-sequences">
Basis Library Proposal 2015-003</a>.  This proposal added operations to
the following signatures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">signature</span> <span class="tok-nn">ARRAY</span>
<span class="tok-kr">signature</span> <span class="tok-nn">LIST</span>
<span class="tok-kr">signature</span> <span class="tok-nn">LIST_PAIR</span>
<span class="tok-kr">signature</span> <span class="tok-nn">MONO_ARRAY</span>
<span class="tok-kr">signature</span> <span class="tok-nn">MONO_VECTOR</span>
<span class="tok-kr">signature</span> <span class="tok-nn">OPTION</span>
<span class="tok-kr">signature</span> <span class="tok-nn">STRING</span>
<span class="tok-kr">signature</span> <span class="tok-nn">TEXT</span>
<span class="tok-kr">signature</span> <span class="tok-nn">VECTOR</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and the following structures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-kr">structure</span> <span class="tok-nn">Array</span> <span class="tok-p">:</span> <span class="tok-n">ARRAY</span>
<span class="tok-kr">structure</span> <span class="tok-nn">CharArray</span> <span class="tok-p">:</span> <span class="tok-n">MONO_ARRAY</span>
<span class="tok-kr">structure</span> <span class="tok-nn">CharVector</span> <span class="tok-p">:</span> <span class="tok-n">MONO_VECTOR</span>
<span class="tok-kr">structure</span> <span class="tok-nn">List</span> <span class="tok-p">:</span> <span class="tok-n">LIST</span>
<span class="tok-kr">structure</span> <span class="tok-nn">ListPair</span> <span class="tok-p">:</span> <span class="tok-n">LIST_PAIR</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Option</span> <span class="tok-p">:</span> <span class="tok-n">OPTION</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Real64Array</span> <span class="tok-p">:</span> <span class="tok-n">MONO_ARRAY</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Real64Vector</span> <span class="tok-p">:</span> <span class="tok-n">MONO_VECTOR</span>
<span class="tok-kr">structure</span> <span class="tok-nn">String</span> <span class="tok-p">:</span> <span class="tok-n">STRING</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Text</span> <span class="tok-p">:</span> <span class="tok-n">TEXT</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Vector</span> <span class="tok-p">:</span> <span class="tok-n">VECTOR</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Word8Array</span> <span class="tok-p">:</span> <span class="tok-n">MONO_ARRAY</span>
<span class="tok-kr">structure</span> <span class="tok-nn">Word8Vector</span> <span class="tok-p">:</span> <span class="tok-n">MONO_VECTOR</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While it is very unlikely that these changes will break existing code, there are
a a couple scenarios in which the code might break.  Namely, when use of <code>open</code>
introduces conflicts and when user code implements one of the affected Basis Library
signatures.  Both of these examples occurred in the <strong>SML/NJ</strong> source code; the former
in the <strong>ml-yacc</strong> sources and the latter in the <strong>MLRISC</strong> sources.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/25]</dt>
<dd>
<div class="paragraph">
<p>Added the optional implementations of <code>PackReal64Big</code> and <code>PackReal64Little</code>.
This addition addresses feature request <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=82&group_id=33&atid=218"><b>#82</b></a>
(Implementations of <code>PACK_REAL</code> missing).  The implementation
uses the approach suggested by
<a href="https://github.com/msullivan/sml-util/blob/master/libs/pack-real.sml">Michael Sullivan</a>.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/24]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=45&group_id=33&atid=215"><b>#45</b></a> (Compiler bug in specialize phase).  This bug
was in <code>compiler/FLINT/opt/fcontract.sml</code> and was the result of a bad
interaction between eta contraction and inlining.  As part of the fix,
I cleaned up the code in this part of FLINT a bit.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/21]</dt>
<dd>
<p>Improvements to the error messages produced by the <strong>ml-ulex</strong> lexer generator.</p>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/21]</dt>
<dd>
<p>Added <code>Ref</code> structure and <code>REF</code> signature to Basis implementation
(<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2015-007-Addition-of-Ref-module">
Basis Library Proposal 2015-007</a>).</p>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/09/21]</dt>
<dd>
<p>Added <code>Fn</code> structure and <code>FN</code> signature to Basis implementation
(<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2015-005-Addition-of-Fn-module">
Basis Library Proposal 2015-005</a>).</p>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/08/22]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=136&group_id=33&atid=215"><b>#136</b></a> (Incorrect raising of exceptions in <code>Real.fmt</code>
and <code>Time.fmt</code>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/08/14]</dt>
<dd>
<div class="paragraph">
<p>Added <code>Either</code> structure and <code>EITHER</code> signature to Basis implementation
(<a href="https://github.com/SMLFamily/BasisLibrary/wiki/2015-002-Addition-of-Either-module">
Basis Library Proposal 2015-002</a>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/07/23]</dt>
<dd>
<div class="paragraph">
<p>Fixed bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=135&group_id=33&atid=215"><b>#135</b></a> (Fails to build on Linux PowerPC).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/07/08]</dt>
<dd>
<div class="paragraph">
<p>Added Linux 4.* kernels to the list of operating systems recognized
by the <code>.arch-n-opsys</code> script (fixes bug <a href="https://smlnj-gforge.cs.uchicago.edu/tracker/index.php?func=detail&aid=134&group_id=33&atid=215"><b>#134</b></a>).</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/06/11]</dt>
<dd>
<div class="paragraph">
<p>Added Mac OS X 10.11 (El Capitan) to the list of operating systems
recognized by the <code>.arch-n-opsys</code> script.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[2015/05/27]</dt>
<dd>
<div class="paragraph">
<p>Added support for <strong>Successor ML</strong> lexical extensions.  These can be enabled
using the command-line option <code>-Cparser.succ-ml=true</code> or by the assignment</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-nn">Control</span><span class="tok-p">.</span><span class="tok-n">succML</span> <span class="tok-n">:=</span> <span class="tok-n">true</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>at the REPL.  The extensions are as follows:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Underscore (&#8220;_&#8221;) as a separator in numeric literals; <em>e.g.</em>, <code>123_456</code>,
<code>0wxff_ff_ff_f3</code>, <code>123_456.1</code>, &#8230;&#8203;</p>
</li>
<li>
<p>end-of-line comments, which are denoted using <code>(*)</code>.  End-of-line comments
properly nest into conventional block comments.  For example, the following
block comment is well formed:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sml"><span></span><span class="tok-cm">(*</span>
<span class="tok-cm">fun f x = x (*) my identity function *)</span>
<span class="tok-cm">*)</span></code></pre>
</div>
</div>
</li>
<li>
<p>binary literals for both integers and words; <em>e.g.</em>, <code>0b0101_1110</code>, or
<code>0wb1101</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This change is the beginning of a program to add <strong>Successor ML</strong> feature to <strong>SML/NJ</strong>;
See <a href="https://github.com/SMLFamily/Proposed-Definition-of-Successor-ML" class="bare">https://github.com/SMLFamily/Proposed-Definition-of-Successor-ML</a> for more
details.</p>
</div>
<div class="paragraph">
<p><a href="https://cs.uchicago.edu/~jhr">John Reppy</a></p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2022.1<br>
Last updated 2022-08-25 12:56:19 -0500
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>