%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: btcomp.dvi
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Roman Times-Italic Courier
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t letter -o btcomp.ps btcomp
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2001.07.19:1421
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (btcomp.dvi)
@start
%DVIPSBitmapFont: Fa cmr10 10 3
/Fa 3 50 df<146014E0EB01C0EB0380EB0700130E131E5B5BA25B485AA2485AA212075B
120F90C7FCA25A121EA2123EA35AA65AB2127CA67EA3121EA2121F7EA27F12077F1203A2
6C7EA26C7E1378A27F7F130E7FEB0380EB01C0EB00E01460135278BD20>40
D<12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA21378A2137C133C133E131EA2131F7F
A21480A3EB07C0A6EB03E0B2EB07C0A6EB0F80A31400A25B131EA2133E133C137C1378A2
5BA2485A485AA2485A48C7FC120E5A5A5A5A5A13527CBD20>I<EB01C013031307131F13
FFB5FCA2131F1200B3B3A8497E007FB512F0A31C3879B72A>49 D
E
%EndDVIPSBitmapFont
/Fb 135[60 3[60 60 60 1[60 60 60 60 60 60 1[60 2[60 60
1[60 1[60 97[{TeXBase1Encoding ReEncodeFont}15 99.6264
/Courier rf /Fc 140[26 3[33 33 48 1[29 1[18 3[29 33 2[33
97[{TeXBase1Encoding ReEncodeFont}9 66.4176 /Times-Italic
rf /Fd 135[45 45 1[45 45 45 45 1[45 45 45 45 45 1[45
45 45 2[45 1[45 45 45 8[45 45 1[45 1[45 2[45 45 1[45
4[45 4[45 45 45 8[45 1[45 2[45 45 2[45 45 45 8[45 36[{
TeXBase1Encoding ReEncodeFont}37 74.7198 /Courier rf
/Fe 134[37 37 54 37 37 21 29 25 1[37 37 37 1[21 2[21
37 1[25 33 1[33 37 33 9[71 1[54 1[42 2[42 54 1[66 3[25
54 4[50 1[54 8[37 1[37 2[37 37 4[25 3[25 25 40[{
TeXBase1Encoding ReEncodeFont}36 74.7198 /Times-Roman
rf
%DVIPSBitmapFont: Ff cmsy10 10 3
/Ff 3 16 df<007FB81280B912C0A26C17803204799641>0 D<121C127FEAFF80A5EA7F
00121C0909799917>I<EB1FF0EBFFFE487F000714C04814E04814F04814F8A24814FCA3
B612FEA96C14FCA36C14F8A26C14F06C14E06C14C0000114006C5BEB1FF01F1F7BA42A>
15 D E
%EndDVIPSBitmapFont
/Fg 134[40 40 2[40 40 40 40 2[40 40 40 40 40 1[40 3[40
1[40 40 40 40[40 1[40 6[40 40 40 45[{TeXBase1Encoding ReEncodeFont}21
66.4176 /Courier rf /Fh 134[33 33 48 33 33 18 26 22 1[33
33 33 52 18 33 1[18 33 33 22 29 33 29 33 29 12[41 4[48
2[41 2[22 2[37 41 3[48 6[18 1[33 1[33 7[17 22 17 4[22
36[37 2[{TeXBase1Encoding ReEncodeFont}38 66.4176 /Times-Roman
rf /Fi 203[25 25 25 25 49[{TeXBase1Encoding ReEncodeFont}4
49.8132 /Times-Roman rf
%DVIPSBitmapFont: Fj cmmi10 10 10
/Fj 10 119 df<121C127FEAFF80A5EA7F00121C0909798817>58
D<147E903803FF8090390FC1C38090391F00EFC0017E137F49133F485A4848EB1F801207
5B000F143F48481400A2485A5D007F147E90C7FCA215FE485C5AA214015D48150CA21403
EDF01C16181407007C1538007E010F1330003E131F027B13706C01E113E03A0F83C0F9C0
3A03FF007F80D800FCEB1F0026267DA42C>97 D<133FEA1FFFA3C67E137EA313FE5BA312
015BA312035BA31207EBE0FCEBE3FF9038E707C0390FFE03E09038F801F001F013F8EBE0
00485A15FC5BA2123F90C7FCA214015A127EA2140312FE4814F8A2140715F05AEC0FE0A2
15C0EC1F80143F00781400007C137E5C383C01F86C485A380F07C06CB4C7FCEA01FC1E3B
7CB924>I<163FED1FFFA3ED007F167EA216FEA216FCA21501A216F8A21503A216F0A215
07A2027E13E0903803FF8790380FC1CF90381F00EF017EEB7FC049133F485A4848131F00
0715805B000F143F485A1600485A5D127F90C7127EA215FE5A485CA21401A248ECF80CA2
1403161CEDF0181407007C1538007E010F1330003E131F027B13706C01E113E03A0F83C0
F9C03A03FF007F80D800FCEB1F00283B7DB92B>100 D<16F8ED03FEED0F8792381F0F80
ED3E3F167F157CA215FC1700161C4A48C7FCA414035DA414075DA20107B512F0A3902600
0FE0C7FC5DA4141F5DA4143F92C8FCA45C147EA514FE5CA413015CA4495AA45C1307A25C
121E123F387F8F80A200FF90C9FC131E12FEEA7C3CEA7878EA1FF0EA07C0294C7CBA29>
102 D<EB03F0EA01FFA3EA00075CA3130F5CA3131F5CA3133F91C8FCA35B017EEB07C0ED
1FF0ED783801FEEBE0F89039FC01C1FCEC0383EC07070001130ED9F81C13F891383803F0
91387001E0000349C7FCEBF1C0EBF38001F7C8FCEA07FEA2EBFFE0EBE7F8380FE0FEEBC0
7F6E7E141F001F80D9800F1330A21670003F011F136001001380A216E04815C0007E1481
020F1380158300FE903807870048EB03FE0038EB00F8263B7CB92B>107
D<D803E0137F3A07F801FFE03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00
705B00605BA200E090C712FC485A137EA20000140101FE5C5BA2150300015D5B15075E12
0349010F133016C0031F13700007ED80605B17E0EE00C0000F15014915801603EE070000
1FEC0F0E49EB07FC0007C7EA01F02C267EA432>110 D<3903E001F83907F807FE390E3C
1E07391C3E381F3A183F703F800038EBE07F0030EBC0FF00705B00601500EC007E153CD8
E07F90C7FCEAC07EA2120013FE5BA312015BA312035BA312075BA3120F5BA3121F5B0007
C9FC21267EA425>114 D<13F8D803FE1438D8070F147C000E6D13FC121C121800381401
1230D8701F5C12601503EAE03F00C001005B5BD8007E1307A201FE5C5B150F1201495CA2
151F120349EC80C0A2153F1681EE0180A2ED7F0303FF130012014A5B3A00F8079F0E9039
7C0E0F1C90393FFC07F8903907F001F02A267EA430>117 D<01F8EB03C0D803FEEB07E0
D8070F130F000E018013F0121C12180038140700301403D8701F130112601500D8E03F14
E000C090C7FC5BEA007E16C013FE5B1501000115805B150316001203495B1506150E150C
151C151815385D00015C6D485A6C6C485AD97E0FC7FCEB1FFEEB07F024267EA428>I
E
%EndDVIPSBitmapFont
/Fk 203[29 29 29 29 49[{TeXBase1Encoding ReEncodeFont}4
58.1154 /Times-Roman rf /Fl 134[37 37 1[37 42 23 32 32
42 42 42 42 60 23 37 1[23 42 42 23 37 42 37 42 42 12[46
42 51 1[51 1[55 69 46 2[28 4[60 9[28 6[42 4[21 4[28 28
37[42 2[{TeXBase1Encoding ReEncodeFont}38 83.022 /Times-Italic
rf /Fm 134[50 1[72 50 55 33 39 44 55 55 50 55 83 28 55
1[28 55 50 33 44 55 44 55 50 12[66 55 72 1[61 78 1[94
66 2[39 4[72 72 66 72 10[50 50 50 50 50 50 2[25 33 42[55
2[{TeXBase1Encoding ReEncodeFont}44 99.6264 /Times-Bold
rf /Fn 130[50 1[50 1[50 50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 7[50 2[50 50
50 50 50 1[50 50 50 50 50 50 50 50 50 50 1[50 50 50 50
50 2[50 50 1[50 50 1[50 1[50 2[50 50 50 1[50 50 50 50
1[50 50 50 50 2[50 1[50 34[{TeXBase1Encoding ReEncodeFont}67
83.022 /Courier rf /Fo 104[83 42 1[37 37 10[28 13[37
42 42 60 42 42 23 32 28 42 42 42 42 65 23 42 23 23 42
42 28 37 42 37 42 37 3[28 1[28 1[60 60 78 60 60 51 46
55 60 46 60 60 74 51 1[32 28 60 1[46 51 60 55 55 60 5[23
23 42 42 42 42 42 42 42 42 42 42 23 21 28 21 2[28 28
28 35[46 46 2[{TeXBase1Encoding ReEncodeFont}77 83.022
/Times-Roman rf /Fp 104[83 29[42 1[60 42 46 28 32 37
46 46 42 46 69 23 46 28 23 46 42 28 37 46 37 46 42 11[60
55 46 60 1[51 2[78 55 2[32 65 1[51 1[60 60 55 7[28 42
42 42 42 42 42 42 42 42 1[23 21 28 45[{TeXBase1Encoding ReEncodeFont}51
83.022 /Times-Bold rf /Fq 104[120 31[86 1[66 40 47 53
1[66 60 66 100 33 2[33 66 60 40 53 66 53 66 60 13[66
86 4[113 3[47 2[73 1[86 86 80 11[60 60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}34 119.552 /Times-Bold
rf /Fr 134[50 3[50 28 39 3[50 50 78 28 2[28 50 50 1[44
1[44 50 44 12[61 6[89 61 1[39 7[66 8[50 6[50 50 50 3[25
44[{TeXBase1Encoding ReEncodeFont}25 99.6264 /Times-Roman
rf /Fs 137[33 1[21 29 29 2[37 37 1[21 2[21 37 1[21 33
37 33 1[37 13[37 4[50 62 42 1[33 20[37 1[37 1[37 37 21
19 4[25 25 40[{TeXBase1Encoding ReEncodeFont}27 74.7198
/Times-Italic rf /Ft 138[72 40 56 48 1[72 72 72 112 40
2[40 72 2[64 3[64 11[104 88 80 4[104 128 88 1[56 6[96
96 18[40 47[{TeXBase1Encoding ReEncodeFont}23 143.462
/Times-Roman rf /Fu 178[135 9[104 96 66[{TeXBase1Encoding ReEncodeFont}
3 143.462 /Times-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
letter
%%EndPaperSize

%%EndSetup
%%Page: 1 1
1 0 bop 1843 1813 a Fu(CMB)1048 1996 y Ft(The)35 b(SML/NJ)f(Bootstrap)f
(Compiler)1433 2179 y Fs(\(for)19 b(SML/NJ)g(ver)o(sion)h(110.35)g(and)
g(later\))1638 2361 y Ft(User)34 b(Manual)1690 2776 y
Fr(Matthias)24 b(Blume)1377 2893 y(Lucent)h(T)-7 b(echnologies,)23
b(Bell)i(Labs)1740 3178 y(July)f(19,)h(2001)p eop
%%Page: 1 2
1 1 bop 0 83 a Fq(Contents)0 318 y Fp(1)83 b(Intr)o(oduction)3401
b(2)0 551 y(2)83 b(Basic)20 b(usage)3445 b(2)125 700
y Fo(2.1)85 b(Requirements)52 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)138 b(2)125 850 y(2.2)85 b(In)m(v)n(oking)18
b(the)i(bootstrap)f(compiler)73 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(3)125 999 y(2.3)85 b(Booting)20 b(a)g(ne)n(w)g(interacti)n(v)o(e)f
(system)36 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)138 b(4)125 1149 y(2.4)85
b(T)-6 b(esting)20 b(the)h(ne)n(wly)e(booted)g(system)52
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)138 b(4)125 1298 y(2.5)85 b(Installing)20
b(a)h(ne)n(wly)e(booted)g(system)46 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(4)0 1531 y Fp(3)83 b(Differ)o(ences)19 b(between)h(CMB)i(and)e(CM)
2615 b(5)125 1680 y Fo(3.1)85 b(Code)20 b(sharing)73
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(5)125 1829 y(3.2)85 b(Init)21 b(library)31 b(.)41 b(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138 b(5)315
1979 y(3.2.1)98 b(Linkage)19 b(to)h(runtime)f(system)46
b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)138 b(6)125 2128 y(3.3)85 b(BOO)m(TLIST)20
b(\002le)52 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(6)125 2278 y(3.4)85 b(PIDMAP)21 b(\002le)74 b(.)41
b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(6)125 2427 y(3.5)85 b(Cross-compiling)21 b(.)42 b(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)138 b(6)0 2660 y Fp(4)83 b(Structur)o(e)19
b(CMB)3300 b(7)0 2892 y(5)83 b(File)20 b(naming\227the)g(r)o(ole)g(of)g
(path)g(anchors)2505 b(8)125 3042 y Fo(5.1)85 b(Anchoring)18
b(requirement)47 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138
b(8)125 3191 y(5.2)85 b(Dif)n(ferent)19 b(anchor)g(mappings)g(at)h(dif)
n(ferent)f(times)32 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)138 b(8)0 3423 y Fp(6)83 b(Scripts)3604
b(9)125 3573 y Fo(6.1)85 b(The)20 b Fn(makeml)g Fo(script)47
b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)138 b(9)125
3722 y(6.2)85 b(The)20 b Fn(testml)g Fo(script)47 b(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)97 b(10)125 3872
y(6.3)85 b(The)20 b Fn(installml)f Fo(script)k(.)41 b(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)97 b(10)125 4021 y(6.4)85 b(The)20 b Fn(fixpt)g
Fo(script)35 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)97
b(10)125 4171 y(6.5)85 b(The)20 b Fn(allcross)g Fo(script)72
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)97 b(10)1989 5709
y(1)p eop
%%Page: 2 3
2 2 bop 0 83 a Fq(1)119 b(Intr)n(oduction)0 318 y Fo(W)m(ith)20
b(the)g(e)o(xception)e(of)h(the)h(runtime)f(system)h(which)f(is)i
(written)e(in)h(C,)h(compiler)d(and)i(interacti)n(v)o(e)e(system)i(for)
f(Standard)g(ML)h(of)f(Ne)n(w)0 418 y(Jerse)o(y)28 b(\(SML/NJ\))g
([AM91)o(])g(are)g(themselv)o(es)g(implemented)e(in)j(Standard)e(ML)h
([MTHM97)n(].)50 b(When)28 b(the)g(ne)n(w)g(Compilation)f(and)0
518 y(Library)21 b(Manager)h(\(CM\))g([Blu00)o(])h(w)o(as)h
(introduced,)c(all)k(ML)f(code)f(of)g(SML/NJ)i(w)o(as)f(reor)o(ganized)
c(in)k(such)g(a)g(w)o(ay)g(that)g(the)f(system)0 617
y(itself)f(w)o(orks)f(lik)o(e)g(an)o(y)f(other)h(stand-alone)e(ML)j
(program)d(compiled)g(by)i(SML/NJ.)0 767 y(Ho)n(we)n(v)o(er)m(,)c
(there)i(are)f(a)i(fe)n(w)f(important)e(dif)n(ferences)g(between)h
(compiling)f(an)i(ordinary)e(ML)i(program)e(using)h(CM)h(and)g
(\(re-\)compiling)0 866 y(the)j(interacti)n(v)o(e)f(system)i(itself.)29
b(These)21 b(dif)n(ferences)e(are)j(handled)d(by)i(a)h(special-purpose)
d(v)o(ersion)h(of)h(the)g(compilation)f(manager:)26 b(the)0
966 y(bootstrap)19 b(compiler)-5 b(.)24 b(Its)d(interf)o(ace)e(is)i
Fn(structure)48 b(CMB)p Fo(,)20 b(e)o(xported)e(from)h(library)g
Fn($smlnj/cmb.cm)p Fo(.)0 1115 y(This)25 b(document)e(describes)h(ho)n
(w)g(to)h(use)g(the)g(bootstrap)e(compiler)h(and)g(also)h(e)o(xplains)f
(ho)n(w)g(bootstrapping)e(the)j(SML/NJ)g(compiler)0 1215
y(dif)n(fers)19 b(from)h(compiling)e(ordinary)g(ML)i(code.)0
1545 y Fq(2)119 b(Basic)30 b(usage)0 1797 y Fm(2.1)99
b(Requir)n(ements)0 2002 y Fo(T)-7 b(o)30 b(be)g(able)g(to)h(use)f(the)
g(bootstrap)f(compiler)m(,)i(one)e(must)h(\002rst)h(install)g(SML/NJ)g
(\(i.e.,)h(the)e(interacti)n(v)o(e)f(system)h(that)g(contains)g(the)0
2102 y(compiler\))19 b(as)h(well)h(as)g(both)e(ML-Y)-8
b(acc)20 b(and)f(ML-Le)o(x.)0 2252 y(It)27 b(is)g(further)f(necessary)f
(to)i(ha)n(v)o(e)f(all)h(ML)g(source)f(code)g(for)g(the)h(system)f(a)n
(v)n(ailable.)44 b(If)27 b(the)f(basic)h(installation)f(did)h(not)f
(install)h(this)0 2351 y(source)21 b(code,)g(then)h(one)f(must)h(no)n
(w)f(fetch)g(all)i(source)e(archi)n(v)o(es)g(and)g(unpack)f(them.)29
b(\(There)21 b(is)i(an)f(option)e(for)h(the)h(SML/NJ)h(installer)0
2451 y(that)d(lets)h(it)g(install)g(all)g(source)e(trees)i
(automatically)-5 b(.)23 b(Ho)n(we)n(v)o(er)m(,)18 b(by)i(def)o(ault)f
(this)i(feature)e(is)i(turned)e(of)n(f.\))0 2600 y(The)j(follo)n(wing)f
(list)i(sho)n(ws)g(all)g(required)d(source)i(packages.)30
b(\(P)o(ath)22 b(names)g(are)g(sho)n(wn)g(relati)n(v)o(e)g(to)g(the)g
(SML/NJ)h(installation)f(direc-)0 2700 y(tory)-5 b(.\))0
2932 y Fp(sr)o(c/system)41 b Fo(This)20 b(archi)n(v)o(e)e(contains)i
(the)f(sources)h(for)f(the)h(SML)g(Standard)f(Basis)i(library)e(as)h
(well)h(as)f(lots)h(of)e(\223glue\224)g(code.)25 b(The)19
b(glue)208 3032 y(is)28 b(used)f(for)g(assembling)f(a)i(complete)e
(system)i(from)e(all)i(its)h(other)d(parts.)47 b(Directory)26
b Fn(src/system)g Fo(must)h(be)g(the)h(current)208 3132
y(w)o(orking)18 b(directory)h(at)h(the)h(time)f(the)g(bootstrap)f
(compiler)g(is)i(started.)0 3298 y Fp(sr)o(c/MLRISC)42
b Fo(This)22 b(is)g(the)f(implementation)f(of)h(the)g(MLRISC)h(back)o
(end)e(\(the)h(lo)n(w-le)n(v)o(el)f(optimizer)g(and)h(code)g
(generator\))e(used)i(by)208 3397 y(SML/NJ.)0 3563 y
Fp(sr)o(c/cm)41 b Fo(This)20 b(source)g(tree)g(contains)g(most)g(of)g
(CM')-5 b(s)21 b(\(and)e(CMB')-5 b(s\))22 b(implementation.)0
3729 y Fp(sr)o(c/compiler)41 b Fo(This)23 b(is)i(the)f(implementation)d
(of)i(the)h(frontend)d(\(parser)m(,)i(type)g(check)o(er)m(,)g(etc.\))35
b(of)23 b(the)h(compiler)e(as)j(well)f(as)g(its)h(high-)208
3829 y(le)n(v)o(el)19 b(optimizer)g(\(FLINT\).)0 3995
y Fp(sr)o(c/ml-yacc)40 b Fo(This)20 b(source)g(tree)g(contains)g(the)h
(implementation)d(of)i(ML-Y)-8 b(acc)19 b(and)h(its)i(library)d(\()p
Fn($/ml-yacc-lib.cm)p Fo(\).)k(T)-6 b(echni-)208 4095
y(cally)h(,)16 b(the)h(sources)g(of)f(ML-Y)-8 b(acc)16
b(itself)i(are)f(not)f(needed)g(\(pro)o(vided)e(a)j(w)o(orking)f(e)o(x)
o(ecutable)f(for)h(ML-Y)-8 b(acc)16 b(has)h(been)f(installed\),)208
4194 y(b)n(ut)k(the)g(library)f(sources)h(are.)0 4360
y Fp(sr)o(c/smlnj-lib)41 b Fo(This)31 b(source)e(tree)h(hosts)h(se)n(v)
o(eral)e(sub-trees,)j(each)e(of)g(which)g(implements)f(one)g(of)h(the)h
(libraries)e(in)i(the)f(SML/NJ)208 4460 y(library)19
b(collection.)24 b(F)o(or)19 b(bootstrap)g(compilation,)f(the)j(follo)n
(wing)d(sub-trees)i(are)g(required:)208 4626 y Fp(sr)o
(c/smlnj-lib/Util)41 b Fo(This)20 b(directory)f(holds)g(the)h(sources)g
(for)g Fn($/smlnj-lib.cm)p Fo(.)208 4759 y Fp(sr)o(c/smlnj-lib/PP)41
b Fo(This)20 b(directory)e(holds)i(the)g(sourcse)g(for)f
Fn($/pp-lib.cm)p Fo(,)g(i.e.,)h(the)g(pretty-printing)d(library)-5
b(.)208 4892 y Fp(sr)o(c/smlnj-lib/HTML)42 b Fo(This)21
b(directory)f(holds)h(the)h(sources)f(for)g Fn($/html-lib.cm)p
Fo(,)f(a)i(library)e(for)h(handling)f(HTML)h(\002les.)390
4991 y(The)d(need)g(for)g(this)i(library)d(arises)i(from)f(the)g(f)o
(act)h(that)g Fn($/pp-lib.cm)e Fo(statically)i(depends)e(on)h(it.)26
b(\(The)18 b(compiler)f(does)390 5091 y(not)j(actually)g(use)g(an)o(y)f
(services)i(from)e(this)i(library)-5 b(.\))1989 5709
y(2)p eop
%%Page: 3 4
3 3 bop 0 83 a Fm(2.2)99 b(In)l(v)o(oking)25 b(the)h(bootstrap)f
(compiler)0 285 y Fo(T)-7 b(o)20 b(in)m(v)n(ok)o(e)f(the)h(bootstrap)f
(compiler)m(,)g(\002rst)i(one)e(has)i(to)f(change)f(the)h(current)f(w)o
(orking)g(directory)f(to)i Fn(src/system)p Fo(:)0 507
y Fn($)50 b(cd)f(src/system)0 729 y Fo(The)20 b(ne)o(xt)f(step)i(is)g
(to)f(start)h(the)f(interacti)n(v)o(e)f(system)h(and)g(load)g(the)g
(bootstrap)f(compiler)-5 b(.)24 b(This)c(can)g(be)g(done)g(in)g(one)f
(of)h(tw)o(o)h(w)o(ays:)104 951 y(1.)41 b(Start)27 b(the)h(interacti)n
(v)o(e)d(system)j(and)f(then)f(issue)i(a)g Fn(CM.autoload)e
Fo(command)f(that)j(causes)f(the)g(bootstrap)f(compiler)g(to)i(be)208
1051 y(loaded.)23 b(The)d(resulting)g(session)g(could)f(look)h(lik)o(e)
g(this:)208 1242 y Fn($)49 b(sml)208 1342 y(Standard)f(ML)h(of)h(New)f
(Jersey)g(...)208 1442 y(-)g(CM.autoload)f("$smlnj/cmb.cm";)208
1541 y(...)208 1641 y(val)h(it)g(=)h(true)f(:)h(bool)208
1741 y(-)104 1932 y Fo(2.)41 b(Start)20 b(the)g(interacti)n(v)o(e)f
(system)i(and)e(specify)h Fn($smlnj/cmb.cm)e Fo(on)i(the)g(command)e
(line:)208 2124 y Fn($)49 b(sml)g('$smlnj/cmb.cm')208
2224 y(Standard)f(ML)h(of)h(New)f(Jersey)g(...)208 2323
y(-)0 2545 y Fl(Note)31 b(for)f(fr)m(equent)f(compiler)h(hac)n(k)o(er)o
(s:)45 b Fo(The)30 b Fn(makeml)g Fo(script)g(\(see)g(belo)n(w\))f(b)n
(uilds)h(the)h(the)f(interacti)n(v)o(e)e(system)j(in)f(such)g(a)h(w)o
(ay)0 2645 y(that)26 b Fn($smlnj/cmb.cm)d Fo(is)k(already)d(pre-re)o
(gistered)f(for)i(autoloading.)38 b(Therefore,)24 b(when)h(using)g(an)h
(interacti)n(v)o(e)e(system)h(b)n(uilt)h(by)0 2744 y
Fn(makeml)20 b Fo(\(as)g(opposed)f(to)h(the)g(original)f
(con\002g/install.sh\))g(there)h(is)h(no)e(need)h(for)g(loading)e(the)j
(bootstrap)d(compiler)h(e)o(xplicitly)-5 b(.)0 2891 y(At)21
b(this)f(point)g(one)g(can)g(in)m(v)n(ok)o(e)f(the)h(bootstrap)e
(compiler)h(by)h(simply)g(issuing)g(the)g(command)e Fn(CMB.make\(\))p
Fo(:)0 3113 y Fn(-)50 b(CMB.make)e(\(\);)0 3335 y Fo(If)27
b Fn(CMB.make\(\))g Fo(does)g(not)g(run)g(to)h(successful)f
(completion,)h(you)e(do)h(not)h(ha)n(v)o(e)f(to)g(start)i(from)d(the)i
(be)o(ginning.)44 b(Instead,)29 b(\002x)f(the)0 3434
y(problem)18 b(at)i(hand)f(and)g(re-issue)g Fn(CMB.make\(\))f
Fo(without)h(terminating)f(the)i(interacti)n(v)o(e)e(session)i(in)g
(between.)k(This)c(tends)f(to)h(be)f(a)h(lot)0 3534 y(f)o(aster)g(than)
g(starting)g(o)o(v)o(er)-5 b(.)0 3680 y(This)20 b(process)g(can)g(be)g
(repeated)f(arbitrarily)g(man)o(y)g(times)i(until)f Fn(CMB.make\(\))e
Fo(is)k(successful.)0 3827 y(A)f(successful)f(run)f(looks)h(lik)o(e)g
(this:)0 4049 y Fn(-)50 b(CMB.make)e(\(\);)0 4148 y(...)0
4248 y(New)h(boot)g(directory)f(has)i(been)f(built.)0
4348 y(val)g(it)h(=)f(true)g(:)h(bool)0 4447 y(-)0 4669
y Fo(The)29 b(return)f(v)n(alue)h(of)g Fn(true)g Fo(indicates)g
(success.)54 b(This)29 b(means)g(that)h(\(as)f(indicated)g(by)g(the)g
(message)g(abo)o(v)o(e)f(the)i(return)e(v)n(alue\))g(a)0
4769 y(directory)17 b(with)i(stable)g(libraries)g(and)f(some)h(other)f
(special)h(\002les)g(that)g(are)g(needed)f(for)g(\223booting\224)f(a)i
(ne)n(w)g(interacti)n(v)o(e)e(system)i(has)g(been)0 4868
y(created.)0 5015 y(The)g(name)f(of)h(the)g(boot)g(directory)e(depends)
h(on)h(circumstances.)k(A)d(part)e(of)h(it)h(can)f(be)g(chosen)f
(freely)-5 b(,)18 b(other)h(parts)g(depend)e(on)i(current)0
5114 y(architecture)e(and)h(operating)f(system.)25 b(F)o(or)19
b(e)o(xample,)e(on)h(a)i(Sparc)e(system)h(running)e(some)h(v)o(ersion)g
(of)g(Unix,)h(the)g(def)o(ault)f(name)g(of)h(the)0 5214
y(directory)f(is)k Fn(sml.boot.sparc-unix)p Fo(.)0 5360
y(There)g(is)i(also)f(a)g(similarly-named)d(em)j(bin\002le)g(directory)
e(which)h(is)i(used)e(by)g Fn(CMB.make\(\))g Fo(itself)h(b)n(ut)g
(which)f(is)i(not)e(required)f(for)0 5460 y(the)f(purpose)f(of)h
(subsequent)e(\223boot\224)i(steps.)1989 5709 y(3)p eop
%%Page: 4 5
4 4 bop 0 83 a Fm(2.3)99 b(Booting)25 b(a)g(new)g(interacti)o(v)o(e)h
(system)0 276 y Fo(Once)19 b Fn(CMB.make\(\))g Fo(has)h(completed)e
(its)i(w)o(ork)f(successfully)g(\(indicated)f(by)i(its)g(return)f(v)n
(alue)g(of)g Fn(true)p Fo(\),)g(the)h(ne)o(xt)f(step)h(is)g(to)g(b)n
(uild)0 376 y(a)h(ne)n(w)f(heap)f(image.)25 b(T)-7 b(o)20
b(do)g(so,)g(issue)h(the)f(command)e Fn(makeml)i Fo(at)g(the)h(shell)f
(prompt:)0 565 y Fn($)50 b(./makeml)0 665 y(...)0 764
y(Standard)e(ML)i(of)f(New)g(Jersey)g(...)0 864 y(./makeml:)f(Heap)h
(image)g(generated.)0 1053 y Fo(The)22 b Fn(makeml)g
Fo(command)e(generates)i(a)h(ne)n(w)f(heap)g(image)g(and)g(also)h
(prepares)e(stable)h(libraries)h(to)f(be)h(used)f(by)g(this)h(image.)31
b(Neither)0 1153 y(the)18 b(heap)g(image)f(nor)h(the)g(libraries)g
(will)h(at)g(this)f(time)h(be)f(installed)g(for)f(permanent)g(use)h
(though.)23 b(This)18 b(means)g(that)g(in)m(v)n(oking)e
Fn(sml)i Fo(still)0 1252 y(starts)j(the)f(old)g(system.)0
1390 y(Again,)26 b(the)g(name)f(of)g(the)h(generated)e(heap)h(image)g
(is)i(v)n(ariable)e(and)g(depends)f(on)i(programmer)c(choice,)k
(current)f(architecture,)g(and)0 1489 y(current)19 b(operating)f
(system.)25 b(F)o(or)20 b(e)o(xample,)f(on)g(an)i(Intel)f(x86)f(Linux)g
(machine,)g(the)h(def)o(ault)f(w)o(ould)h(be)g Fn(sml.x86-linux)p
Fo(.)3757 1459 y Fk(1)0 1759 y Fm(2.4)99 b(T)-9 b(esting)25
b(the)h(newly)f(booted)h(system)0 1952 y Fo(T)-7 b(o)20
b(test-dri)n(v)o(e)f(a)i(ne)n(wly)f(booted)e(system)j(without)e
(installing)h(it,)h(issue)f(the)h Fn(testml)e Fo(command)f(at)j(the)f
(shell)h(prompt:)0 2141 y Fn($)50 b(./testml)0 2330 y
Fo(This)19 b(starts)h(an)f(interacti)n(v)o(e)f(system)h(in)g(a)h(w)o
(ay)f(v)o(ery)f(similar)h(to)g Fn(sml)p Fo(,)g(b)n(ut)g(it)h(uses)f
(the)g(heap)g(image)f(and)h(libraries)f(from)g(a)i(pre)n(vious)d(run)0
2430 y(of)j Fn(makeml)p Fo(.)0 2700 y Fm(2.5)99 b(Installing)24
b(a)h(newly)g(booted)h(system)0 2893 y Fo(Once)18 b(one)f(is)i(sure)f
(that)g(a)g(ne)n(wly)g(booted)e(system)i(is)h(good)e(enough)f(to)i
(replace)f(the)h(old)g(system,)g(issuing)g(the)g Fn(installml)f
Fo(command)0 2992 y(will)k(replace)e(old)h(heap)g(image)f(and)h(old)g
(libraries)g(with)g(those)g(generated)f(by)g(the)i(pre)n(vious)d(run)i
(of)f Fn(makeml)p Fo(.)0 3182 y Fn($)50 b(./installml)0
3371 y Fo(This)19 b(command)e(will)i(replace)f(the)h(system')-5
b(s)20 b(heap)e(image)g(in)h Fn(../../bin/.heap)e Fo(and)h(its)i
(libraries)e(in)h Fn(../../lib)p Fo(.)24 b(Ho)n(we)n(v)o(er)m(,)0
3471 y(it)d(will)g(lea)n(v)o(e)f(alone)f(an)o(y)h(unrelated)f
(libraries)g(in)i Fn(../../lib)p Fo(.)0 3608 y(Sometimes)h(changes)f
(to)i(the)g(compiler)e(will)i(render)e(an)o(y)h(pre)n(viously)e
(installed)j(libraries)f(unusable.)30 b(In)22 b(this)h(case)g(one)f
(should)f(erase)0 3707 y(them)f(prior)f(to)h(issuing)g(the)h
Fn(installml)e Fo(command:)0 3897 y Fn($)50 b(rm)f(../../lib/*)0
3996 y($)h(./installml)0 4185 y Fo(Libraries)22 b(that)g(were)h
(installed)f(as)h(part)g(of)f(the)g(SML/NJ)h(installation)g(process)f
(b)n(ut)g(which)g(are)h(unrelated)e(to)h(bootstrap)f(compilation)0
4285 y(\(e.g.,)e Fn($/inet-lib.cm)p Fo(,)e(CML,)j(eXene\))f(can)g(be)h
(reco)o(v)o(ered)c(\(once)j(the)o(y)g(had)g(been)g(remo)o(v)o(ed\))d
(by)k(going)e(back)h(to)g(the)h(installation)0 4385 y(directory)e(and)i
(issuing)g(the)g Fn(config/install.sh)e Fo(command)g(again:)0
4574 y Fn($)50 b(cd)f(../..)0 4674 y($)h(config/install.sh)0
4863 y Fo(Since)26 b(some)h(changes)e(to)h(the)h(compiler)e(also)h
(render)f(old)h(bin\002les)h(unusable,)f(one)g(will)h(occasionally)e
(ha)n(v)o(e)h(to)g(remo)o(v)o(e)f(those)h(\002rst)0 4962
y(\(prior)c(to)h(re-running)d Fn(config/install.sh)p
Fo(\).)30 b(Bin\002les)24 b(for)e(libraries)g(unrelated)g(to)h
(bootstrapping)d(are)j(handled)e(by)i(CM)g(\(and)0 5062
y(not)f(CMB\),)h(so)g(the)g(usual)f(CM)i(rules)e(for)g(locating)g(them)
g(apply)-5 b(.)31 b(\(This)23 b(means)f(that)h(in)f(such)h(a)g(case)g
(the)f(bin\002le)h(for)f Fj(d)p Fn(/)p Fj(f)9 b Fn(.sml)22
b Fo(will)0 5162 y(be)28 b(in)g Fj(d)p Fn(/CM/)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fn(/)p Fj(f)9 b Fn(.sml)24 b Fo(where)k
Fl(ar)m(c)o(h)f Fo(is)h(a)h(string)e(describing)f(the)i(CPU)h
(architecture)d(and)h Fl(os)h Fo(is)h(a)f(string)f(describing)g(the)0
5261 y(operating)18 b(system)j(kind.)j(Example:)g Fn(x86-unix)p
Fo(.\))p 0 5302 1608 4 v 90 5358 a Fi(1)120 5381 y Fh(The)17
b(operating-system)k(dependent)f(portion)f(of)e(the)i(name)f(of)f(a)h
(heap)h(image)f(is)g(more)f(discriminating)k(than)e(the)f
(operating-system)j(dependent)f(portion)f(of)f(boot-)0
5460 y(or)f(bin\002le)h(directories.)24 b(On)17 b(the)g(same)g(Intel)i
(x86)e(Linux)g(machine,)i(the)e(name)h(of)f(the)g(boot)h(directory)i
(is)c Fg(sml.boot.x86-unix)p Fh(.)1989 5709 y Fo(4)p
eop
%%Page: 5 6
5 5 bop 0 83 a Fq(3)119 b(Differ)n(ences)31 b(between)g(CMB)f(and)g(CM)
0 318 y Fo(In)g(this)h(section)f(we)g(discuss)h(why)e(compiling)g(the)h
(compiler)f(is)i(dif)n(ferent)e(from)g(compiling)g(other)g(ML)i
(programs.)53 b(Each)30 b(of)g(the)0 418 y(follo)n(wing)19
b(sub-sections)g(focuses)g(on)h(one)g(particular)f(aspect.)0
705 y Fm(3.1)99 b(Code)25 b(sharing)0 911 y Fo(CM)20
b(k)o(eeps)g(compiled)e(code)g(within)i(the)f(same)h(directory)e(tree)h
(that)h(contains)f(the)g(corresponding)d(ML)k(source)f(code.)24
b(Thus,)19 b(there)g(is)h(a)0 1011 y(\002x)o(ed)d(function)g(that)h
(maps)g(the)g(names)g(of)g(source)f(\002les)i(to)f(the)h(names)e(of)h
(corresponding)d(bin\002les)j(and)f(the)i(names)e(of)h(CM)h
(description)0 1110 y(\002les)i(\(for)e(libraries\))h(to)g(their)g
(corresponding)d(stable)j(\002les.)0 1260 y(As)30 b(a)g(result,)h
(these)f(\002les)g(will)g(be)f(shared)g(between)f(programs)f(that)j
(use)f(the)h(same)f(libraries.)52 b(Moreo)o(v)o(er)m(,)28
b(CM)i(will)g(let)g(dif)n(ferent)0 1359 y(programs)20
b(that)i(are)g(loaded)f(into)h(an)g(interacti)n(v)o(e)f(session)i(at)f
(the)g(same)h(time)f(share)g(their)g(in-memory)d(copies)j(of)g(common)e
(compiled)0 1459 y(modules.)42 b(\(There)25 b(is)j(also)e(an)h(issue)g
(of)f(state-sharing,)g(b)n(ut)g(this)h(does)f(not)g(concern)f(CMB)i
(because)f(the)g(bootstrap)f(compiler)g(only)0 1559 y(compiles)20
b(code)f(without)h(linking)f(it.\))0 1708 y(Sharing)h(of)g(code)g(is)i
(useful)e(for)h(ordinary)d(usage,)j(b)n(ut)f(when)h(compiling)e(the)i
(compiler)e(itself,)i(it)h(is)g(not)e(desirable.)26 b(During)20
b(bootstrap)0 1808 y(compilation,)d(it)i(is)h(often)d(the)i(case)g
(that)f(se)n(v)o(eral)g(dif)n(ferent)f(v)o(ersions)g(of)i(compiled)e
(code)h(ha)n(v)o(e)g(to)g(coe)o(xist.)24 b(Some,)18 b(or)h(e)n(v)o(en)e
(all)i(of)f(these)0 1907 y(v)o(ersions)h(can)h(dif)n(fer)f
(signi\002cantly)h(from)f(those)h(of)g(the)g(currently)e(running)g
(system.)0 2057 y(Therefore,)30 b(CMB)i(k)o(eeps)e(bin\002les)g(and)g
(stable)h(\002les)g(in)g(separate)f(directory)e(trees.)56
b(The)30 b(names)g(of)g(the)g(directories)g(where)f(these)0
2156 y(trees)g(are)g(rooted)e(at)i(are)g(constructed)e(from)g(three)h
(parts;)33 b(the)c(bin\002le)f(directory')-5 b(s)28 b(name)g(is)h
Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)d Fo(and)j(the)f
(stable\002le)0 2256 y(directory')-5 b(s)27 b(name)g(is)i
Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fo(.)46
b(As)28 b(mentioned)e(before,)j Fl(ar)m(c)o(h)e Fo(is)i(a)f(string)g
(describing)e(the)i(current)f(CPU)i(architecture)0 2356
y(and)21 b Fl(os)h Fo(is)h(a)f(string)f(describing)f(the)i(current)e
(operating)g(system)i(kind.)28 b(Component)20 b Fj(u)i
Fo(is)g(a)h(string)e(that)h(can)f(be)h(selected)f(freely)g(when)0
2455 y(the)30 b(bootstrap)e(compiler)h(is)h(in)m(v)n(ok)o(ed.)53
b(When)29 b(using)g Fn(CMB.make)g Fo(it)i(def)o(aults)e(to)h
Fn(sml)p Fo(,)i(otherwise)d(it)i(is)g(the)e(ar)o(gument)f(gi)n(v)o(en)g
(to)0 2555 y Fn(CMB.make')p Fo(.)40 b(\(The)25 b Fj(u)h
Fo(component)d(is)k(k)o(ept)e(v)n(ariable)g(to)h(mak)o(e)f(it)i
(possible)e(to)h(k)o(eep)f(and)g(use)h(se)n(v)o(eral)f(compiled)f(v)o
(ersions)h(of)h(the)0 2654 y(system)20 b(at)h(the)f(same)h(time.\))0
2804 y(The)e(auxiliary)g(script)g Fn(makeml)g Fo(\(which)g(is)h
(responsible)f(for)g(bootstrapping)d(a)k(ne)n(w)g(system\))f(also)h
(accepts)f(a)h(parameters)f(to)h(select)g Fj(u)p Fo(.)0
2903 y(If)g(the)g(parameter)f(is)i(missing,)f(it)h(def)o(aults)f(to)g
Fn(sml)g Fo(\(in)g(accordance)e(with)j Fn(CMB.make)p
Fo(')-5 b(s)19 b(beha)n(vior\).)0 3191 y Fm(3.2)99 b(Init)25
b(library)0 3396 y Fo(The)f Fl(init)g(libr)o(ary)g Fo(\()p
Fn($smlnj/internal/init.cmi)p Fo(\))c(is)25 b(a)f(library)f(that)h(is)h
(used)f(implicitly)f(by)h(all)h(programs.)34 b(This)25
b(library)e(is)0 3496 y(\223special\224)i(in)h(se)n(v)o(eral)e(w)o(ays)
i(and)f(cannot)f(be)h(described)f(using)h(an)g(ordinary)e(CM)j
(description)e(\002le.)41 b(It)25 b(is)h(the)g(bootstrap)d(compiler')-5
b(s)0 3596 y(responsibility)19 b(to)h(properly)e(prepare)h(a)h(stable)h
(v)o(ersion.)0 3745 y(Ordinary)16 b(programs)f(\(those)i(managed)f(by)h
(CM\))h(do)f(not)g(ha)n(v)o(e)g(to)g(w)o(orry)g(about)f(the)h(special)h
(aspects)g(of)f(ho)n(w)g(to)g(construct)g(this)h(library;)0
3845 y(the)o(y)h(just)i(ha)n(v)o(e)f(to)g(be)g(able)g(to)h(use)f(its)h
(stable)g(v)o(ersion.)0 3994 y(There)e(are)h(se)n(v)o(eral)g(reasons)g
(why)f(the)h(library)f(cannot)g(be)i(described)d(as)j(an)g(ordinary)d
(CM)i(library:)125 4227 y Ff(\017)41 b Fo(The)27 b(library)g(e)o
(xports)g(the)h Fl(pervasive)g(en)m(vir)l(onment)e Fo(which)i(normally)
e(is)j(imported)d(implicitly)i(by)f(e)n(v)o(ery)g(compilation)f(unit.)
208 4326 y(W)m(ithin)20 b(the)g(init)g(library)-5 b(,)19
b(no)h(perv)n(asi)n(v)o(e)e(en)m(vironment)f(is)k(a)n(v)n(ailable)f
(yet.)125 4492 y Ff(\017)41 b Fo(One)27 b(binding)f(in)i(the)g(abo)o(v)
o(e-mentioned)23 b(perv)n(asi)n(v)o(e)j(en)m(vironment)e(is)29
b(a)f(binding)e(for)h Fn(structure)p 3325 4492 25 4 v
78 w(Core)p Fo(.)47 b(The)28 b(symbol)p 208 4592 V 232
4592 a Fn(Core)22 b Fo(is)h(not)f(a)g(le)o(gal)g(SML)g(identi\002er)m
(,)f(and)h(the)g(bootstrap)e(compiler)h(has)h(to)g(tak)o(e)g(special)g
(action)g(to)g(create)g(a)g(binding)e(for)i(it)208 4692
y(an)o(yw)o(ay)-5 b(.)125 4858 y Ff(\017)41 b Fo(One)26
b(of)g(the)h(compilation)e(units)h(in)h(this)g(library)f(is)h(merely)f
(a)h(placeholder)e(which)h(at)h(link)f(time)h(has)g(to)f(be)h(replaced)
e(by)i(the)208 4957 y(SML/NJ)20 b(runtime)f(system)i(\(which)e(is)i
(written)f(in)g(C\).)1989 5709 y(5)p eop
%%Page: 6 7
6 6 bop 0 83 a Fp(3.2.1)81 b(Linkage)20 b(to)g(runtime)h(system)0
289 y Fo(The)j(ML)g(source)g(\002le)h Fn(dummy.sml)e
Fo(\(located)g(in)i(directory)d Fn(src/system/smlnj/init)p
Fo(\))f(contains)j(a)g(carefully)f(constructed)0 388
y(module)18 b(whose)h(signature)f(matches)g(that)i(of)f(the)g(runtime)f
(system')-5 b(s)19 b(binary)f(API.)h(This)h(\002le)g(is)g(being)e
(compiled)f(as)j(part)f(of)g(construct-)0 488 y(ing)h(the)g(init)g
(library)-5 b(,)19 b(b)n(ut)h(it)h(has)f(been)g(mark)o(ed)e(specially)i
(as)h Fl(runtime)f(system)h(placeholder)p Fo(.)i(During)c(compilation,)
f(this)j(\002le)g(pretends)0 587 y(to)f Fl(be)g Fo(the)h(runtime)e
(system;)h(other)g(modules)f(that)h(use)g(the)h(runtime)e(system)h
(\223think\224)f(the)o(y)h(are)g(using)f Fn(dummy.sml)p
Fo(.)0 737 y(At)28 b(link)f(time)g(\(i.e.,)h(bootstrap)e(time\227when)g
Fn(makeml)g Fo(is)i(run\),)g(the)f(boot)f(loader)g(will)i(ignore)e
Fn(dummy.sml)g Fo(and)g(use)i(the)f(actual)0 836 y(runtime)20
b(system)i(in)f(its)i(place.)28 b(This)22 b(trick)f(mak)o(es)g(it)i
(possible)e(that)g(\(from)f(the)i(point)e(of)i(vie)n(w)f(of)g(all)h
(other)f(modules\))f(using)h(services)0 936 y(from)e(the)h(runtime)f
(system)i(appears)e(to)h(be)h(no)e(dif)n(ferent)g(than)h(using)f
(services)h(from)g(an)g(ordinary)e(ML)i(compilation)e(unit.)0
1224 y Fm(3.3)99 b(BOO)l(TLIST)26 b(\002le)0 1429 y Fo(Linking)21
b(of)g(SML/NJ)i(programs)d(in)m(v)n(olv)o(es)h(e)o(x)o(ecuting)f(the)i
(code)f(of)h(each)g(of)f(the)h(concerned)e(compilation)h(units.)30
b(The)22 b(code)f(of)h(each)0 1529 y(compilation)16 b(unit)i(is)i
(technically)d(a)h(closed)g(function;)f(all)i(its)h(imports)d(ha)n(v)o
(e)h(been)f(turned)g(into)h(ar)o(guments)e(and)i(all)h(e)o(xports)e(ha)
n(v)o(e)g(been)0 1628 y(turned)i(into)h(return)f(v)n(alues.)0
1778 y(F)o(or)27 b(ordinary)d(programs,)j(this)h(process)e(is)i(under)e
(control)g(of)g(CM;)i(CM)g(will)g(tak)o(e)f(care)f(of)h(properly)e
(passing)i(the)g(e)o(xports)e(of)i(one)0 1877 y(compilation)18
b(unit)i(to)h(the)f(imports)f(of)h(the)h(ne)o(xt.)0 2027
y(When)30 b(booting)f(a)h(stand-alone)f(program,)h(though,)h(there)e
(is)i(no)f(CM)h(a)n(v)n(ailable)f(yet.)55 b(Thus,)32
b(e)o(x)o(ecuting)c(module-le)n(v)o(el)g(code)h(and)0
2126 y(passing)18 b(e)o(xports)e(to)i(imports)f(has)h(to)h(be)e(done)g
(by)h(the)g(\(bare\))e(runtime)h(system.)24 b(The)18
b(runtime)f(system)h(understands)e(enough)g(about)h(the)0
2226 y(layout)k(of)g(bin\002les)h(and)f(library)f(\002les)j(so)e(that)h
(it)g(can)g(do)f(that\227pro)o(vided)d(there)j(is)i(a)f(special)g
Fl(bootlist)f Fo(\002le)h(that)g(contains)f(instructions)0
2326 y(about)e(which)h(modules)f(to)h(load)g(in)g(what)h(order)-5
b(.)0 2475 y(The)29 b(bootlist)h(mechanism)e(is)j(not)e(restricted)g
(to)h(b)n(uilding)f(SML/NJ.)h(Ordinary)e(ML)h(code)g(can)h(also)g(be)f
(turned)g(into)g(stand-alone)0 2575 y(programs,)c(and)h(as)h(f)o(ar)e
(as)i(the)f(runtime)f(system)h(is)h(concerned,)e(the)h(mechanisms)f
(are)h(the)g(same.)42 b(The)26 b(bootlist)g(\002le)g(used)g(by)g(such)0
2674 y(ordinary)19 b(stand-alone)g(ML)h(programs)f(will)j(be)e
(constructed)f(by)i(CM;)g(only)f(in)h(the)g(case)g(of)f(bootstrapping)e
(SML/NJ)j(itself)h(it)f(will)h(be)0 2774 y(constructed)c(by)i(CMB.)0
2923 y(The)g(name)f(of)h(the)g(bootlist)g(\002le)h(is)g
Fn(BOOTLIST)p Fo(,)e(and)h(it)h(is)g(located)e(at)i(the)f(root)f(of)h
(the)g(directory)f(tree)h(that)g(contains)g(stable)g(\002les)h(\(i.e.,)
0 3023 y(its)g(name)f(is)h Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fn(/BOOTLIST)p Fo(\).)0 3311 y Fm(3.4)99
b(PIDMAP)24 b(\002le)0 3516 y Fo(The)d(last)i(\002le)g(to)f(be)f
(loaded)g(by)h(the)f(bootstrap)g(process)g(contains)g(module-le)n(v)o
(el)f(code)h(which)g(will)i(trigger)d(the)i(self-initialization)f(of)0
3616 y(the)f(interacti)n(v)o(e)f(system\227including)f(CM.)j(One)f(job)
g(of)g(CM)h(is)h(to)e(manage)f(sharing)g(of)h(link-time)g(state)h
(\(i.e.,)f(dynamic)e(state)j(created)0 3715 y(by)f(module-le)n(v)o(el)e
(code)h(at)i(link)f(time\).)26 b(Link-time)19 b(state)i(of)f(a)h
(module)e(used)h(by)g(the)g(interacti)n(v)o(e)f(system)i(should)e(be)h
(shared)g(with)g(an)o(y)0 3815 y(program)k(using)i(the)h(same)f
(module.)42 b(The)26 b(\002le)h Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fn(/PIDMAP)c Fo(contains)j(information)e(that)i(enables)
g(CM)h(to)g(relate)0 3914 y(e)o(xisting)21 b(link-time)f(state)i(to)f
(particular)f(library)g(modules)h(and)f(also)i(to)f(identify)f(an)o(y)h
(link-time)f(state)i(that)f(will)h(ne)n(v)o(er)e(be)i(shared)e(and)0
4014 y(which)g(can)g(therefore)e(be)i(dropped.)j(It)d(is)h(CMB')-5
b(s)22 b(responsibility)d(to)h(construct)f(the)h Fn(PIDMAP)g
Fo(\002le.)0 4302 y Fm(3.5)99 b(Cr)n(oss-compiling)0
4507 y Fo(Se)n(v)o(eral)32 b(dif)n(ferent)f(v)o(ersions)h(of)g(the)h
(bootstrap)e(compiler)g(can)i(coe)o(xist\227each)e(being)g(responsible)
h(for)g(tar)o(geting)f(another)g(CPU-)0 4607 y(OS)g(combination.)51
b(Structure)29 b Fn(CMB)h Fo(is)h(the)f(def)o(ault)f(bootstrap)f
(compiler)h(that)h(tar)o(gets)f(the)h(current)e(system;)35
b(it)c(is)g(e)o(xported)d(from)0 4706 y Fn($smlnj/cmb.cm)p
Fo(.)67 b(The)34 b(follo)n(wing)f(table)h(lists)j(the)d(names)h(of)f
(other)g(structures\227those)f(corresponding)e(to)k(v)n(arious)f
(cross-)0 4806 y(compilers.)24 b(All)d(these)f(structures)g(share)g
(the)g(same)g(signature.)0 4955 y(The)h(table)h(also)g(sho)n(ws)g(the)g
(names)f(of)h(libraries)f(that)h(the)g(structures)f(are)g(e)o(xported)f
(from)h(as)h(well)g(as)h(those)e Fl(ar)m(c)o(h)g Fo(and)h
Fl(os)g Fo(strings)f(that)0 5055 y(are)f(used)g(to)g(name)g(bin\002le-)
g(and)f(stable\002le-directory)-5 b(.)1989 5709 y(6)p
eop
%%Page: 7 8
7 7 bop 71 64 a Fe(library)p 1439 91 4 92 v 1455 91 V
1237 w(structure)p 2455 91 V 739 w(architecture)p 2907
91 V 100 w(OS)p 3260 91 V 257 w Fs(ar)m(c)o(h)p 3674
91 V 281 w(os)p 21 95 3979 4 v 21 111 V 71 175 a Fd($smlnj/cmb.cm)71
267 y($smlnj/cmb/current.cm)p 1439 294 4 183 v 1455 294
V 1507 175 a(CMB)p 2455 294 V 865 w Fe(current)p 2907
294 V 241 w(current)p 3260 294 V 3674 294 V 21 297 3979
4 v 21 314 V 71 378 a Fd($smlnj/cmb/alpha32-unix.cm)p
1439 405 4 92 v 1455 405 V 266 w(Alpha32UnixCMB)p 2455
405 V 370 w Fe(Alpha)p 2907 405 V 270 w(Unix)p 3260 405
V 204 w Fd(alpha32)p 3674 405 V 98 w(unix)p 21 408 3979
4 v 71 472 a($smlnj/cmb/hppa-unix.cm)p 1439 500 4 92
v 1455 500 V 401 w(HPPAUnixCMB)p 2455 500 V 505 w Fe(HP-P)-7
b(A)p 2907 500 V 242 w(Unix)p 3260 500 V 204 w Fd(hppa)p
3674 500 V 233 w(unix)p 21 503 3979 4 v 71 567 a
($smlnj/cmb/ppc-macos.cm)p 1439 594 4 92 v 1455 594 V
401 w(PPCMacOSCMB)p 2455 594 V 505 w Fe(Po)n(wer)o(-PC)p
2907 594 V 147 w(Mac-OS)p 3260 594 V 100 w Fd(ppc)p 3674
594 V 278 w(macos)p 21 598 3979 4 v 71 662 a($smlnj/cmb/ppc-unix.cm)p
1439 689 4 92 v 1455 689 V 446 w(PPCUnixCMB)p 2455 689
V 550 w Fe(Po)n(wer)o(-PC)p 2907 689 V 147 w(Unix)p 3260
689 V 204 w Fd(ppc)p 3674 689 V 278 w(unix)p 21 692 3979
4 v 71 756 a($smlnj/cmb/sparc-unix.cm)p 1439 784 4 92
v 1455 784 V 356 w(SparcUnixCMB)p 2455 784 V 460 w Fe(Sparc)p
2907 784 V 282 w(Unix)p 3260 784 V 204 w Fd(sparc)p 3674
784 V 188 w(unix)p 21 787 3979 4 v 71 851 a($smlnj/cmb/x86-unix.cm)p
1439 878 4 92 v 1455 878 V 446 w(X86UnixCMB)p 2455 878
V 550 w Fe(Intel)18 b(x86)p 2907 878 V 186 w(Unix)p 3260
878 V 204 w Fd(x86)p 3674 878 V 278 w(unix)p 21 882 3979
4 v 71 946 a($smlnj/cmb/x86-win32.cm)p 1439 973 4 92
v 1455 973 V 401 w(X86Win32CMB)p 2455 973 V 505 w Fe(Intel)g(x86)p
2907 973 V 186 w(W)m(in32)p 3260 973 V 153 w Fd(x86)p
3674 973 V 278 w(win32)p 21 976 3979 4 v 21 993 V 71
1057 a($smlnj/cmb/all.cm)p 1439 1084 4 92 v 1455 1084
V 671 w Fe(all)g(of)h(the)g(abo)o(v)o(e)h(\(e)o(xcept)g
Fd(CMB)p Fe(\))p 2455 1084 V 2907 1084 V 3260 1084 V
3674 1084 V 0 1235 a Fo(As)g(an)g(e)o(xample,)e(consider)g(tar)o
(geting)f(a)j(Sparc/Unix)e(system.)25 b(The)19 b(\002rst)i(step)e(is)i
(to)e(load)g(the)h(library)e(that)h(e)o(xports)g(the)g(corresponding)0
1335 y(cross-compiler:)100 1520 y Fn(CM.autoload)47 b
("$smlnj/cmb/sparc-unix.cm";)0 1706 y Fo(Once)20 b(this)h(is)g(done,)e
(run)g(the)h(equi)n(v)n(alent)f(of)h Fn(CMB.make)p Fo(:)100
1891 y Fn(SparcUnixCMB.make)46 b(\(\);)0 2076 y Fo(This)24
b(will)g(recompile)f(the)h(compiler)m(,)e(producing)f(object)j(code)f
(for)g(a)h(Sparc.)35 b(Bin\002les)25 b(will)f(be)g(stored)f(under)g
Fn(sml.bin.sparc-)0 2176 y(unix)d Fo(and)g(stable)g(libraries)g(under)f
Fn(sml.boot.sparc-unix)p Fo(.)0 2487 y Fq(4)119 b(Structur)n(e)31
b(CMB)0 2708 y Fo(This)24 b(section)f(describes)h(the)f(signature)g(of)
g Fn(structure)49 b(CMB)p Fo(.)23 b(Since)h(structures)f(representing)f
(cross-compilers)g(ha)n(v)o(e)h(the)g(same)0 2808 y(signature,)c(e)n(v)
o(erything)e(said)k(here)f(applies)f(\()p Fl(mutatis)h(mutandis)p
Fo(\))f(to)i(them)e(as)i(well.)0 2944 y(The)f(primary)e(function)h(to)h
(in)m(v)n(ok)o(e)f(the)h(bootstrap)f(compiler)g(is)i
Fn(CMB.make')p Fo(:)100 3130 y Fn(val)49 b(make')g(:)g(string)g(option)
g(->)g(bool)0 3315 y Fo(This)20 b(\(re-\)compiles)e(the)i(interacti)n
(v)o(e)e(system')-5 b(s)21 b(entire)e(source)g(tree,)h(constructing)e
(stable)i(v)o(ersions)f(for)g(all)i(libraries)e(in)m(v)n(olv)o(ed.)k
(In)d(the)0 3415 y(process,)i(bin\002les)g(are)g(placed)f(under)f
(directory)h Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(os)e Fo(where)j Fl(ar)m(c)o(h)f Fo(and)g Fl(os)i Fo(are)f(strings)g
(describing)e(tar)o(get)h(architecture)0 3514 y(and)f(tar)o(get)f(OS,)i
(respecti)n(v)o(ely)-5 b(.)22 b(The)e(string)g Fj(u)g
Fo(is)i(the)e(optional)f(ar)o(gument)f(to)i Fn(CMB.make')p
Fo(.)k(If)c(set)h(to)f Fn(NONE)p Fo(,)g(it)h(def)o(aults)f(to)g
Fn("sml")p Fo(.)0 3650 y(An)g(alternati)n(v)o(e)f(equi)n(v)n(alent)g
(to)h(in)m(v)n(oking)e Fn(CMB.make')h Fo(with)h Fn(NONE)g
Fo(is)h(to)g(use)f Fn(CMB.make)p Fo(:)100 3836 y Fn(val)49
b(make)g(:)h(unit)f(->)g(bool)0 4021 y Fo(CMB\227lik)o(e)20
b(CM\227maintains)f(a)g(lot)h(of)f(internal)f(state)i(to)f(speed)g(up)g
(repeated)e(in)m(v)n(ocations.)23 b(\(Between)c(sessions,)h(much)e(of)h
(this)h(state)0 4121 y(is)h(preserv)o(ed)c(in)j(those)g(bin\002le-)f
(and)g(stable\002le-directories.)k(Ho)n(we)n(v)o(er)m(,)18
b(reloading)g(is)i(still)h(quite)f(a)g(bit)g(more)e(e)o(xpensi)n(v)o(e)
g(than)h(directly)0 4220 y(using)h(e)o(xisting)f(in-core)g
(information.\))0 4356 y(Information)e(that)k(CMB)g(k)o(eeps)f(in)g
(memory)f(can)h(be)g(completely)f(erased)g(by)h(issuing)g(the)g
Fn(CMB.reset)f Fo(command:)100 4542 y Fn(val)49 b(reset)g(:)g(unit)g
(->)h(unit)0 4727 y Fo(After)20 b(a)h Fn(CMB.reset\(\))p
Fo(,)d(the)i(ne)o(xt)g Fn(CMB.make)f Fo(\(or)h Fn(CMB.make')p
Fo(\))e(will)j(ha)n(v)o(e)f(to)g(re-load)f(e)n(v)o(erything)e(from)j
(the)g(\002le)h(system.)0 4863 y(CMB)26 b(has)f(its)h(o)n(wn)e(re)o
(gistry)g(of)h(\223CM)g(identi\002ers\224\227named)e(v)n(alues)i(that)g
(can)f(be)h(queried)f(by)g(using)g(the)h(conditional)e(compilation)0
4963 y(f)o(acility)-5 b(.)39 b(This)25 b(re)o(gistry)f(is)i
(initialized)f(according)d(to)k(CM')-5 b(s)26 b(rules.)39
b(Of)25 b(course,)g(initial)h(v)n(alues)e(are)h(not)g(based)f(on)h
(current)f(architec-)0 5063 y(ture)k(and)g(OS)h(b)n(ut)g(on)f(those)g
(of)h(the)f(tar)o(get)g(system.)50 b(T)-7 b(o)29 b(e)o(xplicitly)e(set)
j(or)e(erase)h(the)f(v)n(alues)g(of)h(speci\002c)f(v)n(ariables,)i(one)
e(can)g(use)0 5162 y Fn(CMB.symval)19 b Fo(\(which)g(acts)i(in)f(a)h(w)
o(ay)f(analogous)f(to)h Fn(CM.symval)p Fo(\):)100 5348
y Fn(val)49 b(symval)g(:)g(string)g(->)747 5447 y({)h(get)f(:)h(unit)f
(->)g(int)g(option,)g(set)g(:)h(int)f(option)g(->)g(unit})1989
5709 y Fo(7)p eop
%%Page: 8 9
8 8 bop 0 83 a Fq(5)119 b(File)31 b(naming\227the)f(r)n(ole)g(of)f
(path)i(anchors)0 318 y Fo(Under)20 b(normal)h(operation)e(of)i(CM,)h
(the)f(mapping)f(from)g(path)h(names)g(to)h(the)f(\002les)h(the)o(y)f
(denote)f(is)j(supposed)d(to)h(be)g(a)h(\002x)o(ed)f(one.)28
b(The)0 418 y(path)20 b(anchor)e(mechanism)h(is)i(merely)f(a)g(means)g
(of)g(con\002guring)e(this)i(mapping)f(according)f(to)i(the)g(actual)g
(\002lesystem)h(layout.)0 567 y(The)i(bootstrap)e(compiler)h(and)g(the)
h(associated)g(boot)f(procedure,)f(ho)n(we)n(v)o(er)m(,)g(use)i(path)g
(anchors)e(e)o(xtensi)n(v)o(ely)g(for)i(other)f(purposes.)32
b(In)0 667 y(particular)m(,)18 b(the)j(abo)o(v)o(e-mentioned)15
b(mapping)k(will)h(v)n(ary)g(o)o(v)o(er)e(time.)0 817
y(The)25 b(\223casual\224)f(compiler)g(hack)o(er)f(does)i(not)g
(actually)f(need)g(to)h(remember)e(all)i(the)g(details)g(because)g
(these)g(details)g(are)g(mostly)f(tak)o(en)0 916 y(care)e(of)f
(automatically)f(by)i Fn(CMB)g Fo(and)f(its)i(v)n(arious)d(scripts)i
(\()p Fn(makeml)p Fo(,)f Fn(testml)p Fo(,)h Fn(installml)p
Fo(\).)28 b(But)22 b(it)h(is)g(useful)e(to)h(ha)n(v)o(e)f(a)h(rough)0
1016 y(idea)e(of)g(what)g(r)7 b(\210)-35 b(oles)20 b(are)g(being)g
(played)f(by)g(v)n(arious)h(\002les)h(and)e(directories)h(that)g(are)g
(being)f(used)h(or)g(created.)0 1303 y Fm(5.1)99 b(Anchoring)26
b(r)n(equir)n(ement)0 1509 y Fo(During)d(bootstrap)f(compilation)h(it)h
(is)h(necessary)e(that)h(all)h(pathnames)e(be)h(either)f(anchored)f(or)
i(relati)n(v)o(e)f(to)h(another)f(anchored)e(path-)0
1608 y(name.)k(This)c(rule)g(guarantees)e(that)h(e)n(v)o(ery)g(path)g
(name)g(can)g(be)h(mapped)e(to)h(dif)n(ferent)f(locations)h(in)h(the)f
(\002lesystem)h(at)g(dif)n(ferent)e(times.)0 1708 y(\(T)-6
b(echnically)h(,)18 b(this)j(restriction)e(is)i(necessary)f(only)f(for)
h(library)f(description)f(\002les.\))0 1995 y Fm(5.2)99
b(Differ)n(ent)27 b(anchor)e(mappings)g(at)g(differ)n(ent)i(times)0
2201 y Fo(W)-7 b(e)21 b(can)f(distinguish)g(between)f(four)g(dif)n
(ferent)g(anchor)f(con\002gurations)g(which)i(will)h(be)f(in)g(ef)n
(fect)g(at)g(dif)n(ferent)f(times:)0 2433 y Fp(compilation:)40
b Fo(At)26 b(the)g(time)g Fn(CMB.make)f Fo(runs,)i(the)f(anchor)e
(con\002guration)f(is)k(tak)o(en)f(from)f(\002le)h Fn(pathconfig)p
Fo(.)3495 2403 y Fk(2)3569 2433 y Fo(This)g(con\002gu-)208
2533 y(ration)h(maps)i(anchors)e(to)i(their)f(respecti)n(v)o(e)f
(directories)h(in)g(the)h(actual)f(source)g(tree.)50
b(At)29 b(the)g(same)f(time)h(the)g(polic)o(y)e(which)208
2633 y(determines)f(the)i(names)g(of)g(bin\002les)g(and)f
(stable\002les)i(is)g(modi\002ed)e(in)h(such)g(a)g(w)o(ay)g(that)g(all)
h(bin\002les)f(will)g(be)g(created)g(in)g(di-)208 2732
y(rectory)e Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(os)g Fo(and)i(all)h(stable\002les)g(will)g(be)f(created)f(in)i
Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fo(.)46
b(In)28 b(particular)m(,)h(if)f Fn($)p Fj(a)h Fo(is)g(the)f(root)208
2832 y(anchor)d(name)i(controlling)e(the)j(path)e(leading)h(to)g(an)h
(ML)f(source)f(\002le)i Fn($)p Fj(a)p Fn(/)p Ff(\001)14
b(\001)g(\001)p Fn(/)p Fl(\002le)p Fn(.sml)p Fo(,)28
b(then)f(the)g(corresponding)d(bin\002le)208 2932 y(will)c(be)h
(created)e(as)i Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(os)p Fn(/)p Fj(a)p Fn(/)p Ff(\001)14 b(\001)g(\001)l
Fn(/CM/)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fn(/)p Fl(\002le)p
Fn(.sml)p Fo(.)22 b(Similarly)-5 b(,)19 b(the)h(stable\002le)h(for)e
(the)i(library)e(descrip-)208 3031 y(tion)e Fn($)p Fj(a)p
Fn(/)p Ff(\001)d(\001)g(\001)p Fn(/)p Fl(\002le)p Fn(.cm)j
Fo(controlled)f(by)i(root)f(anchor)f Fn($)p Fj(a)i Fo(gets)h(written)e
(to)i Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p
Fn(/)p Fj(a)p Fn(/)p Ff(\001)14 b(\001)g(\001)l Fn(/CM/)p
Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fn(/)p Fl(\002le)p Fn(.cm)p
Fo(.)208 3131 y(\(Notice)19 b(ho)n(w)h(the)g(anchor)f(name)g
Fn($)p Fj(a)i Fo(is)g(being)e(incorporated)f(into)h(the)i(resulting)e
(pathnames.\))0 3297 y Fp(boot:)40 b Fo(At)27 b(bootstrap)f(time)g
(\(e.g.,)i(when)e(the)g Fn(makeml)h Fo(script)f(is)i(in)m(v)n(ok)o
(ed\),)e(CM)h(scans)g(the)g(contents)f(of)h Fj(u)p Fn(.boot.)p
Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fo(,)e(and)208 3396 y(for)e(each)h
(directory)f(name)h Fj(a)g Fo(it)h(\002nds)g(there)f(it)h(maps)f(the)g
(anchor)f Fn($)p Fj(a)h Fo(to)h(that)f(directory)-5 b(.)35
b(The)24 b(result)h(is)g(that)f(the)h(location)e(for)208
3496 y(library)16 b(description)g Fn($)p Fj(a)p Fn(/)p
Ff(\001)e(\001)g(\001)o Fn(/)p Fl(\002le)p Fn(.cm)j Fo(is)i(considered)
c(to)j(be)g Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(os)p Fn(/)p Fj(a)p Fn(/)p Ff(\001)c(\001)g(\001)l
Fn(/)p Fl(\002le)p Fn(.cm)p Fo(,)j(which)g(means)g(that\227under)208
3596 y(the)h Fl(usual)f Fo(rules)h(of)g(CM\227)h(the)f(corresponding)d
(stable\002le)j(is)h(going)e(to)h(be)g Fj(u)p Fn(.bin.)p
Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fn(/)p Fj(a)p Fn(/)p Ff(\001)c(\001)g
(\001)m Fn(/CM/)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fn(/)p
Fl(\002le)p Fn(.cm)p Fo(.)208 3695 y(This)20 b(is)h(precisely)e(where)h
Fn(CMB.make)f Fo(created)h(it.)25 b(\(Of)20 b(course,)f(the)h(libary)g
(description)e(\002le)j(itself)g(does)f(not)g(e)o(xist,)g(b)n(ut)g
(this)h(is)208 3795 y(not)e(a)i(problem)d(because)i(the)g(stable\002le)
h(does.\))208 3928 y(The)e(resulting)h(mapping)e(for)i(anchors)f(is)i
(the)f(one)g(that)g(is)h(being)e(sa)n(v)o(ed)h(to)g(the)h(ne)n(wly)e
(generated)g(heap)g(image.)0 4094 y Fp(test:)41 b Fo(After)16
b(generating)e(a)j(ne)n(w)f(heap)g(image)g Fj(v)s Fn(.)p
Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)1901 4064 y Fk(3)1931
4094 y Fo(,)i(the)e Fn(makeml)g Fo(script)g(will)i(cop)o(y)d(the)h
(hierarchy)e(of)j(directories)e(under)208 4193 y Fj(u)p
Fn(.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)20 b Fo(to)j(a)h(ne)n(w)f
(directory)e Fj(v)s Fn(.lib)i Fo(and)g(generate)e(a)j(path)e
(con\002guration)f(\002le)j Fj(v)s Fn(.lib/pathconfig)d
Fo(for)h(it.)208 4293 y(Files)h(in)g(this)h(hierarchy)c(will)j(be)g
(re-created)e(as)j(hard)e(links.)32 b(The)23 b(pre\002x)f
Fj(v)k Fo(can)d(be)g(chosen)e(at)j(the)e(time)h Fn(makeml)g
Fo(is)g(in)m(v)n(ok)o(ed)208 4393 y(\(see)e(section)h(6.1\)\227just)e
(lik)o(e)i Fj(u)g Fo(can)f(be)h(chosen)f(at)h(the)f(time)h
Fn(CMB.make)f Fo(is)h(in)m(v)n(ok)o(ed.)28 b(The)21 b(def)o(ault)g(for)
g Fj(v)k Fo(is)e Fn(sml)p Fo(.)29 b(Cop)o(ying)208 4492
y(the)20 b(directory)e(pre)n(v)o(ents)h(an)o(y)g(future)g
Fn(CMB.make)g Fo(from)g(clobbering)f(the)i(libraries)g(that)g(belong)f
(to)h(the)g(ne)n(wly)g(generated)e(heap)208 4592 y(image.)208
4725 y(Running)29 b(the)i Fn(testml)g Fo(script)g(will)h(start)f(the)g
(runtime)f(system,)k(instruct)c(it)i(to)f(load)g(heap)f(image)h
Fj(v)s Fn(.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)p Fo(,)g(and)208
4824 y(arrange)25 b(for)h(the)g(path)h(con\002guration)d(\002le)j
Fj(v)s Fn(.lib/pathconfig)e Fo(to)h(tak)o(e)h(ef)n(fect.)44
b(This)27 b(will)g(cause)g(an)o(y)f(anchor)f Fj(a)i Fo(to)g(be)208
4924 y(resolv)o(ed)20 b(within)i(the)f Fj(v)s Fn(.lib)h
Fo(hierarchy)-5 b(.)27 b(Thus,)22 b(the)g(ne)n(w)f(system)i(can)e(be)h
(tested)g(in)g(a)g(w)o(ay)g(that)g(is)h(completely)d(independent)208
5024 y(from)f(an)o(y)g(e)o(xisting)h(installation.)k(\(Again,)19
b Fj(v)24 b Fo(can)c(be)g(speci\002ed)g(as)h(a)f(parameter)f(to)h
Fn(testml)p Fo(.\))p 0 5077 1608 4 v 90 5132 a Fi(2)120
5156 y Fh(All)d(relati)n(v)o(e)j(pathnames)f(sho)n(wn)e(here)h(are)g
(relati)n(v)o(e)i(to)d Fg(src/system)p Fh(.)90 5213 y
Fi(3)120 5237 y Fh(As)24 b(mentioned)j(earlier)m(,)j(we)25
b(distinguish)i(between)h Fc(os)c Fh(which)j(describes)f(the)g
Fc(kind)h Fh(of)e(operating)i(system)f(and)f Fc(osname)h
Fh(which)g(is)f(the)h(name)g(of)f(a)g(particular)0 5316
y(operating)19 b(system.)i(F)o(or)c(e)o(xample,)h(on)f(a)g(Linux)h
(machine)g Fc(osname)g Fh(is)f Fg(linux)f Fh(while)i
Fc(os)e Fh(is)h(still)i Fg(unix)p Fh(.)1989 5709 y Fo(8)p
eop
%%Page: 9 10
9 9 bop 0 83 a Fp(install:)41 b Fo(When)23 b(testing)g(has)g(been)f
(satisf)o(actory)-5 b(,)22 b(the)h(ne)n(w)g(system)g(can)g(be)g
(installed)f(permamently)-5 b(,)21 b(replacing)g(the)i(old)g(heap)f
(image)208 183 y(and)k(its)j(old)e(libraries)g(with)g(their)h(ne)n(wly)
e(created)h(counterparts.)44 b(T)-7 b(o)28 b(do)f(so,)i(one)e(should)f
(run)h(the)g Fn(installml)g Fo(script.)46 b(It)208 282
y(will)26 b(mo)o(v)o(e)e(the)i(heap)e(image)h Fj(v)s
Fn(.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)f Fo(to)i Fn
(../../bin/.heap/sml.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osna)o(me)20
b Fo(and)25 b(all)h(stable\002les)h(from)208 382 y Fj(v)s
Fn(.lib)e Fo(to)g(their)g(usual)g(place)g(under)f Fn(../../lib)p
Fo(.)39 b(It)25 b(then)g(proceeds)e(to)j(edit)f Fn
(../../lib/pathconfig)d Fo(\(the)j(main)208 482 y(path)30
b(con\002guration)e(\002le)k(of)f(the)f(installation\))h(to)g
(re\003ect)g(the)g(ne)n(w)f(situation.)57 b(\(Library)29
b(\002les)j(in)f Fn(../../lib)f Fo(that)h(ha)n(v)o(e)208
581 y(nothing)18 b(to)i(do)g(with)h(the)f(bootstrap)e(process)i(will)h
(remain)e(untouched.\))0 911 y Fq(6)119 b(Scripts)0 1147
y Fo(This)19 b(section)g(gi)n(v)o(es)f(a)i(detailed)e(description)g
(for)g(each)h(script,)g(its)h(function,)d(and)i(its)h(options.)j(All)d
(scripts)f(described)f(here)g(are)h(located)0 1246 y(in)h(the)h
Fn(src/system)d Fo(directory)-5 b(.)1044 1216 y Fk(4)0
1534 y Fm(6.1)99 b(The)26 b Fb(makeml)e Fm(script)0 1739
y Fo(This)19 b(script)g(is)h(used)f(after)g(a)g(successful)g(run)f(of)h
Fn(CMB.make)f Fo(\(or)g Fn(CMB.make')p Fo(\).)23 b(It)c
Fl(links)h Fo(the)f(compiler)e(and)i(its)h(interacti)n(v)o(e)e(system,)
0 1839 y(forming)h(a)j(corresponding)c(heap)i(image.)27
b(In)21 b(addition)f(to)i(that,)f(it)h(prepares)e(a)h(ne)n(w)g
(directory)f(containing)f(stable)j(CM)f(libraries)g(to)h(be)0
1938 y(used)e(with)g(the)h(ne)n(w)f(image.)0 2088 y(One)j(w)o(ay)g(of)g
(thinking)e(about)h(this)i(is)g(to)f(vie)n(w)g Fn(makeml)f
Fo(as)i(a)g(function)d(mapping)g(a)j(boot\002le)e(directory)f
Fj(b)j Fo(to)f(a)g(pair)g(consisting)f(of)h(a)0 2187
y(heap)e(image)f Fj(v)s Fn(.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(osname)f Fo(and)i(a)h(library)e(directory)f Fj(v)s
Fn(.lib)p Fo(.)29 b(The)20 b(strings)i Fj(b)f Fo(and)g
Fj(v)k Fo(are)c(optional)f(parameters;)h(the)g(def)o(aults)g(are)0
2287 y Fn(sml.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)d
Fo(for)h Fj(b)h Fo(and)g Fn(sml)g Fo(for)g Fj(v)s Fo(.)0
2436 y(The)g(script)g(accepts)g(a)h(number)d(of)i(options)f(as)i(follo)
n(ws:)0 2669 y Fp(-o)f Fj(v)45 b Fo(speci\002es)20 b(a)h
Fj(v)j Fo(other)19 b(than)h(the)g(def)o(ault)g Fn(sml)p
Fo(.)0 2835 y Fp(-boot)f Fj(b)41 b Fo(speci\002es)21
b(a)g Fj(b)f Fo(other)f(than)h(the)g(def)o(ault)g Fn(sml.boot.)p
Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fo(.)0 3001 y Fp(-quiet)41
b Fo(instructs)27 b Fn(makeml)g Fo(to)h(greatly)e(reduce)h(its)h
(diagnostic)e(output.)46 b(In)27 b(particular)m(,)g(the)h(names)f(of)g
(\002les)h(being)f(link)o(ed)g(are)g(not)208 3101 y(sho)n(wn.)d(The)19
b(def)o(ault)g(for)g(this)h(can)f(be)h(controlled)e(via)i(a)g
(boolean-v)n(alued)c(en)m(vironment)g(v)n(ariable)j Fn(MAKEML)p
3452 3101 25 4 v 28 w(VERBOSITY)p Fo(.)g(If)208 3200
y(the)h(v)n(ariable)f(is)i(not)f(set,)h(then)e(the)i(def)o(ault)e(is)i
Fn(true)f Fo(\(meaning)e(\223v)o(erbose\224\).)0 3366
y Fp(-v)o(erbose)40 b Fo(is)22 b(the)e(opposite)f(of)h
Fn(-quiet)p Fo(.)0 3532 y Fp(-r)o(eb)n(uild)h Fj(u)41
b Fo(puts)24 b Fn(makeml)g Fo(into)g(a)h(dif)n(ferent)e(mode:)32
b(After)24 b(loading)f(the)i(e)o(x)o(ecutable)d(section)i(of)h(all)f
(bin\002les)h(and)f(linking)f(them,)i(it)208 3632 y(will)h(not)f(read)h
(an)o(y)e(static)j(en)m(vironments,)d(will)j(not)e(initialize)h(the)g
(usual)f(interacti)n(v)o(e)f(system)i(and)g(will)g(not)f(produce)f(a)i
(heap)208 3732 y(image.)37 b(Instead,)25 b(it)g(internally)f(in)m(v)n
(ok)o(es)f(the)i(equi)n(v)n(alent)e(of)h Fn(CMB.make')48
b(\(SOME)h(")p Fj(u)p Fn("\))p Fo(,)25 b(thus)g(recompiling)d(e)n(v)o
(erything)208 3831 y(again.)43 b(When)27 b(recompilation)d(is)k
(complete,)f Fn(makeml)f Fo(stops;)31 b(the)c(ne)n(wly-b)n(uilt)e
(system)i(must)g(be)g(link)o(ed)f(using)g(a)h(separate)208
3931 y(e)o(xplicit)19 b(in)m(v)n(ocation)f(of)i Fn(makeml)p
Fo(.)25 b(Notice)20 b(that)g Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)e Fo(must)i(be)g(dif)n(ferent)f(from)g Fj(b)p
Fo(.)0 4097 y Fp(-r)o(eb)n(uildlight)h Fj(u)41 b Fo(is)16
b(the)g(same)f(as)h Fn(-rebuild)49 b Fj(u)15 b Fo(e)o(xcept)g(that)g
(the)g(symbol)g Fn(LIGHT)g Fo(will)h(be)f(de\002ned)g(\(using)f
Fn(CMB.symval)p Fo(\))g(for)h(the)208 4197 y(duration)j(of)j(the)f
(compilation.)k(The)d(ef)n(fect)f(of)g(this)h(is)h(that)e(no)g
(cross-compilers)f(will)i(be)g(b)n(uilt)g(\(which)e(can)i(sa)n(v)o(e)f
(considerable)208 4296 y(time\).)k(Alternati)n(v)o(e)19
b(names)h(for)g Fp(-r)o(eb)n(uildlight)g Fo(are)g Fp(-light)g
Fo(and)f Fp(-lightr)o(eb)n(uild)p Fo(.)0 4462 y Fp(-bar)o(e)40
b Fo(causes)24 b Fn(makeml)f Fo(to)g(b)n(uild)h(a)g(reduced)d(v)o
(ersion)i(of)g(the)g(system)h(without)f(the)h(compilation)d(manager)h
(CM)i(included.)34 b(This)24 b(is)208 4562 y(useful)19
b(for)h(people)f(who)h(are)g(interested)f(in)i(an)f(interacti)n(v)o(e)f
(system)h(only)-5 b(.)0 4728 y Fp(-run)21 b Fj(r)44 b
Fo(selects)21 b(the)f(e)o(x)o(ecutable)e(for)i(the)g(SML/NJ)h(runtime)e
(system.)25 b(The)20 b(def)o(ault)f(is)j(../../bin/.run/run.)p
Fl(ar)m(c)o(h)p Fo(-)o Fl(osna)o(me)p Fo(.)0 4894 y Fp(-alloc)d
Fj(a)42 b Fo(speci\002es)19 b(the)f(size)i(of)e(the)h(SML/NJ)g
(garbage-collector')-5 b(s)15 b(allocation)i(area.)24
b(The)19 b(def)o(ault)f(depends)f(on)h(the)g(current)g(machine)208
4994 y(architecture.)0 5226 y(The)d(most)h(common)e(usage)i(is)g(to)g
(simply)g(say)g Fn(./makeml)f Fo(without)g(an)o(y)g(ar)o(guments,)f
(taking)h(adv)n(antage)f(of)h(the)h(def)o(aults)f(as)i(described)0
5326 y(abo)o(v)o(e.)p 0 5379 1608 4 v 90 5434 a Fi(4)120
5458 y Fh(If)f(the)i(current)h(directory)g Fg(.)i Fh(is)c(not)g(on)g
(the)h(shell')l(s)g(search)g(path,)g(then)g(each)g(script)g(must)f(be)h
(in)m(v)o(ok)o(ed)g(using)g(an)f(e)o(xplicit)j Fg(./)p
Fh(-pre\002x.)h(Example:)h Fg(./makeml)p Fh(.)1989 5709
y Fo(9)p eop
%%Page: 10 11
10 10 bop 0 83 a Fm(6.2)99 b(The)26 b Fb(testml)e Fm(script)0
289 y Fo(The)18 b Fn(testml)g Fo(script)g(launches)g(a)h(ne)n(wly-b)n
(uilt)e(and)g(ne)n(wly-link)o(ed)g(interacti)n(v)o(e)g(system.)24
b(It)19 b(requires)e(a)i(pre)n(vious)e(run)h(of)g(the)g
Fn(makeml)0 388 y Fo(script)i(because)g(it)h(uses)f(the)h(heap)e(image)
h Fj(v)s Fn(.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)e Fo(and)h(libraries)h
(in)h Fj(v)s Fn(.lib)p Fo(.)0 538 y(If)h(no)g(ar)o(guments)e(are)i(gi)n
(v)o(en,)g Fj(v)k Fo(def)o(aults)21 b(to)i Fn(sml)p Fo(.)31
b(If)22 b(at)h(least)g(one)e(ar)o(gument)f(is)k(gi)n(v)o(en,)d(then)h
Fj(v)k Fo(is)d(assumed)f(to)g(be)g(the)g(\002rst)h(one.)31
b(All)0 637 y(other)25 b(ar)o(guments)f(are)h(passed)h(to)g(the)g
(initialization)f(routine)f(of)i(the)g(interacti)n(v)o(e)e(system)i
(just)h(lik)o(e)f(normal)e(ar)o(guments)g(to)i(the)g
Fn(sml)0 737 y Fo(command)18 b(w)o(ould.)0 886 y(This)i(means)g(that)h
(one)e Fl(must)i Fo(specify)e(a)i Fj(v)j Fo(unless)c(there)g(are)g(no)g
(command-line)d(ar)o(guments)h(at)j(all.)0 1174 y Fm(6.3)99
b(The)26 b Fb(installml)d Fm(script)0 1379 y Fo(The)e
Fn(installml)f Fo(script)i(mo)o(v)o(es)e(a)i(heap)f(image)g
Fj(v)s Fn(.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)e Fo(to)j
Fn(../../bin/.heap/sml.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(osname)o
Fo(.)i(Moreo)o(v)o(er)m(,)0 1479 y(it)d(mo)o(v)o(es)e(the)h(libraries)g
(under)f Fj(v)s Fn(.lib)h Fo(to)g Fn(../../lib)f Fo(and)h(updates)f
Fn(../../lib/pathconfig)e Fo(accordingly)-5 b(.)0 1628
y(The)20 b(script)g(tak)o(es)h(one)e(optional)g(ar)o(gument)f(which)i
(speci\002es)g Fj(v)s Fo(.)26 b(If)20 b(no)g(ar)o(gument)e(is)j(gi)n(v)
o(en,)d Fj(v)24 b Fo(def)o(aults)c(to)h Fn(sml)p Fo(.)0
1916 y Fm(6.4)99 b(The)26 b Fb(fixpt)e Fm(script)0 2121
y Fo(One)f(good)f(test)i(of)f(whether)f(a)i(ne)n(w)f(v)o(ersion)f(of)h
(the)g(compiler)f(is)i(w)o(orking)e(properly)f(is)j(to)g(see)g(if)f(it)
h(compiles)f(to)g(a)h Fl(\002xed)f(point)p Fo(.)33 b(F)o(or)0
2221 y(this,)20 b(the)f(compiler)f(is)i(compiled)e Fj(n)i
Fo(times)g(with)f(the)g(result)h(of)f(the)g Fa(\()p Fj(k)f
Ff(\000)d Fa(1\))p Fo(st)20 b(compilation)e(being)g(responsible)g(for)h
(compiling)e(the)j Fj(k)s Fo(th)0 2320 y(v)o(ersion.)k(A)c(\002x)o(ed)g
(point)f(is)i(reached)e(if)i(tw)o(o)f(consecuti)n(v)o(e)f(compilations)
f(produce)h(identical)g(results.)0 2470 y(The)28 b Fn(fixpt)g
Fo(script)h(automates)f(the)g(task)h(of)g(compiling)d(to)j(a)g(\002x)o
(ed)f(point.)49 b(It)29 b(internally)f(uses)h(the)f Fn(sml)h
Fo(command)d(for)i(the)h(\002rst)0 2570 y(compilation)j(and)h(the)g
Fn(makeml)g Fo(script)h(with)f(its)i Fn(-rebuild)d Fo(parameter)g(for)h
(all)h(subsequent)e(runs.)65 b(This)33 b(produces)f(a)i(series)0
2669 y(of)c(bin-directories)e Fj(u)p Fn(.bin.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fo(,)i Fj(u)p Fn(1.bin.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fo(,)f Fj(u)p Fn(2.bin.)p Fl(ar)m(c)o(h)p
Fn(-)p Fl(os)p Fo(,)p Fj(:)14 b(:)g(:)27 b Fo(and)j(boot-directories)d
Fj(u)p Fn(.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p Fo(,)0
2769 y Fj(u)p Fn(1.boot.)p Fl(ar)m(c)o(h)p Fn(-)p Fl(os)p
Fo(,)17 b Fj(u)p Fn(2.boot.)p Fl(ar)m(c)o(h)p Fn(-)p
Fl(os)p Fo(,)p Fj(:)d(:)g(:)j Fo(where)j Fj(u)g Fo(is)h(a)g(common)d
(\223stem\224)j(that)f(is)h(used)f(for)f(naming)g(the)h(whole)g
(series.)0 2918 y(The)g Fn(fixpt)g Fo(script)g(accepts)g(the)g(follo)n
(wing)f(options:)0 3151 y Fp(-iter)h Fj(n)41 b Fo(limits)18
b(the)g(number)e(of)h(iterations)g(to)g Fj(n)p Fo(.)25
b(The)17 b(def)o(ault)g(for)f Fj(n)i Fo(is)h(3.)24 b(If)17
b(no)g(\002x)o(ed)g(point)g(is)h(found)e(after)h Fj(n)h
Fo(iterations,)f(then)g Fn(fixpt)208 3250 y Fo(terminates)i(with)i(an)f
(error)f(message.)0 3416 y Fp(-base)h Fj(u)41 b Fo(selects)21
b(the)g(\223stem\224)f Fj(u)g Fo(\(see)h(abo)o(v)o(e\).)h(The)e(def)o
(ault)g(is)h Fn(sml)p Fo(.)0 3582 y Fp(-light)41 b Fo(causes)20
b Fn(LIGHT)g Fo(to)g(be)g(de\002ned)g(during)e(compilation.)23
b(\(See)e(the)f(discussion)f(of)h Fn(makeml)p Fo(')-5
b(s)20 b Fn(-rebuildlight)f Fo(option.\))0 3815 y(F)o(ailure)h(to)g
(reach)g(a)g(\002x)o(ed)g(point)f(after)h(2)g(iterations)g(usually)g
(indicates)g(some)g(serious)g(problem)e(within)i(the)g(compiler)-5
b(.)0 4102 y Fm(6.5)99 b(The)26 b Fb(allcross)d Fm(script)0
4308 y Fo(Finally)-5 b(,)21 b(the)g Fn(allcross)f Fo(script)h(is)h
(handy)d(for)i(b)n(uilding)f(bin-)g(and)h(boot-\002les)f(for)g(all)i
(architectures.)k(The)21 b(script)g(currently)f(tak)o(es)h(no)0
4407 y(ar)o(guments)i(and)h(compiles)h(\(and)f(cross-compiles\))f(for)h
(6)h(supported)e(combinations)g(of)i Fl(ar)m(c)o(h)f
Fo(and)h Fl(os)p Fo(:)35 b Fn(alpha32-unix)p Fo(,)24
b Fn(hppa-)0 4507 y(unix)p Fo(,)c Fn(ppc-unix)p Fo(,)f
Fn(sparc-unix)p Fo(,)f Fn(x86-unix)p Fo(,)h(and)h Fn(x86-win32)p
Fo(.)1968 5709 y(10)p eop
%%Page: 11 12
11 11 bop 0 83 a Fq(Refer)n(ences)0 302 y Fo([AM91])164
b(Andre)n(w)25 b(W)-8 b(.)27 b(Appel)e(and)h(Da)n(vid)g(B.)g(MacQueen.)
47 b(Standard)24 b(ML)j(of)e(Ne)n(w)h(Jerse)o(y)-5 b(.)47
b(In)26 b(Martin)g(W)m(irsing,)h(editor)m(,)f Fl(3r)m(d)438
401 y(International)14 b(Symp.)i(on)f(Pr)l(o)o(g)o(.)h(Lang)o(.)f
(Implementation)f(and)i(Lo)o(gic)g(Pr)l(o)o(gr)o(amming)p
Fo(,)f(pages)h(1\22613,)g(Ne)n(w)g(Y)-9 b(ork,)16 b(August)438
501 y(1991.)j(Springer)n(-V)-9 b(erlag.)0 667 y([Blu00])178
b(Matthias)32 b(Blume.)65 b(CM:)32 b(The)f(SML/NJ)h(compilation)e(and)g
(library)h(manager)-5 b(.)63 b(Manual)31 b(accompan)o(ying)d(SML/NJ)438
767 y(softw)o(are,)20 b(2000.)0 933 y([MTHM97])39 b(Robin)20
b(Milner)m(,)g(Mads)g(T)-7 b(ofte,)21 b(Robert)f(Harper)m(,)f(and)h(Da)
n(vid)g(MacQueen.)29 b Fl(The)21 b(De\002nition)e(of)i(Standar)m(d)e
(ML)i(\(Re)o(vised\))p Fo(.)438 1032 y(MIT)f(Press,)h(Cambridge,)d(MA,)
j(1997.)1968 5709 y(11)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
