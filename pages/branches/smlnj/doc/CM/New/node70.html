<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>11.2.4 Adding a classifier</TITLE>
<META NAME="description" CONTENT="11.2.4 Adding a classifier">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node71.html">
<LINK REL="previous" HREF="node69.html">
<LINK REL="up" HREF="node66.html">
<LINK REL="next" HREF="node71.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html1149"
 HREF="node71.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1145"
 HREF="node66.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1139"
 HREF="node69.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html1147"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html1150"
 HREF="node71.html">11.2.5 Miscellaneous</A>
<B> Up:</B> <A NAME="tex2html1146"
 HREF="node66.html">11.2 Adding other classes</A>
<B> Previous:</B> <A NAME="tex2html1140"
 HREF="node69.html">11.2.3 Reporting errors from</A>
 &nbsp <B>  <A NAME="tex2html1148"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION000122400000000000000">
11.2.4 Adding a classifier</A>
</H3>

<P>
A classifier is a mechanism that enables CM to infer a member's class
from its name.  Classifiers are invoked if no explicit class was
given.  CM supports two kinds of classifiers: suffix classifiers and
general classifiers.

<P>
 
<PRE>

  datatype classifier =
      SFX_CLASSIFIER of string -&gt; class option
    | GEN_CLASSIFIER of { name: string, mkfname: unit -&gt; string } -&gt;
                        class option
</PRE>

<P>
Most of the time classifiers look at the file name suffix as their only
clue.  This idea is captured by <TT> SFX_CLASSIFIER</TT> which carries a
partial function from suffixes to class names.  The function should
return <TT> NONE</TT> if it does not know about the given argument suffix.

<P>
The <TT> GEN_CLASSIFIER</TT> constructor carries a similar function--the
difference being that the entire member name is passed to it.
Moreover, the function can also invoke the <TT> mkfname</TT> argument to
obtain a native filename string.  This string can at this point be
used to perform actual filesystem operations.

<P>
Invocation of <TT> mkfname</TT> may raise exceptions, usually due to
syntax errors in <TT> name</TT> that prevent it from being interpreted as
a filename.  Tools that use <TT> mkfname</TT> should therefore be prepared
to handle such exceptions.

<P>
Moreover, it is advisable not to over-use this feature, and not to
perform extensive filesystem processing in order to perform
classification.  Otherwise the presence of this classifier might cause
considerable overhead.

<P>
By the way, suffix classifiers could be implemented as general
classifiers, but using <TT> SFX_CLASSIFIER</TT> for them is slightly more
efficient.  CM extracts the suffix from the name only once and applies
all suffix classifier before ever considering any generic classifier.
If some suffix classifier succeeds, there will be no overhead caused
by any generic classifier.

<P>
Function <TT> Tools.stdSfxClassifier</TT> is a simple wrapper around <TT> 
SFX_CLASSIFIER</TT> and produces a classifier that looks for precisely
one suffix string.

<P>
 
<PRE>

  val stdSfxClassifier : { sfx: string , class: class } -&gt; classifier
</PRE>

<P>
Classifiers are registered with CM by invoking <TT> 
Tools.registerClassifier</TT>:

<P>
 
<PRE>

  val registerClassifier : classifier -&gt; unit
</PRE>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html1149"
 HREF="node71.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1145"
 HREF="node66.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1139"
 HREF="node69.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html1147"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html1150"
 HREF="node71.html">11.2.5 Miscellaneous</A>
<B> Up:</B> <A NAME="tex2html1146"
 HREF="node66.html">11.2 Adding other classes</A>
<B> Previous:</B> <A NAME="tex2html1140"
 HREF="node69.html">11.2.3 Reporting errors from</A>
 &nbsp <B>  <A NAME="tex2html1148"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Matthias Blume</I>
<BR><I>2001-07-19</I>
</ADDRESS>
</BODY>
</HTML>
