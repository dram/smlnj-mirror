%!PS-Adobe-2.0
%%Creator: dvipsk 5.66a Copyright 1986-97 Radical Eye Software (www.radicaleye.com)
%%Title: gc-api.dvi
%%Pages: 6
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Courier Times-Italic
%%EndComments
%DVIPSCommandLine: dvips gc-api
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 1999.05.21:1231
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{dup length product length le{dup length product
exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}
ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false RMat{BDot}
imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1 false
RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform round
exch round exch itransform moveto rulex 0 rlineto 0 ruley neg rlineto
rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail{dup
/delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}B /d{
-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}
B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B
/bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont cvx]cvx def}def /ObliqueSlant
{dup sin S cos div neg}B /SlantFont{4 index mul add}def /ExtendFont{3 -1
roll mul exch}def /ReEncodeFont{/Encoding exch def}def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (gc-api.dvi)
@start /Fa 134[37 1[55 1[42 23 32 32 1[42 42 42 60 23
2[23 42 42 1[37 42 37 1[42 19[69 9[55 1[51 18[21 28 45[{
TeXBase1Encoding ReEncodeFont}23 83.022 /Times-Italic
rf /Fb 139[33 39 44 1[55 50 55 83 28 2[28 55 50 1[44
55 44 1[50 16[61 8[78 3[72 11[50 3[50 50 50 2[25 33 42[55
2[{TeXBase1Encoding ReEncodeFont}25 99.6264 /Times-Bold
rf /Fc 130[45 1[45 2[45 1[45 45 45 45 45 45 45 45 45
45 45 45 45 45 45 45 45 45 45 45 45 45 1[45 12[45 2[45
2[45 4[45 3[45 4[45 45 45 1[45 45 5[45 45 45 45 1[45
45 45 2[45 45 40[{TeXBase1Encoding ReEncodeFont}45 74.7198
/Courier rf
%DVIPSBitmapFont: Fd cmsy7 7 1
/Fd 1 1 df<FFFFFFFFFEFFFFFFFFFEFFFFFFFFFE27037A8F34>0
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmr10 10 1
/Fe 1 55 df<00003FC0000001FFF0000007FFFC00000FE03E00003F800700007E001F00
00FC003F8001F8007F8003F0007F8003F0007F8007E0007F800FE0003F000FC0001E001F
C00000001FC00000003F800000003F800000003F800000007F800000007F000000007F01
FC00007F07FF8000FF1E07E000FF3801F000FF7000F800FF6000FC00FFE0007E00FFC000
3F00FFC0003F00FF80003F80FF80003FC0FF80001FC0FF80001FC0FF00001FE0FF00001F
E0FF00001FE0FF00001FE0FF00001FE07F00001FE07F00001FE07F00001FE07F00001FE0
7F00001FE03F80001FE03F80001FC03F80001FC01F80001FC01F80003F801FC0003F800F
C0003F0007E0007F0007E000FE0003F000FC0001F801F80000FE07F000003FFFC000001F
FF00000003FC0000233A7DB72A>54 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff cmsy10 10 4
/Ff 4 22 df<7FFFFFFFFFFF80FFFFFFFFFFFFC0FFFFFFFFFFFFC07FFFFFFFFFFF803204
799641>0 D<1C007F00FF80FF80FF80FF80FF807F001C000909799917>I<000FE000007F
FC0000FFFE0003FFFF8007FFFFC00FFFFFE01FFFFFF03FFFFFF83FFFFFF87FFFFFFC7FFF
FFFC7FFFFFFCFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFF
FFFE7FFFFFFC7FFFFFFC7FFFFFFC3FFFFFF83FFFFFF81FFFFFF00FFFFFE007FFFFC003FF
FF8000FFFE00007FFC00000FE0001F207BA42A>15 D<60000000000000F8000000000000
FE0000000000007F8000000000003FE000000000000FF8000000000003FE000000000000
FF8000000000003FE000000000000FF8000000000003FE000000000000FF800000000000
3FE000000000000FF8000000000003FE000000000000FF8000000000003FE00000000000
0FF8000000000003FE000000000000FF8000000000003FE000000000000FF80000000000
03FE000000000000FF8000000000003FC000000000001FC000000000007F800000000001
FF000000000007FC00000000001FF000000000007FC00000000001FF000000000007FC00
000000001FF000000000007FC00000000001FF000000000007FC00000000001FF0000000
00007FC00000000001FF000000000007FC00000000001FF000000000007FC00000000001
FF000000000007FC00000000001FF000000000007FC00000000000FF000000000000FC00
000000000070000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
00007FFFFFFFFFFF80FFFFFFFFFFFFC0FFFFFFFFFFFFC07FFFFFFFFFFF80324479B441>
21 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmmi10 10 4
/Fg 4 115 df<00007E00000003FF8000000FC1C380001F00EFC0007E007FC000FC003F
C001F8003FC003F0001F8007F0001F8007E0001F800FE0003F801FC0003F001FC0003F00
3F80003F003F80007F007F80007E007F00007E007F00007E007F0000FE00FF0000FC00FE
0000FC00FE0000FC00FE0001FC00FE0001F800FC0001F80CFC0001F80CFC0003F80CFC00
03F01CFC0003F018FC0007F0187C0007F0387E000FF0303E001FF0303E007BF0701F00E1
F0E00F83C0F9C003FF007F8000FC001F0026267DA42C>97 D<000007E00000001FF80000
007C1C380001F80EFC0003F007FC0007E003FC000FC003FC001F8001FC003F0001F8007F
0001F8007E0003F800FE0003F800FE0003F001FC0003F001FC0007F003FC0007F003F800
07E003F80007E003F8000FE007F8000FE007F0000FC007F0000FC007F0001FC007F0001F
C007E0001F8007E0001F8007E0003F8007E0003F8007E0003F0003E0007F0003F000FF00
01F001FF0001F003FE0000F8077E00007C1EFE00001FF8FE000007E0FC00000000FC0000
0001FC00000001FC00000001F800000001F800000003F8001E0003F0003F0003F0007F80
07F0007F8007E000FF800FC000FF001F8000FE003F00007C007E00003C01F800001FFFE0
000003FF00000026367FA428>103 D<03E0007F000007F801FFE0000E3C0781F0001C3E
1E00F800383F3800FC00303F7000FC00303FE0007C00703FC0007C00603F80007C00603F
80007C00E03F0000FC00C07F0000FC00C07E0000FC00C07E0000FC00007E0001FC0000FE
0001F80000FC0001F80000FC0001F80000FC0003F80001FC0003F00001F80003F00001F8
0007F00001F80007E00003F80007E00003F0000FE03003F0000FC03003F0001FC07007F0
001F806007E0001F806007E0001F80E007E0001F00C00FE0001F01C00FC0001F01800FC0
001F03800FC0001F07001FC0000F0E001F800007FC0007000001F0002C267EA432>110
D<03E001F80007F807FE000E3C1E07001C3E381F00183F703F80383FE07F80303FC0FF80
703F80FF80603F80FF00603F007E00603F003C00E07F000000C07E000000C07E00000000
7E00000000FE00000000FC00000000FC00000000FC00000001FC00000001F800000001F8
00000001F800000003F800000003F000000003F000000003F000000007F000000007E000
000007E000000007E00000000FE00000000FC00000000FC00000000FC00000001FC00000
001F80000000070000000021267EA425>114 D E
%EndDVIPSBitmapFont
/Fh 130[50 1[50 1[50 50 1[50 50 50 50 50 1[50 50 50 50
50 50 1[50 50 50 50 50 50 50 50 50 1[50 12[50 2[50 2[50
4[50 3[50 10[50 6[50 50 50 50 50 50 2[50 50 40[{
TeXBase1Encoding ReEncodeFont}39 83.022 /Courier rf
%DVIPSBitmapFont: Fi cmmi7 7 3
/Fi 3 111 df<387CFEFEFE7C3807077A8614>58 D<003FFC0000003FFC003FFC000000
7FFC0001FC000000FF000001BE000000FE000001BE000001BE000003BE0000037E000003
BE0000037C0000033E0000067C0000033E00000C7C0000071F00000CFC0000071F000018
F80000061F000030F80000061F000030F800000E1F000061F800000E1F0000C1F000000C
0F8000C1F000000C0F800181F000001C0F800303F000001C0F800303E00000180F800603
E00000180F800C03E00000380F800C07E000003807C01807C000003007C03007C0000030
07C03007C000007007C0600FC000007007C0C00F8000006007C0C00F8000006003E1800F
800000E003E3001F800000E003E3001F000000C003E6001F000000C003EC001F000001C0
03EC003F000001C001F8003E0000018001F0003E000003C001F0003E000007C001E0007E
0000FFFC01C01FFFF000FFFC00C01FFFF0003E287CA73F>77 D<07801FC0000FE07FF000
18F0E0F80030F1807C0030FB007C0060FE003C0060FC003C0060F8003C00C1F8007C00C1
F0007C0001F0007C0001F0007C0003E000F80003E000F80003E000F80003E001F00007C0
01F00007C001F06007C003E06007C003E0600F8007C0C00F8007C0C00F8007C1800F8003
C3001F0003C7001F0001FE000E0000F800231B7D9929>110 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmr7 7 7
/Fj 7 56 df<003F800001FFF00003E0F80007803C000F001E001E000F003E000F803E00
0F803C0007807C0007C07C0007C07C0007C07C0007C0FC0007E0FC0007E0FC0007E0FC00
07E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC00
07E0FC0007E07C0007C07C0007C07C0007C03E000F803E000F803E000F801F001F000F00
1E0007803C0003E0F80001FFF000003F80001B277EA521>48 D<00380000780001F8001F
F800FEF800E0F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000
F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000
F80000F80000F80000F80000F80000F80000F80000F80001FC00FFFFF8FFFFF815267BA5
21>I<00FF000003FFE0000E03F0001800F80030007C0060007E0078003F00FC003F00FE
001F80FE001F80FE001F80FE001F807C001F8000001F8000001F0000003F0000003E0000
007E0000007C000000F8000001F0000003E0000003C00000078000000E0000001C000000
3800000070018000E001800180018003000300060003000C0003001FFFFF003FFFFF007F
FFFE00FFFFFE00FFFFFE0019267DA521>I<00FF000003FFE0000F01F8001C007C003000
7E003C003E007E003F007E003F007E003F007E003F003C003F0000003E0000007E000000
7C000000F8000001F0000007E00001FF800001FF00000001E0000000F00000007C000000
3E0000003F0000001F0000001F8000001F8038001F807C001F80FE001F80FE001F80FE00
1F00FC003F0078003E0070007C003800F8001F01F00007FFC00000FF000019277DA521>
I<0000380000003800000078000000F8000001F8000001F8000003F8000007F8000006F8
00000CF800001CF8000018F8000030F8000070F8000060F80000C0F80001C0F8000180F8
000300F8000700F8000E00F8000C00F8001C00F8003800F8003000F8006000F800E000F8
00FFFFFFE0FFFFFFE00000F8000000F8000000F8000000F8000000F8000000F8000000F8
000001FC00003FFFE0003FFFE01B277EA621>I<000FE000003FF80000F81C0001E00600
03C01F0007803F000F003F001F003F001E003F003E001E003E0000007C0000007C000000
7C0400007C3FC000FCFFF000FDC07800FF003C00FF003E00FE001E00FE001F00FE001F00
FC001F80FC001F80FC001F80FC001F807C001F807C001F807C001F807C001F803C001F00
3E001F001E001E001E003E000F003C000780780003C1F00001FFC000007F000019277DA5
21>54 D<300000003C0000003FFFFFE03FFFFFE03FFFFFC07FFFFF807FFFFF8070000700
60000E0060000C00C0001C00C0003800C00070000000E0000000C0000001C00000038000
0003800000070000000F0000000E0000001E0000001E0000001E0000003E0000003C0000
003C0000007C0000007C0000007C0000007C000000FC000000FC000000FC000000FC0000
00FC000000FC000000FC000000FC0000007800001B287DA621>I
E
%EndDVIPSBitmapFont
/Fk 140[32 2[42 1[42 4[23 1[42 1[37 1[37 1[37 51[28 45[{
.167 SlantFont TeXBase1Encoding ReEncodeFont}9 83.022
/Times-Roman rf /Fl 134[42 1[60 1[46 28 32 37 1[46 42
46 69 3[23 46 42 28 37 46 37 1[42 10[60 2[46 60 3[60
2[65 6[60 60 1[60 1[42 4[28 2[42 3[42 42 42 2[21 2[47
5[83 37[{TeXBase1Encoding ReEncodeFont}35 83.022 /Times-Bold
rf /Fm 135[60 1[60 66 40 47 53 2[60 66 100 33 2[33 66
60 40 53 66 53 1[60 13[66 86 1[73 6[47 1[93 1[80 1[86
1[86 8[60 60 60 60 60 60 60 60 3[40 45[{TeXBase1Encoding ReEncodeFont}
35 119.552 /Times-Bold rf /Fn 104[83 42 2[37 24[37 42
42 60 42 42 23 32 28 42 42 42 42 65 23 42 23 23 42 42
28 37 42 37 42 37 3[28 1[28 1[60 1[78 60 60 51 46 55
1[46 60 60 74 51 60 32 28 60 60 46 51 60 55 55 60 5[23
23 42 42 42 42 42 42 42 42 42 42 23 21 28 21 47 1[28
28 28 1[69 33[46 46 2[{TeXBase1Encoding ReEncodeFont}77
83.022 /Times-Roman rf /Fo 134[50 2[50 50 28 39 33 2[50
50 78 28 2[28 1[50 1[44 1[44 50 44 14[66 3[72 89 61 1[39
1[72 72 4[66 72 7[50 50 50 2[50 1[50 50 50 3[25 44[{
TeXBase1Encoding ReEncodeFont}33 99.6264 /Times-Roman
rf /Fp 139[40 1[48 2[72 72 1[40 2[40 1[72 1[64 1[64 72
64 13[80 2[80 1[104 128 88 1[56 48 1[104 5[104 6[40 58[{
TeXBase1Encoding ReEncodeFont}21 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 1005 789 a Fp(SMLNJ:)34 b(Garbage)f(collection)h(API)1722
1029 y Fo(Lal)25 b(Geor)n(ge)1523 1146 y(Rm)g(2c478,)g(Bell)g(Labs)1575
1262 y(700)f(Mountain)g(A)-7 b(v)o(e)1490 1378 y(Murray)25
b(Hill,)f(NJ)g(07974)1669 1572 y(May)g(21,)h(1999)83
1884 y Fn(This)g(note)f(describes)h(the)f(garbage)f(collection)h
(interf)o(ace)g(to)0 1984 y(the)k(runtime)e(system)i(implemented)e(in)i
(v)o(ersion)f(110.15.)45 b(All)0 2084 y(communication)24
b(to)j(the)g(runtime)e(system)i(is)h(through)c(a)k(\002x)o(ed)0
2183 y(set)f(of)f(re)o(gisters.)42 b(An)o(ything)24 b(e)o(xtra)i(must)g
(be)g(b)n(undled)f(up)g(and)0 2283 y(sa)n(v)o(ed)h(in)g(one)g(of)g
(these)g(\002x)o(ed)f(re)o(gisters.)43 b(This)26 b(simpli\002es)h(the)0
2383 y(runtime)h(system)i(signi\002cantly)-5 b(,)31 b(reduces)d(the)i
(ML)g(to)f(C)i(con-)0 2482 y(te)o(xt)16 b(switch)h(o)o(v)o(erhead,)e
(and)h(barely)f(increases)i(the)f(size)h(of)g(code)0
2582 y(generated)g(to)i(in)m(v)n(ok)o(e)f(garbage)e(collection.)24
b(The)18 b(net)h(result)g(is)g(a)0 2681 y(4\045)25 b(impro)o(v)o(ement)
d(in)k(compiling)d(the)i(compiler)f(on)h(the)g(DEC)0
2781 y(Alpha.)0 3067 y Fm(1)119 b(CPS)31 b(functions)0
3255 y Fn(There)24 b(are)h(three)g(kinds)g(of)g(CPS)h(functions)e
(generated)f(by)i(the)0 3355 y(SML/NJ)c(compiler)-5 b(.)0
3524 y Fl(Standard:)40 b Fn(corresponds)22 b(to)h(functions)g(e)o
(xported)e(by)i(a)h(mod-)166 3624 y(ule.)0 3794 y Fl(Continuation:)40
b Fn(corresponds)55 b(to)k(continuation)c(functions)166
3894 y(generated)19 b(by)g(the)h(CPS)i(compilation[)p
Fl(?)m Fn(].)0 4064 y Fl(Kno)o(wn:)41 b Fn(are)h(functions)e(whose)i
(calls)h(sites)g(are)f(statically)166 4164 y(kno)n(wn.)83
4333 y(Standard)24 b(and)h(continuation)e(functions)h(are)i(said)g(to)f
(be)h Fk(es-)0 4433 y(caping)19 b Fn(since)h(all)h(their)f(call)h
(sites)g(are)f(not)g(statically)h(kno)n(wn.)0 4719 y
Fm(2)119 b(CPS)31 b(machine)0 4907 y Fn(The)c(CPS)h(functions)d(e)o(x)o
(ecute)h(on)g(an)h(abstract)g(machine)f(with)0 5006 y(the)20
b(follo)n(wing)f(re)o(gisters:)2066 1871 y Fl(Name)p
2445 1901 4 100 v 222 w(Dedicated)p 2899 1901 V 99 w(Description)p
2016 1904 1851 4 v 2066 1974 a Fn(allocptr)p 2445 2004
4 100 v 292 w(Y)-8 b(es)p 2899 2004 V 217 w(Allocation)19
b(pointer)2066 2074 y(limitptr)p 2445 2104 V 297 w(Y)-8
b(es)p 2899 2104 V 217 w(Limit)20 b(Pointer)2066 2173
y(v)n(arptr)p 2445 2203 V 349 w(Y)-8 b(es)p 2899 2203
V 217 w(V)f(ar)20 b(Pointer)2066 2273 y(e)o(xnptr)p 2445
2303 V 334 w(Y)-8 b(es)p 2899 2303 V 217 w(Current)19
b(e)o(xception)f(handler)2066 2373 y(baseptr)p 2445 2403
V 306 w(Y)-8 b(es)p 2899 2403 V 217 w(Code)20 b(base)g(pointer)2066
2472 y(stdlink)p 2445 2502 V 330 w(No)p 2899 2502 V 226
w(Standard)f(Link)2066 2572 y(stdclos)p 2445 2602 V 326
w(No)p 2899 2602 V 226 w(Standard)g(Closure)2066 2671
y(stdar)o(g)p 2445 2701 V 354 w(No)p 2899 2701 V 226
w(Standard)g(Ar)o(gument)2066 2771 y(stdcont)p 2445 2801
V 316 w(No)p 2899 2801 V 226 w(Standard)g(Continuation)2066
2871 y(misc)2223 2883 y Fj(0)p Fi(::)p Fj(2)p 2445 2901
V 2623 2871 a Fn(No)p 2899 2901 V 226 w(Callee)i(sa)n(v)o(e)f(re)o
(gisters)2066 2970 y(misc)2223 2982 y Fj(3)p Fi(::M)p
2445 3000 V 2623 2970 a Fn(No)p 2899 3000 V 226 w(miscellaneous)f(re)o
(gisters)2066 3070 y(e)o(xhausted)p 2445 3100 V 224 w(No)p
2899 3100 V 226 w(\003ag)2066 3170 y(\003oatre)o(gs)p
2445 3200 V 271 w(No)p 2899 3200 V 226 w(\003oating)g(point)h(re)o
(gisters)1988 3308 y Fh(alloctpr)40 b Fn(is)26 b(a)f(pointer)f(to)g
(the)h(ne)o(xt)f(a)n(v)n(ailable)g(location)g(in)2154
3408 y(the)d(allocation)e(space.)1988 3558 y Fh(limitptr)40
b Fn(is)c(the)e(upper)f(limit)i(on)g(the)f(allocation)g(space.)2154
3657 y(There)15 b(is)h(a)g(4096)e(byte)h(skid)g(pad)g(be)o(yond)e(the)i
Fh(limitptr)2154 3757 y Fn(that)21 b(can)f(be)g(written)g(into.)1988
3907 y Fh(varptr)41 b Fn(is)21 b(used)f(for)f(thread)h(speci\002c)g
(state.)1988 4057 y Fh(exnptr)41 b Fn(is)26 b(a)g(pointer)f(to)g(a)h
(closure)f(containing)f(the)i(current)2154 4157 y(e)o(xception)19
b(handler)-5 b(.)1988 4307 y Fh(baseptr)41 b Fn(is)32
b(used)g(to)g(compute)e(the)h(v)n(alues)h(of)f(labels)h(that)2154
4407 y(reside)20 b(in)h(position)e(independent)f(code.)1988
4557 y Fh(stdlink)41 b Fn(contains)24 b(the)h(code)f(address)g(of)h
(the)g(function)e(be-)2154 4657 y(ing)d(called)g(during)f(a)h(call)h
(to)f(a)h(standard)e(function.)1988 4807 y Fh(stdcont)41
b Fn(contains)17 b(the)i(code)e(address)h(to)h(resume)e(computa-)2154
4907 y(tion,)22 b(or)g(the)g(code)f(address)g(during)f(a)j(call)f(to)g
(a)g(continua-)2154 5006 y(tion)e(function.)1926 5255
y(1)p eop
%%Page: 2 2
2 1 bop 0 523 a Fh(stdclos)40 b Fn(contain)32 b(the)h(en)m(vironment)d
(or)i(closure)h(required)166 623 y(during)19 b(a)h(call)h(to)f(a)h
(standard)e(function.)0 785 y Fh(stdarg)40 b Fn(is)22
b(an)e(ar)o(gument)d(re)o(gister)-5 b(.)0 948 y Fh(misc)200
960 y Fj(0)p Fi(::M)387 948 y Fn(is)37 b(a)g(set)g(of)g(miscellaneous)e
(re)o(gisters,)40 b(the)c(\002rst)166 1047 y(three)20
b(of)g(which)f(are)h(treated)g(as)h(calleesa)n(v)o(e)f(re)o(gisters.)0
1210 y Fh(exhausted)40 b Fn(is)h(set)g(when)f(there)f(is)j(no)d(more)h
(allocation)166 1310 y(space)22 b(a)n(v)n(ailable.)28
b(This)22 b(re)o(gister)f(is)h(set)g(before)f(a)g(call)h(and)166
1409 y(e)o(xamined)c(by)i(the)g(callee.)0 1572 y Fh(floatregs)40
b Fn(is)30 b(a)f(set)h(of)f(double)e(precision)h(\003oating)h(point)166
1671 y(re)o(gisters.)83 1845 y(Re)o(gisters)i(that)g(are)g(dedicated)e
(cannot)h(be)h(used)g(for)f(other)0 1945 y(purposes.)j(The)22
b Fh(baseptr)h Fn(is)h(currently)e(dedicated)f(b)n(ut)j(need)0
2045 y(not)c(be)g(in)g(practice.)0 2323 y Fm(3)119 b(Calling)31
b(con)-5 b(v)o(entions)0 2509 y Fn(Since)34 b(standard)f(and)h
(continuation)e(functions)g(escape,)38 b(the)o(y)0 2608
y(must)20 b(ha)n(v)o(e)g(a)h(\002x)o(ed)f(calling)g(con)m(v)o(ention.)i
(A)f(call)g(to)f(a)h(standard)0 2708 y(function)k(will)i(ha)n(v)o(e)f
(at)h(least)h(six)f(ar)o(guments)d(\()p Fg(ar)r(g)1554
2720 y Fj(1)1605 2708 y Ff(\001)14 b(\001)g(\001)g Fg(ar)r(g)1839
2720 y Fi(n)1885 2708 y Fn(,)0 2808 y Fg(n)23 b Ff(\025)g
Fe(6)p Fn(\).)h(The)c(con)m(v)o(ention)d(is)k(that:)530
2975 y Fl(Ar)o(gument)p 941 3005 4 100 v 99 w(Register)p
480 3008 946 4 v 530 3078 a Fg(ar)r(g)653 3090 y Fj(1)p
941 3108 4 100 v 993 3078 a Fh(stdlink)530 3177 y Fg(ar)r(g)653
3189 y Fj(2)p 941 3207 V 993 3177 a Fh(stdclos)530 3277
y Fg(ar)r(g)653 3289 y Fj(3)p 941 3307 V 993 3277 a Fh(stdcont)530
3377 y Fg(ar)r(g)653 3389 y Fj(4)p Fd(\000)p Fj(6)p 941
3407 V 993 3377 a Fh(misc)1193 3389 y Fj(0)p Fi(::)p
Fj(2)530 3476 y Fg(ar)r(g)653 3488 y Fj(7)p Fd(\000)p
Fi(n)p 941 3506 V 993 3476 a Fn(\(see)f(belo)n(w\))83
3645 y Fg(ar)r(g)206 3657 y Fj(7)p Fd(\000)p Fi(n)400
3645 y Fn(is)64 b(selected)f(from)f(the)h(\002x)o(ed)f(sequence)g(of)0
3745 y Fh({stdarg,misc)600 3757 y Fj(3)p Fi(::M)744 3745
y Fh(})44 b Fn(or)f Fh(floatregs)g Fn(based)g(on)g(the)0
3845 y(type)20 b(of)g(the)g(ar)o(gument.)83 3944 y(Continuation)29
b(functions)h(ha)n(v)o(e)g(a)i(similar)f(con)m(v)o(ention)d(b)n(ut)0
4044 y(do)g(not)h(use)f(the)h Fh(stdlink)f Fn(or)g Fh(stdclos)p
Fn(.)50 b(The)28 b(\002rst)i(ar)o(gu-)0 4144 y(ment)20
b(therefore)e(starts)j(with)g(the)f Fh(stdcont)f Fn(re)o(gister)-5
b(.)83 4243 y(Kno)n(wn)19 b(functions)g(whose)h(calls)h(site)g(are)f
(statically)h(kno)n(wn,)0 4343 y(ha)n(v)o(e)16 b(their)g(calling)h(con)
m(v)o(ention)c(specialized)j(by)g(the)h(graph)e(col-)0
4442 y(oring)k(re)o(gister)h(allocator[)p Fl(?)m Fn(].)0
4721 y Fm(4)119 b(Code)31 b(generation)0 4907 y Fn(The)16
b(prelude)g(to)g(all)i(escaping)e(functions)f(set)i(the)g
Fh(exhausted)0 5006 y Fn(and)j Fh(baseptr)g Fn(re)o(gisters.)26
b(Compiling)20 b(a)h(module)f(results)h(in)f(a)1988 523
y(runtime)f(code)g(string)g(that)h(may)f(get)g(relocated)g(by)g(the)g
(garbage)1988 623 y(collector)-5 b(.)57 b(The)30 b Fh(baseptr)h
Fn(holds)f(the)h(start)g(or)g(base)g(of)f(the)1988 722
y(code)i(string.)60 b(The)31 b(runtime)g(address)h(of)g(an)f(escaping)h
(func-)1988 822 y(tion)20 b(is)i(in)e(the)g Fh(stdlink)g
Fn(or)g Fh(stdcont)f Fn(re)o(gister)-5 b(.)25 b(If)20
b(this)h(is)g(at)1988 922 y(of)n(fset)27 b Fh(L)g Fn(from)f(the)h
(start)g(of)g(the)g(code)f(string,)i(then)e(the)h(v)n(alue)1988
1021 y(of)h(the)g Fh(baseptr)e Fn(is)j(computed)d(from)g(\()p
Fh(stdlink)h Ff(\000)h Fh(L)p Fn(\))g(or)1988 1121 y(\()p
Fh(stdcont)21 b Ff(\000)g Fh(L)p Fn(\).)h(Setting)f(the)h
Fh(exhausted)e Fn(re)o(gister)h(is)h(the)1988 1220 y(responsibility)d
(of)h(the)g(caller)m(,)f(so)i(the)f(callee)g(in)g(most)g(cases)h(e)o
(x-)1988 1320 y(amines)j(the)g Fh(exhausted)e Fn(re)o(gister)i(and)f
(branches)f(to)i(a)g(label)1988 1420 y(to)g(in)m(v)n(ok)o(e)e(garbage)f
(collection.)34 b(A)24 b(more)e(complicated)g(test)i(is)1988
1519 y(required)30 b(if)h(the)h(function)d(allocates)i(more)g(then)g
(4096)e(bytes)1988 1619 y(\227)j(the)f(size)h(of)f(the)g(allocation)f
(space)h(skid)g(pad.)58 b(Note,)33 b(the)1988 1719 y(allocation)22
b(space)h(required)d(by)j(an)f(function)f(can)h(be)h(statically)1988
1818 y(computed)14 b(as)i(all)h(v)n(ariable-length)12
b(allocation)j(is)h(done)f(of)n(f-line.)2071 1918 y(The)k(code)e
(generated)g(for)h(a)h(standard)e(function)g(on)h(the)h(DEC)1988
2017 y(Alpha)h(w)o(ould)g(look)f(lik)o(e:)2161 2186 y
Fc(f:)2296 2277 y(bne)44 b(exhausted,)f(gclabel)2296
2368 y(addl)h(baseptr,)f(stdlink,)h(k-valueOf\(f\))2296
2460 y(...)2161 2551 y(gclabel:)2296 2642 y(<invokeGC>)2296
2733 y(jmp)g(stdlink)2071 2910 y Fh(valueOf\(f\))20 b
Fn(is)h(the)g(relati)n(v)o(e)f(of)n(fset)g(of)h(the)g(label)f
Fh(f)h Fn(from)1988 3010 y(the)28 b(be)o(ginning)e(of)h(the)i(code)e
(string)g(being)h(generated,)f(and)h Fh(k)1988 3109 y
Fn(is)d(an)e(architecture-speci\002c)e(constant)i(used)g(to)h(bias)g
(the)f(v)n(alue)1988 3209 y(held)h(in)h(the)g Fh(baseptr)p
Fn(.)37 b(Since)24 b(the)h Fh(stdlink)f Fn(contains)f(the)1988
3308 y(address)j(of)g(the)g(function)f(that)h(called)g(the)h(garbage)d
(collector)m(,)1988 3408 y(the)36 b(return)e(is)i(implemented)d(as)j
(an)f(indirect)g(jump)f(through)1988 3508 y Fh(stdlink)p
Fn(.)2071 3607 y(Code)20 b(generation)e(is)j(done)d(in)i(units)g(of)g
(clusters,)g(where)f(tw)o(o)1988 3707 y(functions)i(are)h(in)h(a)f
(cluster)g(if)h(there)f(is)h(a)f(direct)g(call)h(from)e(one)1988
3807 y(to)d(the)f(other)-5 b(.)23 b(It)18 b(turns)f(out)g(that)g(a)h
(lot)f(of)g(the)g(garbage)e(collection)1988 3906 y(in)m(v)n(ocation)23
b(code)h(for)g(escaping)f(functions)g(can)i(be)f(shared,)h(so)1988
4006 y(the)c(code)e(that)h(actually)g(gets)g(generated)f(is:)2161
4174 y Fc(f:)2296 4265 y(bne)44 b(exhausted,)f(gclabel)2296
4357 y(addl)h(baseptr,)f(stdlink,)h(k-valueOf\(f\))2296
4448 y(...)2161 4539 y(gclabel:)2296 4631 y(b)358 b(shared_GC_Label)
2071 4807 y Fn(The)41 b(label)h Fh(shared_GC_Label)d
Fn(\(to)i(actually)g(in)m(v)n(ok)o(e)1988 4907 y(garbage)24
b(collection\))g(is)j(emitted)e(at)i(the)e(end)g(of)h(the)g(compila-)
1988 5006 y(tion)16 b(unit)f(\(after)g(all)h(clusters)g(ha)n(v)o(e)f
(been)g(processed\).)22 b(The)15 b(label)1926 5255 y(2)p
eop
%%Page: 3 3
3 2 bop 0 523 a Fh(gclabel)27 b Fn(is)h(also)g(shared)f(\(if)g
(possible\))g(by)g(escaping)f(func-)0 623 y(tions)c(within)f(the)g
(cluster)m(,)h(and)e(contains)h(a)h(branch)e(instruction)0
722 y(to)h(the)h(label)f Fh(shared_GC_Label)p Fn(.)26
b(The)21 b(indirection)e(at)j(the)0 822 y(\(per)n(-cluster\))k
Fh(gclabel)h Fn(is)h(required)e(to)h(a)n(v)n(oid)h(the)f(possible)0
922 y(long)19 b(form)h(of)f(a)i(conditional)d(branch:)173
1132 y Fc(f:)307 1223 y(beq)89 b(exhausted,)43 b(fall)307
1315 y(b)179 b(shared_GC_Label)173 1406 y(fall:)307 1497
y(...)83 1725 y Fn(Kno)n(wn)20 b(functions)h(cannot)f(share)h(their)g
(garbage)f(collection)0 1824 y(in)m(v)n(ocation)28 b(code)h(as)i(the)f
(calling)f(con)m(v)o(ention)e(is)k(determined)0 1924
y(by)20 b(the)h(re)o(gister)f(allocator;)g(implying)g(that)g(formal)g
(parameters)0 2024 y(could)h(wind)g(up)g(in)g(an)o(y)g(re)o(gister)m(,)
g(or)g(e)n(v)o(en)f(be)i(spilled)f(to)h(mem-)0 2123 y(ory)-5
b(.)0 2453 y Fm(5)119 b(GC-API)0 2656 y Fn(All)35 b(communication)c(to)
j(the)g(runtime)f(system)i(is)g(through)c(a)0 2755 y(\002x)o(ed)20
b(set)h(of)e(re)o(gisters,)h(namely:)83 2974 y Ff(\017)41
b Fh(stdlink)83 3176 y Ff(\017)g Fh(stdclos)83 3378 y
Ff(\017)g Fh(stdcont)83 3580 y Ff(\017)g Fh(misc)366
3592 y Fj(0)p Fd(\000)p Fj(2)83 3782 y Ff(\017)g Fh(stdarg)83
4001 y Fn(An)o(ything)27 b(else)j(must)f(be)f(appropriately)f(b)n
(undled)g(up,)j(and)0 4101 y(unb)n(undled)21 b(on)j(return)f(from)g
(the)h(garbage)e(collector)-5 b(.)36 b(Ra)o(w)24 b(32)0
4200 y(bit)j(v)n(alues)g(and)g(\003oating)f(point)h(re)o(gisters)g(are)
g(b)n(undled)f(into)g(a)0 4300 y(runtime)f(system)i(ra)o(w64)e(array)-5
b(,)27 b(and)f(e)n(v)o(erything)d(else)k(is)h(b)n(un-)0
4399 y(dled)20 b(into)g(a)g(record.)83 4508 y(In)g(the)h(case)g(of)g
(kno)n(wn)e(functions,)g(the)i(formals)f(are)g(in)h(tem-)0
4608 y(porary)32 b(re)o(gisters,)38 b(so)c(a)h(parallel)f(cop)o(y)f(is)
i(emitted)f(to)g(mo)o(v)o(e)0 4707 y(these)21 b(temporaries)f(into)h
(the)g(\002x)o(ed)g(re)o(gisters.)27 b(F)o(or)21 b(e)o(xample,)f(if)0
4807 y(the)j(formals)f(to)h(a)g(kno)n(wn)e(function)g(are,)j
Fh(t100)p Ff(\001)14 b(\001)g(\001)o Fh(t108)22 b Fn(then)0
4907 y(the)e(follo)n(wing)f(code)g(is)i(generated)d(\(where)i
Fh(gcRegs)f Fn(refers)h(to)0 5006 y(the)g(se)n(v)o(en)g(\002x)o(ed)f
(of)h(re)o(gisters\):)2251 523 y Fc(t109)44 b(:=)g({t100,)g(t101,)g
(t102})2251 614 y(gcRegs)g(:=)g(t103)g(...)h(t109)2251
706 y(call)f(gc)2251 797 y(t103)g(...)g(t109)g(:=)h(gcRegs)2251
888 y(t100)f(:=)g(t109.0)2251 980 y(t101)g(:=)g(t109.1)2251
1071 y(t102)g(:=)g(t109.2)2251 1162 y(<set)g(baseptr>)2251
1254 y(b)g(f)2071 1520 y Fn(The)26 b(\002rst)i(assignment)d(creates)i
(a)f(record)f(assuming)h(e)n(v)o(ery-)1988 1619 y(thing)31
b(is)h(box)o(ed,)g(while)g(the)f(second)f(and)h(third)g(assignments)
1988 1719 y(are)d(parallel)f(copies.)47 b(Cop)o(y-propagation)24
b(in)j(the)h(re)o(gister)f(al-)1988 1819 y(locator)c(may)g(be)g(able)g
(to)h(eliminate)f(the)g(need)g(for)g(all)h(of)f(these)1988
1918 y(copies.)28 b(After)21 b(the)g(call)h(to)f(the)g(garbage)e
(collector)m(,)h(the)i(tempo-)1988 2018 y(raries)f(are)g(reassigned)g
(and)f(the)h(record)f(unb)n(undled.)25 b(Since)c(the)1988
2117 y Fh(baseptr)k Fn(is)h(not)e(part)h(of)g(the)g(\002x)o(ed)f(set)i
(of)f(re)o(gisters)f(it)i(must)1988 2217 y(be)19 b(either)g(b)n(undled)
e(or)i(recomputed;)e(I)i(ha)n(v)o(e)f(chosen)g(to)i(recom-)1988
2317 y(pute)28 b(it.)50 b(Finally)-5 b(,)30 b(control)d(jumps)h(back)g
(to)g(the)h(be)o(ginning)d(of)1988 2416 y(the)20 b(function;)e(re-e)o
(x)o(ecutimg)f(the)j(garbage)d(collection)i(test)i(this)1988
2516 y(time)g(is)g(really)f(unnecessary)-5 b(.)1988 2888
y Fm(6)120 b(Execution)30 b(model)1988 3105 y Fn(Code)22
b(generated)f(from)g(C)i(and)e(code)h(generated)e(from)h(ML)h(are)1988
3205 y(run)c(as)g(a)h(co-routines.)j(Control)17 b(from)g(C)i(transfers)
f(to)g(ML)g(via)g(a)1988 3304 y(hand)26 b(written)g(assembly)h(routine)
e(\()p Fh(restoreregs)p Fn(\),)h(which)1988 3404 y(sa)n(v)o(es)f(the)f
(state)h(of)e(the)h(C)h(thread)e(and)g(loads)h(the)g(state)h(for)e(the)
1988 3504 y(ML)31 b(thread)e(into)h(re)o(gisters.)55
b(The)30 b(in)m(v)o(erse)f(occurs)g(when)h(go-)1988 3603
y(ing)i(in)g(the)g(opposite)e(direction)h(via)h(an)f(assembly)h
(routine)e(\226)1988 3703 y Fh(saveregs)p Fn(.)2071 3819
y(The)18 b(routines)f Fh(saveregs)g Fn(and)h Fh(restoreregs)e
Fn(are)i(v)o(ery)1988 3919 y(simple)26 b(as)g(only)e(a)i(\002x)o(ed)e
(set)j(of)e(re)o(gisters)f(are)i(in)m(v)n(olv)o(ed)d(when)1988
4019 y(performing)e(this)j(conte)o(xt)e(switch.)35 b(In)23
b(the)h(prior)e(implementa-)1988 4118 y(tion)f(of)g Fh(restoreregs)f
Fn(all)h(ML)h(re)o(gisters)e(were)h(restored)g(as)1988
4218 y(an)o(y)f(one)f(could)h(ha)n(v)o(e)f(been)h(li)n(v)o(e.)1988
4590 y Fm(7)120 b(Results)1988 4807 y Fn(All)24 b(results)f(are)f
(based)g(on)g(compiling)f(the)i(compiler)e(itself)i(us-)1988
4907 y(ing)38 b(a)f(533MHz,)k(21164A)35 b(Dec)j(Alpha,)j(with)d(128)e
(MB)j(of)1988 5006 y(RAM.)1926 5255 y(3)p eop
%%Page: 4 4
4 3 bop 0 523 a Fb(7.1)99 b(Compilation)24 b(speed)0
679 y Fn(V)-9 b(ersion)39 b(110.15)g(compiling)f(itself)j(is)g(4\045)g
(f)o(aster)f(than)g(the)0 778 y(pre)n(vious)24 b(v)o(ersion)h
(\(110.14\))e(compiling)i(the)h(source)f(code)h(for)0
878 y(110.15.)31 b(V)-9 b(ersion)22 b(110.15)f(compiles)h(itself)i(in)f
(about)f(6.5)h(min-)0 978 y(utes.)i(The)20 b(ra)o(w)g(numbers)f(are)h
(\(note,)f Fh(usr)h Fn(includes)g Fh(gc)g Fn(time\):)p
155 1046 1596 4 v 153 1145 4 100 v 205 1116 a Fl(V)-8
b(ersion)p 521 1145 V 99 w(gc)207 b(sys)139 b(usr)p 1380
1145 V 213 w(usr+sys)p 1749 1145 V 155 1149 1596 4 v
153 1248 4 100 v 205 1219 a Fn(110.14)p 521 1248 V 137
w(44.01)97 b(7.32)h(389.10)p 1380 1248 V 97 w(396.42s)p
1749 1248 V 155 1252 1596 4 v 153 1351 4 100 v 205 1321
a(110.15)p 521 1351 V 137 w(34.47)f(6.62)h(374.56)p 1380
1351 V 97 w(381.18s)p 1749 1351 V 155 1355 1596 4 v 1023
1424 a(Speedup:)177 b(4\045)83 1561 y(The)27 b(code)g(size)h(for)f
Fh(ml-yacc)g Fn(actually)g(shrunk)f(between)0 1661 y(v)o(ersions)18
b(110.14)f(and)h(110.15.)k(I)d(don')o(t)f(ha)n(v)o(e)g(a)h(rational)f
(e)o(xpla-)0 1760 y(nation)h(for)h(this.)0 1991 y Fb(7.2)99
b(GC)25 b(statistics)0 2146 y Fn(It)i(is)i(meaningful)c(to)i(separate)g
(the)g(numbers)f(for)g(each)h(of)g(the)0 2246 y(dif)n(ferent)h(types)i
(of)f(functions)g(generated)f(by)h(the)h(CPS)h(com-)0
2346 y(piler)-5 b(.)71 b(There)35 b(are)h(34,155)d(continuation)g(and)i
(10,321)f(stan-)0 2445 y(dard)27 b(functions,)h(and)f(1,043)g(kno)n(wn)
f(functions)h(\(that)g(require)0 2545 y(a)h(garbage)d(collection)h
(test\))i(generated)e(when)g(compiling)g(the)0 2644 y(compiler)-5
b(.)83 2744 y(In)31 b(the)g(subsequent)e(tables)j Fh(bb/ii/ff)e
Fn(refers)g(to)h(an)g(en-)0 2844 y(coding)20 b(for)h(the)g(number)f(of)
h(dif)n(ferent)f(types)h(of)g(re)o(gisters)g(used)0 2943
y(in)27 b(a)g(call)g(to)g(the)g(garbage)e(collector)-5
b(.)44 b Fh(bb)27 b Fn(refers)f(to)h(the)g(num-)0 3043
y(ber)18 b(of)g(re)o(gisters)h(that)f(contained)f(tagged)h(objects,)g
Fh(ii)h Fn(refers)f(to)0 3143 y(the)25 b(number)e(of)i(re)o(gisters)f
(that)h(contained)e(ra)o(w)i(32)f(bit)i(v)n(alues,)0
3242 y(and)17 b Fh(ff)g Fn(refers)g(to)h(the)f(number)f(of)h
(\003oating)f(point)h(re)o(gisters)g(that)0 3342 y(were)j(li)n(v)o(e.)
83 3441 y(Non-zero)15 b(v)n(alues)i(of)g Fh(ii)g Fn(or)g
Fh(ff)g Fn(require)f(a)h(ra)o(w64)f(array)-5 b(,)16 b(and)0
3541 y(e)o(xtra)25 b(re)o(gisters)h(be)g(b)n(undled)e(into)i(a)g
(record)f(when)g Fh(bb)i Fn(\(+)f(1)g(if)0 3641 y(either)20
b Fh(ii)g Fn(or)g Fh(ff)g Fn(is)i(non-zero\))17 b(is)k(greater)e(than)h
(se)n(v)o(en.)83 3740 y(All)f(escaping)e(functions)g(that)h(use)g(the)g
(same)h(set)f(of)g(re)o(gisters)0 3840 y(share)34 b(a)i(common)c
(garbage)h(collection)h(in)m(v)n(ocation)e(routine,)0
3940 y(whereas)23 b(each)g(kno)n(wn)e(function)h(must)h(ha)n(v)o(e)g
(its)h(o)n(wn)e(routine.)0 4039 y(The)28 b(tables)h(described)f(in)h
(Sections)f Fl(??)h Fn(to)g Fl(??)f Fn(do)g(not)h(gi)n(v)o(e)e(a)0
4139 y(sense)22 b(of)g(the)g(amount)f(of)h(sharing)f(present)h(within)f
(a)i(\002le)g(since)0 4238 y(the)o(y)29 b(aggre)o(gates)e(numbers)h(o)o
(v)o(er)g(all)i(the)f(\002les)i(that)e(mak)o(e)g(up)0
4338 y(the)d(compiler)-5 b(.)42 b(The)26 b(amount)f(of)h(sharing)f
(within)h(a)g(\002le)h(is)g(de-)0 4438 y(pendent)j(on)h(the)g(\002le,)j
(and)d(Section)20 b Fl(??)31 b Fn(gi)n(v)o(es)g(some)g(random)0
4537 y(samples)20 b(from)f(some)h(of)g(the)h(lar)o(ger)d(\002les)k(in)e
(the)g(compiler)-5 b(.)0 4751 y Fl(7.2.1)81 b(Continuation)19
b(functions)0 4907 y Fn(The)i(\002rst)h(entry)f(in)g(Figure)f
Fl(??)h Fn(indicates)g(that)h(95\045)f(of)g(all)h(con-)0
5006 y(tinuation)f(functions)f(tak)o(e)i(a)g(single)f(ar)o(gument)f
(\(the)h(other)g(four)2505 609 y Fl(r)o(egisters)108
b(count)p 3163 639 4 100 v 3180 639 V 192 w Fn(\045)p
2456 643 972 4 v 2637 712 a(5/0/0)99 b(32401)p 3163 742
4 100 v 3180 742 V 114 w(94.9)2637 812 y(6/0/0)182 b(926)p
3163 842 V 3180 842 V 156 w(2.7)2637 912 y(7/0/0)g(444)p
3163 941 V 3180 941 V 156 w(1.3)2637 1011 y(8/0/0)223
b(75)p 3163 1041 V 3180 1041 V 157 w(0.2)2637 1111 y(9/0/0)182
b(114)p 3163 1141 V 3180 1141 V 156 w(0.3)2596 1210 y(10/0/0)222
b(12)p 3163 1240 V 3180 1240 V 157 w(0.0)2596 1310 y(11/0/0)264
b(4)p 3163 1340 V 3180 1340 V 157 w(0.0)2596 1410 y(12/0/0)g(4)p
3163 1440 V 3180 1440 V 157 w(0.0)2596 1509 y(13/0/0)222
b(20)p 3163 1539 V 3180 1539 V 157 w(0.1)2637 1609 y(4/1/0)h(93)p
3163 1639 V 3180 1639 V 157 w(0.3)2637 1709 y(5/1/0)265
b(4)p 3163 1738 V 3180 1738 V 157 w(0.0)2637 1808 y(4/0/1)223
b(58)p 3163 1838 V 3180 1838 V 157 w(0.2)2395 1986 y(Figure)20
b(1:)25 b(Continuation)19 b(functions)1988 2339 y(re)o(gisters)31
b(being)f(accounted)f(for)i(by)f(the)h Fh(stdcont)g Fn(and)f(the)1988
2439 y(three)36 b(calleesa)n(v)o(e)h(re)o(gisters\).)72
b(In)37 b(this)f(particular)g(case,)k(the)1988 2538 y(unused)26
b(re)o(gisters)g(must)h(be)g(zeroed)f(out)g(before)g(in)m(v)n(oking)e
(the)1988 2638 y(garbage)d(collector)-5 b(.)31 b(99\045)22
b(of)g(all)h(continuations)d(will)j(not)f(need)1988 2737
y(to)f(b)n(uild)f(an)g(e)o(xtra)f(record)g(or)h(ra)o(w64)f(array)-5
b(.)1988 2966 y Fl(7.2.2)81 b(Standard)20 b(functions)1988
3125 y Fn(Again)26 b(from)f(the)h(\002rst)h(entry)e(in)h(Figure)20
b Fl(??)o Fn(,)28 b(76\045)e(of)g(all)g(stan-)1988 3224
y(dard)19 b(function)e(tak)o(e)i(one)g(ar)o(gument,)d(and)j(all)g(the)g
(others)g(w)o(ould)1988 3324 y(require)14 b(some)h(sort)h(of)f(b)n
(undling)e(of)i(e)o(xtra)f(re)o(gisters.)23 b(One)15
b(could)1988 3424 y(ha)n(v)o(e)j(separate)g(entry)g(points)g(that)g
(shared)g(code)g(to)g(b)n(uild)g(up)g(the)1988 3523 y(record)h(of)h(e)o
(xtra)f(ar)o(guments,)e(ho)n(we)n(v)o(er)m(,)h(the)i(number)e(of)h(dif)
n(fer)n(-)1988 3623 y(ent)24 b(types)f(of)f(standard)g(functions)g
(within)h(a)h(\002le)g(is)g(small,)g(and)1988 3722 y(therefore)19
b(opportunities)f(for)h(reuse)h(w)o(ould)g(be)g(fe)n(w)-5
b(.)1988 3951 y Fl(7.2.3)81 b(Kno)o(wn)21 b(functions)1988
4110 y Fn(The)d(total)h(number)d(of)i(kno)n(wn)f(functions)g(that)h
(require)f(garbage)1988 4209 y(collection)36 b(checks)h(is)h(much)e
(smaller)h(than)f(the)h(number)f(of)1988 4309 y(standard)28
b(or)h(continuation)d(functions.)50 b(From)28 b(Figure)20
b Fl(??)28 b Fn(\(all)1988 4408 y(entries)j(whose)f(contrib)n(ution)f
(w)o(as)j(less)g(than)e(1\045)h(ha)n(v)o(e)f(been)1988
4508 y(omitted\),)16 b(68\045)f(will)h(not)g(require)e(e)o(xtra)h(b)n
(undling,)g(and)g(the)g(re)o(g-)1988 4608 y(ister)23
b(allocator)e(may)g(be)h(able)g(to)g(tar)o(get)f(re)o(gisters)g(to)h
(minimize)1988 4707 y(the)28 b(size)h(of)e(the)h(code)f(generated.)46
b(The)28 b(copies)f(generated)f(to)1988 4807 y(mo)o(v)o(e)21
b(the)g(formal)g(parameters)f(into)h(the)h(\002x)o(ed)f(set)h(of)g(re)o
(gisters)1988 4907 y(should)28 b(be)g(gi)n(v)o(en)f(lo)n(w)i(priority)e
(by)h(the)g(re)o(gister)g(allocator)g(as)1988 5006 y(the)o(y)d(should)f
(not)h(in\003uence)f(the)i(allocation)e(in)h(the)h(main)e(rou-)1926
5255 y(4)p eop
%%Page: 5 5
5 4 bop 522 609 a Fl(r)o(egisters)98 b(count)p 1170 639
4 100 v 1187 639 V 192 w Fn(\045)p 472 643 962 4 v 654
712 a(7/0/0)130 b(7843)p 1170 742 4 100 v 1187 742 V
115 w(76.0)654 812 y(8/0/0)g(1553)p 1170 842 V 1187 842
V 115 w(15.0)654 912 y(9/0/0)172 b(381)p 1170 941 V 1187
941 V 156 w(3.7)612 1011 y(10/0/0)g(128)p 1170 1041 V
1187 1041 V 156 w(1.2)612 1111 y(11/0/0)g(121)p 1170
1141 V 1187 1141 V 156 w(1.2)612 1210 y(12/0/0)213 b(25)p
1170 1240 V 1187 1240 V 157 w(0.2)612 1310 y(13/0/0)g(11)p
1170 1340 V 1187 1340 V 157 w(0.1)612 1410 y(14/0/0)255
b(9)p 1170 1440 V 1187 1440 V 157 w(0.1)612 1509 y(15/0/0)g(4)p
1170 1539 V 1187 1539 V 157 w(0.0)654 1609 y(6/1/0)213
b(89)p 1170 1639 V 1187 1639 V 157 w(0.9)654 1709 y(6/2/0)g(76)p
1170 1738 V 1187 1738 V 157 w(0.7)654 1808 y(7/1/0)255
b(9)p 1170 1838 V 1187 1838 V 157 w(0.1)654 1908 y(6/0/1)213
b(47)p 1170 1938 V 1187 1938 V 157 w(0.5)654 2007 y(6/0/2)g(22)p
1170 2037 V 1187 2037 V 157 w(0.2)654 2107 y(6/0/3)255
b(3)p 1170 2137 V 1187 2137 V 157 w(0.0)476 2285 y(Figure)20
b(2:)25 b(Standard)19 b(functions)0 2615 y(tines.)34
b(Assigning)22 b(priorities)g(to)h(mo)o(v)o(es)f(based)h(on)f
(pro\002ling)g(is)0 2715 y(not)e(currently)e(supported.)0
2948 y Fb(7.3)99 b(P)n(er)l(-\002le)26 b(sharing)0 3104
y Fn(Figure)20 b Fl(??)i Fn(is)i(intended)e(to)h(gi)n(v)o(e)g(an)g
(indication)f(of)h(the)g(sharing)0 3203 y(of)h(garbage)e(collection)i
(in)m(v)n(ocation)e(code)i(on)g(a)h(per)n(-\002le)f(basis,)0
3303 y(for)c(tw)o(o)g(lar)o(ge)f(modules)g(used)h(within)g(the)g
(compiler)-5 b(.)0 3579 y Fm(8)119 b(Conclusions)0 3764
y Fn(The)16 b(communication)d(of)j(li)n(v)o(e)h(re)o(gisters)e(to)i
(the)f(garbage)e(collec-)0 3864 y(tor)20 b(through)e(a)j(\002x)o(ed)e
(set)i(of)f(re)o(gisters)g(is)h(bene\002cial)f(because:)83
4022 y Ff(\017)41 b Fn(Most)j(of)g(the)h(time,)50 b(the)44
b(code)f(generated)g(to)h(in)m(v)n(ok)o(e)166 4121 y(garbage)31
b(collection)g(can)i(be)g(k)o(ept)f(small)h(and)f(no)h(e)o(xtra)166
4221 y(b)n(undling)18 b(is)j(required.)83 4377 y Ff(\017)41
b Fn(The)e(runtime)f(system)h(only)f(needs)g(to)i(kno)n(w)d(about)h(a)
166 4477 y(small)21 b(set)g(of)f(\002x)o(ed)f(re)o(gisters.)83
4633 y Ff(\017)41 b Fn(The)25 b(o)o(v)o(erhead)e(in)j(the)g(co-routine)
d(switch)j(between)f(ML)166 4732 y(and)20 b(C)h(is)g(reduced.)83
4889 y Ff(\017)41 b Fn(The)17 b(size)h(of)f(ML)g(state)h(is)g(reduced,)
e(which)h(w)o(ould)f(bene\002t)166 4988 y(a)21 b(multi-threaded)c
(system.)2510 511 y Fl(r)o(egisters)98 b(count)p 3159
541 V 3176 541 V 178 w(\045)p 2460 545 962 4 v 2642 614
a Fn(1/0/0)172 b(215)p 3159 644 4 100 v 3176 644 V 115
w(20.6)2642 714 y(2/0/0)214 b(20)p 3159 744 V 3176 744
V 156 w(1.9)2642 814 y(3/0/0)g(31)p 3159 844 V 3176 844
V 156 w(3.0)2642 913 y(4/0/0)g(36)p 3159 943 V 3176 943
V 156 w(3.5)2642 1013 y(5/0/0)g(80)p 3159 1043 V 3176
1043 V 156 w(7.7)2642 1113 y(6/0/0)172 b(215)p 3159 1142
V 3176 1142 V 115 w(20.6)2642 1212 y(7/0/0)g(110)p 3159
1242 V 3176 1242 V 115 w(10.5)2642 1312 y(8/0/0)214 b(86)p
3159 1342 V 3176 1342 V 156 w(8.2)2642 1411 y(9/0/0)g(68)p
3159 1441 V 3176 1441 V 156 w(6.5)2600 1511 y(10/0/0)g(44)p
3159 1541 V 3176 1541 V 156 w(4.2)2600 1611 y(11/0/0)g(32)p
3159 1641 V 3176 1641 V 156 w(3.1)2600 1710 y(12/0/0)g(20)p
3159 1740 V 3176 1740 V 156 w(1.9)2600 1810 y(13/0/0)g(12)p
3159 1840 V 3176 1840 V 156 w(1.2)2491 1988 y(Figure)20
b(3:)25 b(Kno)n(wn)19 b(functions)2617 2228 y Fh(unpickmod.sml)2480
2328 y Fl(type)p 2821 2358 V 240 w(r)o(egisters)p 3224
2358 V 98 w(sharing)p 2290 2361 1303 4 v 2339 2431 a
Fn(Continuation)p 2821 2461 4 100 v 98 w(5/0/0)p 3224
2461 V 230 w(863)2538 2531 y(\223)p 2821 2560 V 298 w(7/0/0)p
3224 2560 V 230 w(2)2538 2630 y(\223)p 2821 2660 V 298
w(10/0/0)p 3224 2660 V 188 w(2)2409 2730 y(Standard)p
2821 2760 V 167 w(7/0/0)p 3224 2760 V 230 w(872)2538
2829 y(\223)p 2821 2859 V 298 w(8/0/0)p 3224 2859 V 230
w(4)2538 2929 y(\223)p 2821 2959 V 298 w(10/0/0)p 3224
2959 V 188 w(1)2435 3029 y(Kno)n(wn)p 2821 3059 V 194
w(1/0/0)p 3224 3059 V 230 w(1)2617 3228 y Fh(mlriscGen.sml)2480
3328 y Fl(type)p 2821 3357 V 240 w(r)o(egisters)p 3224
3357 V 98 w(sharing)p 2290 3361 1303 4 v 2339 3431 a
Fn(Continuation)p 2821 3460 4 100 v 98 w(5/0/0)p 3224
3460 V 230 w(695)2538 3530 y(\223)p 2821 3560 V 298 w(6/0/0)p
3224 3560 V 230 w(3)2538 3630 y(\223)p 2821 3660 V 298
w(4/0/1)p 3224 3660 V 230 w(1)2409 3729 y(Standard)p
2821 3759 V 167 w(7/0/0)p 3224 3759 V 230 w(25)2538 3829
y(\223)p 2821 3859 V 298 w(8/0/0)p 3224 3859 V 230 w(5)p
2821 3959 V 2873 3929 a(9/0/0)p 3224 3959 V 230 w(8)2435
4028 y(Kno)n(wn)p 2821 4058 V 194 w(1/0/0)p 3224 4058
V 230 w(1)2538 4128 y(\223)p 2821 4158 V 298 w(5/0/0)p
3224 4158 V 230 w(1)2538 4228 y(\223)p 2821 4257 V 298
w(6/0/0)p 3224 4257 V 230 w(1)2538 4327 y(\223)p 2821
4357 V 298 w(7/0/0)p 3224 4357 V 230 w(1)2538 4427 y(\223)p
2821 4457 V 298 w(7/0/0)p 3224 4457 V 230 w(1)p 2821
4556 V 2873 4526 a(10/0/0)p 3224 4556 V 188 w(1)2538
4626 y(\223)p 2821 4656 V 298 w(11/0/0)p 3224 4656 V
188 w(1)2538 4726 y(\223)p 2821 4756 V 298 w(12/0/0)p
3224 4756 V 188 w(1)2523 4904 y(Figure)h(4:)25 b(Per)n(-\002le)c
(sharing)1926 5255 y(5)p eop
%%Page: 6 6
6 5 bop 0 523 a Fm(Refer)n(ences)0 709 y Fn([App92])39
b(A.)33 b(W)-8 b(.)33 b(Appel.)68 b Fa(Compiling)32 b(with)h
(Continuations)p Fn(.)323 808 y(Cambridge)j(Uni)n(v)-5
b(.)36 b(Press,)42 b(1992.)83 b(ISBN)38 b(0-521-)323
908 y(41695-7.)0 1074 y([GA96])63 b(Lal)19 b(Geor)o(ge)e(and)h(Andre)n
(w)g(W)-8 b(.)20 b(Appel.)25 b(Iterated)18 b(re)o(g-)323
1174 y(ister)36 b(coalescing.)77 b Fa(A)n(CM)35 b(tr)o(ansacations)f
(on)h(pr)l(o-)323 1273 y(gr)o(amming)26 b(langua)o(g)o(es)g(and)g
(systems.)p Fn(,)k(18\(3\):300\226)323 1373 y(324,)19
b(May)h(1996.)1926 5255 y(6)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
