%!PS-Adobe-2.0
%%Creator: dvipsk 5.66a Copyright 1986-97 Radical Eye Software (www.radicaleye.com)
%%Title: manual.dvi
%%Pages: 23
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Roman Courier Courier-Bold
%%+ Times-Italic Courier-Oblique
%%EndComments
%DVIPSCommandLine: dvips manual
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 1998.09.03:1615
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{dup length product length le{dup length product
exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}
ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false RMat{BDot}
imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1 false
RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform round
exch round exch itransform moveto rulex 0 rlineto 0 ruley neg rlineto
rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail{dup
/delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}B /d{
-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}
B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B
/bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont cvx]cvx def}def /ObliqueSlant
{dup sin S cos div neg}B /SlantFont{4 index mul add}def /ExtendFont{3 -1
roll mul exch}def /ReEncodeFont{/Encoding exch def}def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (manual.dvi)
@start /Fa 172[46 55 1[46 60 1[74 51 2[28 3[51 1[55 5[47
61[{TeXBase1Encoding ReEncodeFont}10 83.022 /Times-Roman
rf /Fb 135[50 50 50 1[50 50 2[50 1[50 50 50 2[50 50 50
50 50 50 50 50 50 10[50 35[50 50 7[50 50 40[{
TeXBase1Encoding ReEncodeFont}23 83.022 /Courier-Oblique
rf
%DVIPSBitmapFont: Fc cmr10 10.95 3
/Fc 3 59 df<0000300000700000E00001C0000380000780000F00001E00003E00003C00
00780000F80000F00001F00001E00003E00003E00007C00007C0000FC0000F80000F8000
1F80001F00001F00003F00003F00003F00003E00007E00007E00007E00007E00007E0000
7E00007C0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000
FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC00007C00007E00007E00007E0000
7E00007E00007E00003E00003F00003F00003F00001F00001F00001F80000F80000F8000
0FC00007C00007C00003E00003E00001E00001F00000F00000F800007800003C00003E00
001E00000F000007800003800001C00000E0000070000030145A77C323>40
D<C00000E000007000003800001C00001E00000F000007800007C00003C00001E00001F0
0000F00000F800007800007C00007C00003E00003E00003F00001F00001F00001F80000F
80000F80000FC0000FC0000FC00007C00007E00007E00007E00007E00007E00007E00003
E00003F00003F00003F00003F00003F00003F00003F00003F00003F00003F00003F00003
F00003F00003F00003F00003F00003F00003F00003E00007E00007E00007E00007E00007
E00007E00007C0000FC0000FC0000FC0000F80000F80001F80001F00001F00003F00003E
00003E00007C00007C0000780000F80000F00001F00001E00003C00007C0000780000F00
001E00001C0000380000700000E00000C00000145A7BC323>I<1E007F807F80FFC0FFC0
FFC0FFC07F807F801E000000000000000000000000000000000000000000000000000000
0000000000000000000000001E007F807F80FFC0FFC0FFC0FFC07F807F801E000A2779A6
19>58 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmsy10 10.95 4
/Fd 4 107 df<0000000000000030000000000000000000780000000000000000007800
00000000000000007C0000000000000000003C0000000000000000003C00000000000000
00003E0000000000000000001E0000000000000000001E0000000000000000001F000000
0000000000000F8000000000000000000F80000000000000000007C00000000000000000
03E0000000000000000003E0000000000000000001F0000000000000000000F800000000
00000000007C0000000000000000007E0000000000000000001F8000000000000000000F
C0000000000000000007F07FFFFFFFFFFFFFFFFFFCFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FFFFFFFFFF7FFFFFFFFFFFFFFFFFFC000000000000000007F000000000000000000FC000
000000000000001F8000000000000000007E0000000000000000007C0000000000000000
00F8000000000000000001F0000000000000000003E0000000000000000003E000000000
0000000007C000000000000000000F8000000000000000000F8000000000000000001F00
00000000000000001E0000000000000000001E0000000000000000003E00000000000000
00003C0000000000000000003C0000000000000000007C00000000000000000078000000
0000000000007800000000000000000030000050307BAE5B>33 D<0000003F000003FF00
000FE000003F8000007E000001FC000001F8000003F0000003F0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000000FE00000
0FC000001FC000003F8000003F000000FE000003F800007FE00000FF0000007FE0000003
F8000000FE0000003F0000003F8000001FC000000FC000000FE0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00000
07E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000003F00000
03F0000001F8000001FC0000007E0000003F8000000FE0000003FF0000003F205B7AC32D
>102 D<FC000000FFC0000007F0000001FC0000007E0000003F8000001F8000000FC000
000FC0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E0000007F0000003F0000003F8000001FC000000FC0000007F0000001FC0
000007FE000000FF000007FE00001FC000007F000000FC000001FC000003F8000003F000
0007F0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E000
0007E0000007E000000FC000000FC000001F8000003F8000007E000001FC000007F00000
FFC00000FC000000205B7AC32D>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F060045B
76C319>106 D E
%EndDVIPSBitmapFont
/Fe 134[40 1[61 40 45 25 35 35 1[45 45 45 66 25 40 1[25
45 45 25 40 45 40 1[45 51[30 42[45 2[{TeXBase1Encoding ReEncodeFont}23
90.9091 /Times-Italic rf
%DVIPSBitmapFont: Ff cmmi10 10.95 4
/Ff 4 60 df<000007F800000000003FFF0000000000FC0F8000000003F003E00000000F
C001F00070001F8001F800F0007F0000F800E000FE0000FC00E001FC00007E00E003FC00
007E01E003F800007E01C007F000003F01C00FF000003F03800FE000003F03801FE00000
3F07803FE000003F07003FC000003F0F003FC000003F0E007FC000003F1E007F8000003F
1C007F8000003F3C007F8000003F7800FF8000003F7000FF0000003FF000FF0000003FE0
00FF0000003FC000FF0000003F8000FF0000003F8000FF0000003F00007F0000003F0000
7F0000003F00007F0000007F00003F000000FF00003F000001FF80001F8000079F81C01F
80000F1F81C00FC0003C0F83C007E000F00F838001F80FC007C700007FFF0003FE00001F
F00000F80034297DA73A>11 D<000000001FE00000000000FFFC0000000003F03E000000
000F800F800000001E000780000000380007C0000000F00003E0000001E00003E0000003
C00003E0000007800003F0000007000003F000000E000003F000001E000003F000001C00
0007F0000038000007E0000078000007E0000070000007E00000F000000FE00000E00000
0FC00001E000000FC00001C000001F800001C000003F000003C000003F0000038000007E
000003800000FC000007801FF9F0000007007FFFE000000700700FC0000007007FFFE000
000F001FF1F000000E000001F800000E000000FC00000E000000FE00001E0000007E0000
1C0000007F00001C0000007F00001C0000007F00003C0000007F0000380000007F000038
0000007F0000380000007F000078000000FF000070000000FF000070000000FF00007000
0000FF0000F0000001FF0000F0000001FE0000E0000001FE0000E0000001FE0001E00000
03FC0001E0000003FC0001E0000003F80001E0000007F80003F0000007F00003F000000F
E00003F000001FE00003F800001FC00007B800003F8000071C00007F0000071E0000FC00
00070F0001F800000F078007E000000E01F01F8000000E007FFE0000000E000FF0000000
1E0000000000001C0000000000001C0000000000001C0000000000003C00000000000038
000000000000380000000000003800000000000078000000000000700000000000007000
000000000070000000000000F0000000000000E0000000000000E0000000000000E00000
00000000E000000000000034527EBF33>I<1E007F807F80FFC0FFC0FFC0FFC07F807F80
1E000A0A798919>58 D<1E007F80FF80FFC0FFC0FFE0FFE0FFE07FE01E60006000600060
006000E000C000C000C001C001800380030007000E001C001800380030000B1C798919>
I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmr10 10 3
/Fg 3 59 df<0000600000E00001C0000380000700000E00001E00003C00007800007800
00F00001E00001E00003C00003C00007C0000780000F80000F00000F00001F00001E0000
1E00003E00003E00003E00007C00007C00007C00007C00007C00007C0000F80000F80000
F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000
F80000F80000F80000F800007C00007C00007C00007C00007C00007C00003E00003E0000
3E00001E00001E00001F00000F00000F00000F800007800007C00003C00003C00001E000
01E00000F000007800007800003C00001E00000E000007000003800001C00000E0000060
135278BD20>40 D<C00000E000007000003800001C00000E00000F000007800003C00003
C00001E00000F00000F000007800007800007C00003C00003E00001E00001E00001F0000
0F00000F00000F80000F80000F800007C00007C00007C00007C00007C00007C00003E000
03E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E000
03E00003E00003E00003E00003E00007C00007C00007C00007C00007C00007C0000F8000
0F80000F80000F00000F00001F00001E00001E00003E00003C00007C0000780000780000
F00000F00001E00003C00003C0000780000F00000E00001C0000380000700000E00000C0
000013527CBD20>I<1C007F00FF80FF80FF80FF80FF807F001C00000000000000000000
0000000000000000000000000000000000000000000000000000001C007F00FF80FF80FF
80FF80FF807F001C00092479A317>58 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmsy10 10 4
/Fh 4 107 df<0000000000001E00000000000000001E00000000000000001E00000000
000000001E00000000000000001F00000000000000000F00000000000000000F00000000
000000000F800000000000000007800000000000000007C00000000000000003E0000000
0000000003E00000000000000001F00000000000000000F80000000000000000FC000000
00000000007E00000000000000003F00000000000000001F80000000000000000FC00000
000000000007F07FFFFFFFFFFFFFFFFCFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFF
FFFFFFFFFFFFFC0000000000000007F0000000000000000FC0000000000000001F800000
00000000003F00000000000000007E0000000000000000FC0000000000000000F8000000
0000000001F00000000000000003E00000000000000003E00000000000000007C0000000
000000000780000000000000000F80000000000000000F00000000000000000F00000000
000000001F00000000000000001E00000000000000001E00000000000000001E00000000
000000001E0000482C7BAA53>33 D<000001F800000FF800003F800000FC000001F80000
03F0000007E0000007E000000FE000000FC000000FC000000FC000000FC000000FC00000
0FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC00000
0FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC00000
0FC000000FC000001FC000001F8000003F8000007F000000FE000003F800007FE00000FF
0000007FE0000003F8000000FE0000007F0000003F8000001F8000001FC000000FC00000
0FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC00000
0FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC00000
0FC000000FC000000FC000000FC000000FC000000FC000000FE0000007E0000007E00000
03F0000001F8000000FC0000003F8000000FF8000001F81D537ABD2A>102
D<FC000000FFC0000007F0000001FC0000007E0000003F0000003F8000001F8000001FC0
00000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FE0000007E0
000007F0000003F8000001FC0000007E0000001FF0000007F800001FF000007E000001FC
000003F8000007F0000007E000000FE000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC0
00000FC000000FC000001FC000001F8000003F8000003F0000007E000001FC000007F000
00FFC00000FC0000001D537ABD2A>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F060045377BD17>106
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmmi10 10 4
/Fi 4 60 df<00003FC000000000FFF800000007E07C0000000F801F0000003F001F800C
007E000F800C00FC0007C01C01F80007E01803F00007E01807E00003E0380FE00003F030
0FC00003F0301FC00003F0703F800003F0603F800003F0E07F800003F0C07F000003F1C0
7F000003F1807F000003F380FF000003F300FE000003F700FE000003FE00FE000003FC00
FE000003FC00FC000003F800FC000003F000FC000003F000FC000003F000FC000003F000
7E000007F0007E00000FF0003E00001DF8183F000079F8181F0000E1F8380F8007C0F830
07E03F007CF001FFF8003FC0003FC0000F802E267DA435>11 D<00000001FC0000000007
FF800000001E07C00000007801E0000000E001F0000001C000F80000038000F800000700
00F800000E0000FC00001C0000FC0000380000FC0000300000FC0000700001FC00006000
01F80000E00001F80000C00001F80001C00003F80001800003F00003800003F000030000
07E00003000007C0000700000FC0000600001F80000600FFBF00000E01FFFC00000C0381
F800000C03FFFE00000C00FF1F00001C00001F80001800000F80001800000FC000180000
0FC0003800000FC00030000007E00030000007E0003000000FE0007000000FE000600000
0FE0006000000FE0006000000FE000E000001FE000C000001FC000C000001FC000C00000
1FC001C000003FC001C000003F8001C000003F8001C000007F0003C000007F0003C00000
FE0003C00000FC0003E00001F80007600003F00006700007E0000638000FC000061C001F
80000E0E003F00000C0780FC00000C01FFF000000C007F8000001C000000000018000000
000018000000000018000000000038000000000030000000000030000000000030000000
0000700000000000600000000000600000000000600000000000E00000000000C0000000
0000C000000000002E4B7EBA2F>I<1C007F00FF80FF80FF80FF80FF807F001C00090979
8817>58 D<1C007F00FF80FF80FFC0FFC0FFC07FC01CC000C000C000C000C001C0018001
8003800300070006000E001C003800700060000A19798817>I E
%EndDVIPSBitmapFont
/Fj 134[50 50 1[50 50 50 50 50 1[50 50 50 1[50 2[50 1[50
1[50 50 50 1[50 97[{TeXBase1Encoding ReEncodeFont}17
83.022 /Courier-Bold rf /Fk 134[55 55 55 55 55 55 55
55 1[55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 55
7[55 55 1[55 55 55 55 55 1[55 55 55 55 55 2[55 55 55
55 55 1[55 55 55 3[55 2[55 11[55 3[55 42[{TeXBase1Encoding ReEncodeFont}
48 90.9091 /Courier rf /Fl 134[55 55 1[55 55 55 55 55
1[55 55 55 1[55 2[55 1[55 1[55 55 55 1[55 97[{
TeXBase1Encoding ReEncodeFont}17 90.9091 /Courier-Bold
rf /Fm 134[72 72 2[72 72 72 72 2[72 72 1[72 2[72 3[72
1[72 72 72 10[72 1[72 72 2[72 72 1[72 72 2[72 5[72 20[72
46[{TeXBase1Encoding ReEncodeFont}24 119.552 /Courier
rf /Fn 130[50 1[50 1[50 50 50 50 50 50 50 50 1[50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 3[50 1[50 3[50
50 50 50 50 50 1[50 50 50 50 50 1[50 50 50 50 50 50 50
50 5[50 1[50 50 7[50 50 50 50 50 50 50 1[50 50 50 5[50
34[{TeXBase1Encoding ReEncodeFont}61 83.022 /Courier
rf /Fo 136[66 8[51 76 25 6[40 51 2[45 17[71 66 4[35 9[45
63[{TeXBase1Encoding ReEncodeFont}11 90.9091 /Times-Bold
rf /Fp 134[50 1[72 50 55 33 39 44 1[55 50 55 83 28 55
1[28 55 50 33 44 55 44 55 50 13[55 2[61 1[72 4[39 4[72
72 66 72 6[33 4[50 50 50 50 50 1[28 25 46[{
TeXBase1Encoding ReEncodeFont}38 99.6264 /Times-Bold
rf /Fq 133[40 45 45 66 45 45 25 35 30 45 45 45 45 71
25 45 25 25 45 45 30 40 45 40 45 40 9[86 66 66 56 51
61 2[66 66 81 56 66 35 30 66 1[51 56 66 61 61 66 5[25
25 45 45 45 45 45 45 45 45 45 45 25 23 30 23 2[30 30
30 35[51 51 2[{TeXBase1Encoding ReEncodeFont}67 90.9091
/Times-Roman rf /Fr 138[66 40 47 53 1[66 60 66 100 33
2[33 66 60 1[53 66 53 1[60 12[80 3[73 2[113 80 8[86 12[60
60 60 60 60 60 2[30 46[{TeXBase1Encoding ReEncodeFont}28
119.552 /Times-Bold rf /Fs 134[103 5[80 92 2[103 115
4[57 2[69 92 1[92 115 103 14[149 4[195 138 8[149 138
66[{TeXBase1Encoding ReEncodeFont}16 206.559 /Times-Bold
rf /Ft 139[57 1[76 1[96 7[96 2[76 3[86 29[124 15[86 86
86 49[{TeXBase1Encoding ReEncodeFont}10 172.188 /Times-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 241 1180 a Ft(Chapter)44 b(1)241 1597 y Fs(Basics)241
2081 y Fr(1.1)119 b(P)n(orting)29 b(old)i(CML)f(pr)n(ograms)241
2292 y Fq(There)j(ha)n(v)o(e)g(been)h(substantial)i(changes)f(from)e(v)
o(ersion)h(0.9.8)f(of)g(CML.)e(Most)i(of)g(these)241
2405 y(changes)24 b(are)f(cosmetic)h(name)f(changes)h(meant)f(to)f
(track)i(changes)g(in)f(the)g(SML)d(interf)o(aces,)241
2518 y(and)j(to)g(rationalize)j(naming)d(con)l(v)o(entions.)32
b(In)23 b(this)g(section,)i(we)d(detail)i(the)f(changes)i(to)d(the)241
2631 y(CML)f(interf)o(aces,)26 b(and)e(describe)i(correspondence)i
(between)c(the)g(old)g(and)g(ne)n(w)e(interf)o(aces.)241
2893 y Fp(1.1.1)99 b(Backwards)26 b(compatibility)e(modules)241
3072 y Fq(T)-7 b(o)21 b(ease)h(the)h(transition)i(from)d(v)o(ersion)h
(0.9.8)f(of)g(CML)e(to)i(the)h(ne)n(w)e(interf)o(aces,)k(we)c(pro)o
(vide)241 3185 y(tw)o(o)i(backw)o(ards)i(compatibility)i(modules)e(in)e
(the)h(CML)e(Library)-6 b(.)241 3447 y Fp(1.1.2)99 b(Name)25
b(changes)1187 3620 y Fo(Old)d(name)217 b(New)22 b(name)1187
3733 y Fn(accept)298 b(recv)1187 3846 y(receive)248 b(recvEvt)1187
3959 y(transmit)198 b(sendEvt)1187 4072 y(timout)298
b(timeOutEvt)1187 4185 y(waitUntil)148 b(atTimeEvt)1187
4298 y(threadWait)98 b(joinEvt)1187 4410 y(sameThread)g(sameTid)241
4667 y Fp(1.1.3)h(Input/output)241 4846 y Fq(The)28 b(most)g
(signi\002cant)j(changes)f(to)e(the)h(CML)e(interf)o(aces)k(ha)n(v)o(e)
e(to)f(do)h(with)f(input/output)241 4959 y(operations.)41
b(In)26 b(v)o(ersion)j(0.9.8,)e(the)g(structure)i Fn(CIO)c
Fq(pro)o(vided)k(an)d(implementation)k(of)c(the)1712
5187 y(1)p eop
%%Page: 2 2
2 1 bop 664 555 a Fq(SML/NJ)30 b Fn(IO)g Fq(signature)j(e)o(xtended)g
(with)e(e)n(v)o(ent-v)n(alued)j(operations.)54 b(The)31
b(old)h(SML)d(I/O)664 668 y(interf)o(ace)j(has)f(been)f(replaced)i
(with)e(a)g(ne)n(w)f(interf)o(ace,)k(which)e(is)f(described)i(in)e(the)
g(SML)664 781 y(Basis)24 b(Library)g(Manual,)g(and)g(CML)e(has)i(follo)
n(wed)h(suite.)664 1030 y Fp(1.1.4)99 b(Condition)25
b(v)o(ariables)664 1208 y(1.1.5)99 b(P)n(olling)664 1382
y Fq(The)25 b(only)h(loss)g(in)f(function)i(from)e(v)o(ersion)i(0.9.8)e
(is)g(the)h(elimination)i(of)d(the)g Fn(poll)f Fq(opera-)664
1495 y(tion,)e(which)f(pro)o(vided)i(a)d(non-blocking)25
b(form)c(of)f Fn(sync)p Fq(.)27 b(Instead)22 b(of)f(this)g(operation,)j
(CML)664 1608 y(no)n(w)h(pro)o(vides)h(non-blocking)j(input)e
(operations)g(on)e(man)o(y)g(of)g(the)g(basic)h(communication)664
1721 y(types.)2136 5187 y(2)p eop
%%Page: 3 3
3 2 bop 241 1179 a Ft(Chapter)44 b(2)241 1595 y Fs(Cor)l(e)52
b(CML)f(r)l(efer)l(ence)241 2077 y Fr(2.1)119 b(The)30
b Fm(CML)f Fr(structur)n(e)241 2405 y Fp(Synopsis:)361
2519 y Fl(signature)18 b Fk(CML)361 2632 y Fl(structure)73
b Fk(CML:)53 b(CML)241 2866 y Fp(Interface:)361 2966
y Fj(type)20 b Fn(thread)p 886 2966 25 4 v 29 w(id)361
3066 y Fj(type)g Fi(\013)h Fn(chan)361 3165 y Fj(type)f
Fi(\013)h Fn(event)361 3265 y Fj(val)15 b Fn(version:)98
b Fh(f)p Fn(system)22 b Fg(:)h Fn(string)o Fi(;)k Fn(version)p
2138 3265 V 29 w(id)c Fg(:)g Fn(int)f(list)o Fi(;)28
b Fn(date)22 b Fg(:)i Fn(string)n Fh(g)361 3365 y Fj(val)c
Fn(banner:)98 b(string)361 3464 y Fj(val)20 b Fn(spawnc:)98
b Fg(\()p Fi(\013)24 b Fh(!)f Fn(unit)o Fg(\))h Fh(!)f
Fi(\013)g Fh(!)g Fn(thread)p 2042 3464 V 29 w(id)361
3564 y Fj(val)d Fn(spawn:)98 b Fg(\()p Fn(unit)23 b Fh(!)g
Fn(unit)o Fg(\))h Fh(!)f Fn(thread)p 1956 3564 V 29 w(id)361
3664 y Fj(val)d Fn(yield:)98 b(unit)23 b Fh(!)g Fn(unit)361
3763 y Fj(val)d Fn(exit:)99 b(unit)22 b Fh(!)h Fi(\013)361
3863 y Fj(val)d Fn(getTid:)98 b(unit)23 b Fh(!)g Fn(thread)p
1613 3863 V 28 w(id)361 3962 y Fj(val)d Fn(sameTid:)98
b Fg(\()p Fn(thread)p 1366 3962 V 29 w(id)18 b(*)g(thread)p
1881 3962 V 29 w(id)p Fg(\))23 b Fh(!)g Fn(bool)361 4062
y Fj(val)d Fn(compareTid:)98 b Fg(\()p Fn(thread)p 1516
4062 V 29 w(id)18 b(*)g(thread)p 2031 4062 V 29 w(id)o
Fg(\))24 b Fh(!)f Fn(order)361 4162 y Fj(val)d Fn(hashTid:)98
b(thread)p 1334 4162 V 29 w(id)23 b Fh(!)g Fn(word)361
4261 y Fj(val)d Fn(tidToString:)97 b(thread)p 1533 4261
V 29 w(id)23 b Fh(!)g Fn(string)361 4361 y Fj(val)d Fn(joinEvt:)98
b(thread)p 1334 4361 V 29 w(id)23 b Fh(!)g Fn(unit)f(event)361
4461 y Fj(val)e Fn(channel:)98 b(unit)22 b Fh(!)h Fi(\013)c
Fn(chan)361 4560 y Fj(val)h Fn(sameChannel:)97 b Fg(\()p
Fi(\013)19 b Fn(chan)f(*)g Fi(\013)h Fn(chan)p Fg(\))k
Fh(!)g Fn(bool)361 4660 y Fj(val)d Fn(send:)99 b Fg(\()p
Fi(\013)19 b Fn(chan)f(*)g Fi(\013)p Fg(\))24 b Fh(!)f
Fn(unit)361 4759 y Fj(val)d Fn(recv:)99 b Fi(\013)19
b Fn(chan)j Fh(!)h Fi(\013)361 4859 y Fj(val)d Fn(sendEvt:)98
b Fg(\()p Fi(\013)19 b Fn(chan)f(*)g Fi(\013)p Fg(\))24
b Fh(!)f Fn(unit)f(event)361 4959 y Fj(val)e Fn(recvEvt:)98
b Fi(\013)19 b Fn(chan)j Fh(!)h Fi(\013)c Fn(event)1712
5187 y Fq(3)p eop
%%Page: 4 4
4 3 bop 784 555 a Fj(val)20 b Fn(sendPoll:)98 b Fg(\()p
Fi(\013)19 b Fn(chan)f(*)g Fi(\013)p Fg(\))24 b Fh(!)f
Fn(bool)784 655 y Fj(val)d Fn(recvPoll:)98 b Fi(\013)19
b Fn(chan)j Fh(!)i Fi(\013)18 b Fn(option)784 754 y Fj(val)i
Fn(wrap:)99 b Fg(\()p Fi(\013)19 b Fn(event)f(*)p Fg(\()p
Fi(\013)23 b Fh(!)g Fi(\014)t Fg(\)\))h Fh(!)f Fi(\014)g
Fn(event)784 854 y Fj(val)d Fn(wrapHandler:)98 b Fg(\()p
Fi(\013)19 b Fn(event)e(*)p Fg(\()p Fn(exn)23 b Fh(!)g
Fi(\013)c Fn(event)o Fg(\)\))24 b Fh(!)f Fi(\013)c Fn(event)784
954 y Fj(val)h Fn(guard:)99 b Fg(\()p Fn(unit)22 b Fh(!)i
Fi(\013)18 b Fn(event)o Fg(\))24 b Fh(!)f Fi(\013)c Fn(event)784
1053 y Fj(val)h Fn(withNack:)98 b Fg(\()p Fn(unit)23
b(event)f Fh(!)h Fi(\013)c Fn(event)o Fg(\))k Fh(!)g
Fi(\013)c Fn(event)784 1153 y Fj(val)h Fn(choose:)99
b Fi(\013)19 b Fn(event)j(list)g Fh(!)h Fi(\013)c Fn(event)784
1253 y Fj(val)h Fn(sync:)99 b Fi(\013)19 b Fn(event)j
Fh(!)h Fi(\013)784 1352 y Fj(val)d Fn(select:)99 b Fi(\013)19
b Fn(event)j(list)g Fh(!)h Fi(\013)784 1452 y Fj(val)d
Fn(never:)99 b Fi(\013)19 b Fn(event)784 1551 y Fj(val)h
Fn(alwaysEvt:)98 b Fi(\013)24 b Fh(!)f Fi(\013)c Fn(event)784
1651 y Fj(val)h Fn(timeOutEvt:)98 b(Time)o Fi(:)p Fn(time)23
b Fh(!)g Fn(unit)f(event)784 1751 y Fj(val)e Fn(atTimeEvt:)98
b(Time)o Fi(:)p Fn(time)23 b Fh(!)g Fn(unit)f(event)664
1990 y Fp(Description:)664 2109 y Fl(type)f Fk(thread)p
1240 2109 28 4 v 30 w(id)784 2304 y Fq(Thread)33 b(IDs)f(are)h(the)f
(unique)i(IDs)e(associated)k(with)c(CML)e(threads.)57
b(These)33 b(IDs)f(are)784 2417 y(in)c(an)g(unspeci\002ed)i(total)e
(order)h(that)f(can)h(be)e(used)i(to)f(break)h(c)o(yclic)f(depedencies)
k(\(see)784 2530 y Fn(compareTid)p Fq(\).)664 2724 y
Fl(type)21 b Ff(\013)i Fk(chan)784 2919 y Fq(This)h(is)f(the)h(type)g
(constructor)j(for)c(synchronous)28 b(channels.)664 3114
y Fl(type)21 b Ff(\013)i Fk(event)784 3308 y Fq(Ev)o(ent)28
b(v)n(alues)h(are)f(abstract)h(representations)j(of)c(synchronous)j
(operations)g(\(so)d(called)784 3421 y Fe(\002r)o(st-class)f(syc)o(hr)l
(onous)f(oper)o(ations)p Fq(\).)664 3616 y Fl(val)j Fk(version:)106
b Fd(f)p Fk(system)37 b Fc(:)j Fk(string)n Ff(;)30 b
Fk(version)p 2654 3616 V 30 w(id)39 b Fc(:)h Fk(int)e(list)n
Ff(;)31 b Fk(date)38 b Fc(:)784 3729 y Fk(string)m Fd(g)664
3842 y Fl(val)22 b Fk(banner:)105 b(string)784 4036 y
Fq(These)24 b(specify)h(the)f(v)o(ersion)h(of)f(CML)d(in)j(the)g(same)f
(format)h(as)g(SML/NJ.)664 4231 y Fl(val)e Fk(spawnc:)105
b Fc(\()p Ff(\013)27 b Fd(!)e Fk(unit)n Fc(\))g Fd(!)h
Ff(\013)f Fd(!)h Fk(thread)p 2507 4231 V 30 w(id)664
4344 y Fl(val)c Fk(spawn:)106 b Fc(\()p Fk(unit)24 b
Fd(!)h Fk(unit)n Fc(\))h Fd(!)f Fk(thread)p 2412 4344
V 30 w(id)784 4538 y Fn(spawnc)49 b Fb(f)55 b(x)784 4651
y Fn(spawn)49 b Fb(f)84 b Fq(creates)32 b(a)e(ne)n(w)g(thread)i(of)e
(control)i(to)e(e)n(v)n(aluate)i(the)f(body)g(of)f Fb(f)5
b Fq(.)49 b(A)29 b(ne)n(w)784 4764 y(unique)c(ID)e(for)h(the)g(thread)g
(is)g(created)h(and)f(returned.)664 4959 y Fl(val)e Fk(yield:)106
b(unit)23 b Fd(!)i Fk(unit)2136 5187 y Fq(4)p eop
%%Page: 5 5
5 4 bop 361 555 a Fq(This)23 b(function)k(can)d(be)g(used)h(to)e
(implement)i(an)f(e)o(xplicit)i(conte)o(xt)f(switch.)30
b(Since)25 b(CML)361 668 y(is)31 b(preempti)n(v)o(ely)k(scheduled,)h
(it)c(should)h(ne)n(v)o(er)g(be)e(necessary)k(for)d(user)g(programs)i
(to)361 781 y(call)24 b(this)g(function.)31 b(It)23 b(is)g(mainly)i
(used)f(for)g(performance)i(measurements.)241 953 y Fl(val)21
b Fk(exit:)107 b(unit)23 b Fd(!)j Ff(\013)361 1126 y
Fn(exit)49 b(\(\))72 b Fq(causes)25 b(the)f(calling)h(thread)g(to)e
(terminate.)241 1298 y Fl(val)e Fk(getTid:)106 b(unit)23
b Fd(!)j Fk(thread)p 1613 1298 28 4 v 30 w(id)361 1470
y Fn(getTid)48 b(\(\))73 b Fq(returns)25 b(the)f(thread)h(ID)d(of)i
(the)f(calling)j(thread.)241 1643 y Fl(val)21 b Fk(sameTid:)106
b Fc(\()p Fk(thread)p 1343 1643 V 30 w(id)19 b(*)h(thread)p
1907 1643 V 30 w(id)o Fc(\))26 b Fd(!)f Fk(bool)361 1815
y Fn(sameTid)48 b(\()p Fb(tid1)o Fn(,)i Fb(tid2)o Fn(\))70
b Fq(returns)22 b(true,)f(if)g(the)f(tw)o(o)h(thread)h(IDs)e(are)g(the)
h(same)g(ID.)241 1987 y Fl(val)g Fk(compareTid:)104 b
Fc(\()p Fk(thread)p 1506 1987 V 31 w(id)19 b(*)h(thread)p
2071 1987 V 30 w(id)o Fc(\))25 b Fd(!)g Fk(order)361
2160 y Fn(compareTid)48 b(\()p Fb(tid1)o Fn(,)h Fb(tid2)p
Fn(\))70 b Fq(compares)24 b(the)e(tw)o(o)g(thread)h(IDs)f(and)g
(returns)i(their)361 2273 y(order)g(in)f(the)g(total)h(ordering)i(of)d
(thread)h(IDs.)k(The)23 b(precise)i(semantics)g(of)e(this)h(ordering)
361 2386 y(is)f(left)h(unspeci\002ed,)i(other)e(than)g(to)g(say)g(it)f
(is)g(a)g(total)i(order)-5 b(.)241 2558 y Fl(val)21 b
Fk(hashTid:)106 b(thread)p 1308 2558 V 30 w(id)24 b Fd(!)h
Fk(word)361 2730 y Fn(hashTid)48 b Fb(tid)76 b Fq(returns)25
b(a)e(hashing)i(of)f(the)g(thread)h(ID)d Fb(tid)s Fq(.)241
2903 y Fl(val)f Fk(tidToString:)104 b(thread)p 1526 2903
V 30 w(id)24 b Fd(!)h Fk(string)361 3075 y Fn(tidToString)48
b Fb(tid)75 b Fq(returns)25 b(a)e(string)i(representation)j(of)23
b(the)h(thread)h(ID)d Fb(tid)s Fq(.)241 3247 y Fl(val)f
Fk(joinEvt:)106 b(thread)p 1308 3247 V 30 w(id)24 b Fd(!)h
Fk(unit)f(event)361 3420 y Fn(joinEvt)48 b Fb(tid)86
b Fq(creates)36 b(an)e(e)n(v)o(ent)g(v)n(alue)h(for)g(synchronizing)j
(on)c(the)g(termination)361 3532 y(of)29 b(the)g(thread)h(with)f(the)g
(ID)f Fb(tid)s Fq(.)44 b(There)29 b(are)g(three)h(w)o(ays)f(that)g(a)f
(thread)j(may)d(termi-)361 3645 y(nate:)38 b(the)29 b(function)h(that)e
(w)o(as)g(passed)h(to)f Fn(spawn)e Fq(may)i(return;)j(it)d(may)g(call)g
(the)g Fn(exit)361 3758 y Fq(function,)k(or)d(it)f(may)h(ha)n(v)o(e)g
(an)g(uncaught)i(e)o(xception.)47 b(Note)29 b(that)g
Fn(joinEvt)e Fq(does)i(not)361 3871 y(distinguish)g(between)f(these)f
(cases;)i(it)e(also)g(does)g(not)g(become)g(enabled)h(if)f(the)f(named)
361 3984 y(thread)f(deadlocks)h(\(e)n(v)o(en)e(if)f(it)g(is)h(garbage)h
(collected\).)241 4156 y Fl(val)c Fk(channel:)106 b(unit)23
b Fd(!)i Ff(\013)c Fk(chan)361 4329 y Fn(channel)48 b(\(\))72
b Fq(creates)26 b(a)d(ne)n(w)g(synchronous)k(channel.)241
4501 y Fl(val)21 b Fk(sameChannel:)104 b Fc(\()p Ff(\013)21
b Fk(chan)d(*)i Ff(\013)h Fk(chan)n Fc(\))k Fd(!)h Fk(bool)361
4673 y Fn(sameChannel)48 b(\()p Fb(ch1)o Fn(,)h Fb(ch2)p
Fn(\))80 b Fq(returns)33 b(true,)h(if)d(the)h(tw)o(o)f(channels)i(are)f
(the)g(same)361 4786 y(channel.)241 4959 y Fl(val)21
b Fk(send:)107 b Fc(\()p Ff(\013)21 b Fk(chan)d(*)i Ff(\013)p
Fc(\))26 b Fd(!)f Fk(unit)1712 5187 y Fq(5)p eop
%%Page: 6 6
6 5 bop 784 555 a Fn(send)49 b(\()p Fb(ch)p Fn(,)g Fb(a)p
Fn(\))80 b Fq(sends)32 b(the)f(message)i Fb(a)d Fq(on)h(the)g
(synchronous)k(channel)d Fb(ch)p Fq(.)50 b(This)784 668
y(operation)37 b(blocks)e(the)f(calling)i(thread)f(until)g(there)g(is)f
(another)h(thread)h(attempting)g(a)784 781 y Fn(recv)22
b Fq(operation)k(on)e(the)g(channel)h Fb(ch)p Fq(.)664
955 y Fl(val)d Fk(recv:)106 b Ff(\013)21 b Fk(chan)i
Fd(!)j Ff(\013)784 1128 y Fn(recv)49 b Fb(ch)74 b Fq(recei)n(v)o(es)27
b(a)e(message)i(from)f(the)f(channel)j Fb(ch)o Fq(.)34
b(This)26 b(operation)i(blocks)f(the)784 1241 y(calling)i(thread)f
(until)f(there)h(is)f(another)h(thread)g(attempting)h(a)e
Fn(send)e Fq(operation)k(on)e(the)784 1354 y(channel)f
Fb(ch)o Fq(.)664 1528 y Fl(val)c Fk(sendEvt:)105 b Fc(\()p
Ff(\013)21 b Fk(chan)d(*)i Ff(\013)p Fc(\))26 b Fd(!)f
Fk(unit)f(event)664 1641 y Fl(val)e Fk(recvEvt:)105 b
Ff(\013)21 b Fk(chan)i Fd(!)i Ff(\013)c Fk(event)784
1815 y Fq(These)h(functions)i(create)e(e)n(v)o(ent)g(v)n(alues)h(to)e
(represent)j(the)e Fn(send)e Fq(and)i Fn(recv)e Fq(operations.)664
1988 y Fl(val)i Fk(sendPoll:)105 b Fc(\()p Ff(\013)21
b Fk(chan)d(*)i Ff(\013)p Fc(\))26 b Fd(!)f Fk(bool)784
2162 y Fn(send)49 b(\()p Fb(ch)p Fn(,)g Fb(a)p Fn(\))76
b Fq(attempts)28 b(to)f(send)h(the)g(message)g Fb(a)e
Fq(on)h(the)g(synchronous)k(channel)784 2275 y Fb(ch)p
Fq(.)d(If)23 b(this)i(operation)h(can)e(complete)h(without)g(blocking)h
(the)d(calling)j(thread,)f(then)f(the)784 2388 y(message)34
b(is)f(sent)g(and)g Fn(true)e Fq(is)i(returned.)58 b(Otherwise,)36
b(no)d(communication)i(is)e(pre-)784 2501 y(formed)c(and)f
Fn(false)e Fq(is)h(returned.)44 b(This)27 b(function)j(is)e(not)g
(recommended)i(for)d(general)784 2614 y(use;)d(it)g(is)f(pro)o(vided)j
(as)d(an)h(ef)n(\002cienc)o(y)g(aid)g(for)g(certain)h(kinds)f(of)g
(protocols.)664 2787 y Fl(val)e Fk(recvPoll:)105 b Ff(\013)20
b Fk(chan)k Fd(!)h Ff(\013)c Fk(option)784 2961 y Fn(recvPoll)48
b Fb(ch)80 b Fq(attempts)32 b(to)f(recei)n(v)o(e)h(a)e(message)i(from)f
(the)g(channel)h Fb(ch)p Fq(.)50 b(If)30 b(there)784
3074 y(is)h(no)f(other)i(thread)g(of)n(fering)g(to)f
Fn(send)e Fq(a)h(message)i(on)e Fb(ch)p Fq(,)h(then)h(this)f(returns)h
Fn(NONE)p Fq(,)784 3187 y(otherwise)i(it)d(returns)j
Fn(SOME)c Fq(wrapped)j(around)h(the)e(message.)55 b(This)32
b(function)i(is)e(not)784 3300 y(recommended)38 b(for)d(general)i(use;)
42 b(it)35 b(is)g(pro)o(vided)j(as)d(an)g(ef)n(\002cienc)o(y)i(aid)e
(for)h(certain)784 3413 y(kinds)25 b(of)e(protocols.)664
3586 y Fl(val)f Fk(wrap:)106 b Fc(\()p Ff(\013)21 b Fk(event)d(*)p
Fc(\()p Ff(\013)26 b Fd(!)f Ff(\014)5 b Fc(\)\))26 b
Fd(!)f Ff(\014)h Fk(event)784 3760 y Fn(wrap)49 b(\()p
Fb(ev)6 b Fn(,)50 b Fb(f)5 b Fn(\))85 b Fq(wraps)37 b(the)g
(post-synchronizatio)q(n)42 b(action)37 b Fb(f)k Fq(around)d(the)f(e)n
(v)o(ent)784 3873 y(v)n(alue)25 b Fb(ev)6 b Fq(.)664
4047 y Fl(val)22 b Fk(wrapHandler:)103 b Fc(\()p Ff(\013)21
b Fk(event)d(*)p Fc(\()p Fk(exn)24 b Fd(!)h Ff(\013)c
Fk(event)n Fc(\)\))k Fd(!)h Ff(\013)20 b Fk(event)784
4220 y Fn(wrapHandler)48 b(\()p Fb(ev)6 b Fn(,)50 b Fb(f)5
b Fn(\))73 b Fq(wraps)24 b(the)g(e)o(xception)j(handler)f(function)g
Fb(f)i Fq(around)e(the)784 4333 y(e)n(v)o(ent)21 b(v)n(alue)h
Fb(ev)7 b Fq(.)27 b(If,)20 b(during)j(e)o(x)o(ecution)g(of)d(some)h
(post-synchronizat)q(ion)27 b(action)22 b(in)f Fb(ev)6
b Fq(,)784 4446 y(an)30 b(e)o(xception)i(is)d(raised,)j(it)d(will)h(be)
f(caught)i(and)f(passed)h(to)f Fb(f)5 b Fq(.)46 b(Nesting)30
b(of)g(handlers)784 4559 y(w)o(orks)g(as)g(w)o(ould)g(be)g(e)o
(xpected:)43 b(the)30 b(innermost)i(handler)g(is)d(the)h(one)g(in)l(v)n
(ok)o(ed.)50 b(Note)784 4672 y(that)37 b(e)o(xceptions)j(raised)e(in)f
(the)g(pre-synchronization)43 b(actions)38 b(in)f Fb(ev)42
b Fq(\(i.e.,)d(actions)784 4785 y(de\002ned)25 b(by)e
Fn(guard)f Fq(and)i Fn(withNack)p Fq(\))d(are)j(not)g(handled)i(by)d
Fb(f)5 b Fq(.)664 4959 y Fl(val)22 b Fk(guard:)106 b
Fc(\()p Fk(unit)24 b Fd(!)h Ff(\013)c Fk(event)m Fc(\))26
b Fd(!)f Ff(\013)c Fk(event)2136 5187 y Fq(6)p eop
%%Page: 7 7
7 6 bop 361 555 a Fn(guard)49 b Fb(f)74 b Fq(creates)22
b Fe(delayed)j Fq(e)n(v)o(ent)c(v)n(alue)h(from)e(the)h(function)i
Fb(f)5 b Fq(.)27 b(When)21 b(the)f(resulting)361 668
y(e)n(v)o(ent)25 b(v)n(alue)g(is)f(synchronized)k(on,)d(the)g(function)
h Fb(f)j Fq(will)24 b(be)g(e)n(v)n(aluated)j(and)e(the)f(result-)361
781 y(ing)k(e)n(v)o(ent)g(v)n(alue)h(will)e(be)h(used)g(in)g(its)g
(place)g(in)g(the)g(synchronization.)46 b(This)28 b(pro)o(vides)361
894 y(a)e(mechanism)h(for)g(implementing)h(pre-synchronizati)q(on)k
(actions,)c(such)g(as)e(sending)i(a)361 1007 y(request)d(to)e(a)h(serv)
o(er)-5 b(.)241 1174 y Fl(val)21 b Fk(withNack:)105 b
Fc(\()p Fk(unit)24 b(event)f Fd(!)i Ff(\013)c Fk(event)m
Fc(\))26 b Fd(!)f Ff(\013)c Fk(event)361 1342 y Fn(withNack)48
b Fb(f)78 b Fq(creates)25 b Fe(delayed)j Fq(e)n(v)o(ent)d(v)n(alue)f
(from)g(the)g(function)i Fb(f)5 b Fq(.)29 b(As)23 b(in)h(the)g(case)361
1455 y(of)i Fn(guard)p Fq(,)f(the)h(function)i Fb(f)j
Fq(will)25 b(be)i(e)n(v)n(aluated)h(at)e(synchronization)31
b(time)26 b(and)g(the)h(re-)361 1568 y(sulting)21 b(e)n(v)o(ent)e(v)n
(alue)h(will)f(be)g(used)h(in)f(its)h(place)g(in)f(the)g
(synchronization.)32 b(Furthermore,)361 1681 y(when)23
b Fb(f)28 b Fq(is)c(e)n(v)n(aluated,)h(it)e(is)h(passed)h(a)e
Fe(ne)l(gative)j(ac)n(knowledg)o(ement)j Fq(e)n(v)o(ent)24
b(as)g(an)f(ar)n(gu-)361 1794 y(ment.)35 b(If)25 b(the)h(e)n(v)o(ent)g
(v)n(alue)g(that)g(is)g(returned)i(from)d(the)h(e)n(v)n(aluation)i(of)d
Fb(f)30 b Fq(is)c Fe(not)h Fq(chosen)361 1907 y(in)c(the)g
(synchronization,)28 b(then)c(the)f(ne)o(gati)n(v)o(e)h(e)n(v)o(ent)g
(will)f(be)g(enabled.)30 b(This)23 b(pro)o(vides)i(a)361
2020 y(mechanism)g(for)e(informing)j(serv)o(ers)e(that)h(a)e(client)h
(has)g(aborted)i(a)d(transaction.)241 2187 y Fl(val)e
Fk(choose:)106 b Ff(\013)21 b Fk(event)i(list)g Fd(!)i
Ff(\013)c Fk(event)361 2355 y Fn(choose)48 b Fb(l)67
b Fq(constructs)21 b(an)d(e)n(v)o(ent)h(v)n(alue)g(that)f(represents)j
(the)e(non-deterministic)j(choice)361 2468 y(of)h(the)h(e)n(v)o(ents)g
(in)g(the)g(list)g Fb(l)o Fq(.)241 2635 y Fl(val)d Fk(sync:)107
b Ff(\013)21 b Fk(event)i Fd(!)i Ff(\013)361 2803 y Fn(sync)49
b Fb(ev)79 b Fq(synchronizes)27 b(the)d(calling)h(thread)g(on)f(the)f
(e)n(v)o(ent)h Fb(ev)7 b Fq(.)241 2970 y Fl(val)21 b
Fk(select:)106 b Ff(\013)21 b Fk(event)i(list)g Fd(!)i
Ff(\013)361 3138 y Fn(select)48 b Fb(evs)84 b Fq(synchronizes)38
b(on)d(the)g(choice)h(of)f(a)g(list)g(of)f(e)n(v)o(ent)i(v)n(alues.)63
b(This)35 b(is)361 3251 y(semantically)26 b(equi)n(v)n(alant)g(to:)1125
3363 y Fn(sync)49 b(\(choose)148 b Fb(evs)o Fn(\))361
3489 y Fq(b)n(ut)24 b(is)f(more)h(ef)n(\002cient.)241
3657 y Fl(val)d Fk(never:)106 b Ff(\013)21 b Fk(event)361
3824 y Fn(never)69 b Fq(is)21 b(an)g(e)n(v)o(ent)g(v)n(alue)h(that)f
(is)g(ne)n(v)o(er)h(enabled)h(for)e(synchronization.)32
b(It)21 b(is)g(seman-)361 3937 y(tically)k(equi)n(v)n(alant)h(to)d(the)
h(e)o(xpression:)1125 4050 y Fn(choose)48 b([])241 4230
y Fl(val)21 b Fk(alwaysEvt:)105 b Ff(\013)25 b Fd(!)h
Ff(\013)20 b Fk(event)361 4398 y Fn(alwaysEvt)48 b Fb(a)74
b Fq(creates)27 b(an)f(e)n(v)o(ent)g(v)n(alue)g(that)g(is)f(al)o(w)o
(ays)i(enabled,)g(and)f(that)g(returns)361 4511 y(the)e(v)n(alue)g
Fb(a)e Fq(upon)j(synchronization.)241 4678 y Fl(val)c
Fk(timeOutEvt:)104 b(Time)n Ff(:)p Fk(time)24 b Fd(!)h
Fk(unit)f(event)361 4846 y Fn(timeOutEvt)48 b Fb(t)70
b Fq(creates)23 b(an)e(e)n(v)o(ent)g(v)n(alue)h(that)g(becomes)h
(enabled)g(at)e(the)g(time)g(inter)n(-)361 4959 y(v)n(al)i
Fb(t)g Fq(after)h(synchronization.)34 b(F)o(or)22 b(e)o(xample,)i(the)g
(e)o(xpression:)1712 5187 y(7)p eop
%%Page: 8 8
8 7 bop 1548 555 a Fn(sync)49 b(\(timeOutEvt)f(\(Time.fromSeconds)e
(1\)\))784 685 y Fq(will)19 b(delay)h(the)g(calling)h(thread)f(for)g
(one)f(second.)29 b(Note)20 b(that)f(the)h(speci\002ed)g(time)g(interv)
n(al)784 798 y(is)k(actually)h(a)e(minimum)h(w)o(aiting)g(time,)f(and)h
(the)g(delay)h(may)e(be)g(longer)-5 b(.)664 973 y Fl(val)22
b Fk(atTimeEvt:)104 b(Time)n Ff(:)p Fk(time)24 b Fd(!)h
Fk(unit)f(event)784 1148 y Fn(atTimeEvt)48 b Fb(t)81
b Fq(creates)33 b(an)e(e)n(v)o(ent)i(v)n(alue)f(that)g(becomes)h
(enabled)g(at)f(the)g(speci\002ed)784 1261 y(time)24
b Fb(t)o Fq(.)k(F)o(or)23 b(e)o(xample,)h(the)g(e)o(xpression:)1548
1377 y Fn(sync)49 b(\(atTimeEvt)f(\(Date.toTime)g(\(Date.date)g({)1747
1477 y(year)h(=)h(2000,)f(month)g(=)g(Date.Jan,)f(day)i(=)f(0,)1747
1576 y(hour)g(=)h(0,)f(minute)g(=)h(0,)f(second)g(=)g(0,)1747
1676 y(offset)g(=)h(NONE)1648 1776 y(}\)\)\))784 1905
y Fq(blocks)25 b(the)f(calling)h(thread)g(until)g(the)e(be)o(ginning)j
(of)e(the)g(year)g(2000.)805 2080 y Fp(See)i(Also:)77
b Fk(Option)p Fq(,)20 b Fk(Time)2136 5187 y Fq(8)p eop
%%Page: 9 9
9 8 bop 241 555 a Fr(2.2)119 b(The)30 b Fm(SyncVar)e
Fr(structur)n(e)241 768 y Fq(The)19 b Fn(SyncVar)e Fq(structure)22
b(pro)o(vides)f Fo(Id)p Fq(-style)f(synchronous)j(v)n(ariables)f(\(or)d
(memory)h(cells\).)241 881 y(These)h(v)n(ariables)i(ha)n(v)o(e)e(tw)o
(o)g(states:)29 b Fe(empty)21 b Fq(and)g Fe(full)p Fq(.)28
b(An)20 b(attempt)i(to)f(read)g(a)f(v)n(alue)i(from)f(an)241
994 y(empty)h(v)n(ariable)h(blocks)f(the)g(calling)h(thread)g(until)f
(there)g(is)f(a)g(v)n(alue)h(a)n(v)n(ailable.)30 b(An)21
b(attempt)241 1106 y(to)26 b(put)h(a)f(v)n(alue)h(into)g(a)f(v)n
(ariable)i(that)f(is)f(full)h(results)h(in)e(the)h Fn(Put)e
Fq(e)o(xception)j(being)g(raised.)241 1219 y(There)33
b(are)g(tw)o(o)f(kinds)i(of)e(synchronous)37 b(v)n(ariables:)50
b(I-v)n(ariables)35 b(are)e(write-once,)k(while)241 1332
y(M-v)n(ariables)25 b(are)f(mutable.)241 1568 y Fp(Synopsis:)361
1684 y Fl(signature)18 b Fk(SYNC)p 1099 1684 28 4 v 31
w(VAR)361 1797 y Fl(structure)73 b Fk(SyncVar:)105 b(SYNC)p
1699 1797 V 31 w(VAR)241 2032 y Fp(Interface:)361 2135
y Fj(exception)19 b Fn(Put)361 2234 y Fj(type)h Fi(\013)h
Fn(ivar)361 2334 y Fj(val)f Fn(iVar:)99 b(unit)22 b Fh(!)h
Fi(\013)c Fn(ivar)361 2434 y Fj(val)h Fn(iPut:)99 b Fg(\()p
Fi(\013)19 b Fn(ivar)f(*)g Fi(\013)p Fg(\))24 b Fh(!)f
Fn(unit)361 2533 y Fj(val)d Fn(iGet:)99 b Fi(\013)19
b Fn(ivar)j Fh(!)h Fi(\013)361 2633 y Fj(val)d Fn(iGetEvt:)98
b Fi(\013)19 b Fn(ivar)j Fh(!)h Fi(\013)c Fn(event)361
2732 y Fj(val)h Fn(iGetPoll:)98 b Fi(\013)19 b Fn(ivar)j
Fh(!)h Fi(\013)c Fn(option)361 2832 y Fj(val)h Fn(sameIVar:)98
b Fg(\()p Fi(\013)19 b Fn(ivar)f(*)g Fi(\013)h Fn(ivar)o
Fg(\))k Fh(!)h Fn(bool)361 2932 y Fj(type)c Fi(\013)h
Fn(mvar)361 3031 y Fj(val)f Fn(mVar:)99 b(unit)22 b Fh(!)h
Fi(\013)c Fn(mvar)361 3131 y Fj(val)h Fn(mVarInit:)98
b Fi(\013)23 b Fh(!)g Fi(\013)c Fn(mvar)361 3231 y Fj(val)h
Fn(mPut:)99 b Fg(\()p Fi(\013)19 b Fn(mvar)f(*)g Fi(\013)p
Fg(\))24 b Fh(!)f Fn(unit)361 3330 y Fj(val)d Fn(mTake:)98
b Fi(\013)19 b Fn(mvar)k Fh(!)g Fi(\013)361 3430 y Fj(val)d
Fn(mTakeEvt:)98 b Fi(\013)19 b Fn(mvar)j Fh(!)h Fi(\013)c
Fn(event)361 3530 y Fj(val)h Fn(mGet:)99 b Fi(\013)19
b Fn(mvar)j Fh(!)h Fi(\013)361 3629 y Fj(val)d Fn(mGetEvt:)98
b Fi(\013)19 b Fn(mvar)j Fh(!)h Fi(\013)c Fn(event)361
3729 y Fj(val)h Fn(mTakePoll:)98 b Fi(\013)19 b Fn(mvar)j
Fh(!)h Fi(\013)c Fn(option)361 3828 y Fj(val)h Fn(mGetPoll:)98
b Fi(\013)19 b Fn(mvar)j Fh(!)h Fi(\013)c Fn(option)361
3928 y Fj(val)h Fn(mSwap:)98 b Fg(\()p Fi(\013)20 b Fn(mvar)d(*)i
Fi(\013)p Fg(\))k Fh(!)g Fi(\013)361 4028 y Fj(val)d
Fn(mSwapEvt:)98 b Fg(\()p Fi(\013)19 b Fn(mvar)f(*)g
Fi(\013)p Fg(\))24 b Fh(!)f Fi(\013)c Fn(event)361 4127
y Fj(val)h Fn(sameMVar:)98 b Fg(\()p Fi(\013)19 b Fn(mvar)f(*)g
Fi(\013)h Fn(mvar)o Fg(\))k Fh(!)h Fn(bool)241 4363 y
Fp(Description:)241 4479 y Fl(exception)18 b Fk(Put)361
4662 y Fq(This)j(e)o(xception)j(is)d(raised)i(when)e(an)h(attempt)g(is)
f(made)h(to)f(put)h(a)f(v)n(alue)h(into)g(a)f(v)n(alue)h(that)361
4775 y(is)h(already)i(full)f(\(see)g Fn(iPut)e Fq(and)i
Fn(mPut)p Fq(\).)241 4959 y Fl(type)d Ff(\013)i Fk(ivar)1712
5187 y Fq(9)p eop
%%Page: 10 10
10 9 bop 784 555 a Fq(This)35 b(is)h(the)f(type)i(constructor)h(for)e
(I-structured)j(v)n(ariables.)66 b(I-structured)39 b(v)n(ariables)784
668 y(are)24 b(write-once)i(v)n(ariables)g(that)f(pro)o(vide)h
(synchronization)j(on)24 b(read)g(operations.)34 b(The)o(y)784
781 y(are)c(especially)i(useful)e(for)g(one-shot)h(communications,)j
(such)c(as)f(reply)h(messages)h(in)784 894 y(client/serv)o(er)c
(protocols.)664 1073 y Fl(val)22 b Fk(iVar:)106 b(unit)24
b Fd(!)h Ff(\013)c Fk(ivar)784 1253 y Fn(iVar)49 b(\(\))72
b Fq(creates)25 b(a)f(ne)n(w)e(empty)i(I-v)n(ariable.)664
1432 y Fl(val)e Fk(iPut:)106 b Fc(\()p Ff(\013)21 b Fk(ivar)e(*)h
Ff(\013)p Fc(\))26 b Fd(!)f Fk(unit)1145 b Fq(raises)24
b Fk(Put)784 1611 y Fn(iPut)49 b(\()p Fb(iv)6 b Fn(,)50
b Fb(x)t Fn(\))74 b Fq(\002lls)24 b(the)h(I-v)n(ariable)i
Fb(iv)k Fq(with)24 b(the)h(v)n(alue)h Fb(x)t Fq(.)32
b(An)o(y)24 b(threads)j(that)e(are)784 1724 y(block)o(ed)32
b(on)d Fb(iv)35 b Fq(will)29 b(be)g(resumed.)48 b(If)29
b Fb(iv)35 b Fq(already)c(has)e(a)g(v)n(alue)h(in)g(it,)g(then)g(the)g
Fn(Put)784 1837 y Fq(e)o(xception)c(is)d(raised.)664
2016 y Fl(val)f Fk(iGet:)106 b Ff(\013)21 b Fk(ivar)i
Fd(!)j Ff(\013)784 2196 y Fn(iGet)49 b Fb(iv)85 b Fq(returns)31
b(the)f(contents)i(of)e(the)g(I-v)n(ariable)h Fb(iv)7
b Fq(.)46 b(If)29 b(the)h(v)n(ariable)h(is)f(empty)-6
b(,)784 2309 y(then)24 b(the)g(calling)h(thread)g(blocks)g(until)g(the)
f(v)n(ariable)h(becomes)g(full.)664 2488 y Fl(val)d Fk(iGetEvt:)105
b Ff(\013)21 b Fk(ivar)i Fd(!)i Ff(\013)c Fk(event)784
2667 y Fn(iGetEvt)49 b Fb(iv)90 b Fq(returns)37 b(an)e(e)n(v)o(ent-v)n
(alue)i(that)f(represents)i(the)d Fn(iGet)e Fq(operation)38
b(on)784 2780 y Fb(iv)7 b Fq(.)664 2960 y Fl(val)22 b
Fk(iGetPoll:)105 b Ff(\013)20 b Fk(ivar)k Fd(!)h Ff(\013)c
Fk(option)784 3139 y Fq(This)32 b(is)h(a)f(non-blocking)k(v)o(ersion)e
(of)e Fn(iGet)p Fq(.)54 b(If)32 b(the)h(corresponding)j(blocking)f
(form)784 3252 y(w)o(ould)30 b(block,)h(then)f(it)f(returns)h
Fn(NONE)p Fq(;)e(otherwise)j(it)d(returns)j Fn(SOME)d
Fq(of)g(the)i(v)n(ariable')-5 b(s)784 3365 y(contents.)664
3544 y Fl(val)22 b Fk(sameIVar:)105 b Fc(\()p Ff(\013)21
b Fk(ivar)d(*)i Ff(\013)g Fk(ivar)o Fc(\))25 b Fd(!)g
Fk(bool)784 3723 y Fn(sameIVar)48 b(\()p Fb(iv1)p Fn(,)h
Fb(iv2)p Fn(\))79 b Fq(returns)33 b Fn(true)p Fq(,)e(if)f(the)h
Fb(iv1)f Fq(and)h Fb(iv2)f Fq(are)h(the)g(same)f(I-)784
3836 y(v)n(ariable.)664 4016 y Fl(type)21 b Ff(\013)i
Fk(mvar)784 4195 y Fq(This)e(is)g(the)g(type)h(constructor)j(for)c
(M-structured)j(v)n(ariables.)30 b(Unlik)o(e)22 b Fn(ivar)d
Fq(v)n(alues,)k(M-)784 4308 y(structured)28 b(v)n(ariables)f(may)d(be)h
(updated)i(multiple)f(times.)33 b(Lik)o(e)25 b(I-v)n(ariables,)j(ho)n
(we)n(v)o(er)l(,)784 4421 y(the)o(y)c(may)f(only)i(be)e(written)i(if)e
(the)o(y)h(are)f(empty)-6 b(.)664 4600 y Fl(val)22 b
Fk(mVar:)106 b(unit)24 b Fd(!)h Ff(\013)c Fk(mvar)784
4779 y Fn(mVar)49 b(\(\))72 b Fq(creates)25 b(a)f(ne)n(w)e(empty)i(M-v)
n(ariable.)664 4959 y Fl(val)e Fk(mVarInit:)105 b Ff(\013)25
b Fd(!)g Ff(\013)c Fk(mvar)2113 5187 y Fq(10)p eop
%%Page: 11 11
11 10 bop 361 555 a Fn(mVar)49 b(x)72 b Fq(creates)25
b(a)e(ne)n(w)g(M-v)n(ariable)j(initialized)g(to)d Fb(x)5
b Fq(.)241 736 y Fl(val)21 b Fk(mPut:)107 b Fc(\()p Ff(\013)21
b Fk(mvar)d(*)i Ff(\013)p Fc(\))26 b Fd(!)f Fk(unit)1145
b Fq(raises)25 b Fk(Put)361 917 y Fn(mPut)49 b(\()p Fb(mv)6
b Fn(,)50 b Fb(x)t Fn(\))80 b Fq(\002lls)31 b(the)h(M-v)n(ariable)h
Fb(mv)j Fq(with)31 b(the)h(v)n(alue)g Fb(x)t Fq(.)52
b(An)o(y)30 b(threads)j(that)361 1030 y(are)22 b(block)o(ed)i(on)e
Fb(mv)27 b Fq(will)21 b(be)h(resumed.)30 b(If)21 b Fb(mv)27
b Fq(already)d(has)e(a)g(v)n(alue)g(in)g(it,)f(then)i(the)f
Fn(Put)361 1142 y Fq(e)o(xception)k(is)d(raised.)241
1323 y Fl(val)e Fk(mTake:)106 b Ff(\013)21 b Fk(mvar)j
Fd(!)h Ff(\013)361 1504 y Fn(mTake)49 b Fb(mv)82 b Fq(remo)o(v)o(es)28
b(and)g(returns)h(the)f(contents)h(of)f(the)g(M-v)n(ariable)h
Fb(mv)k Fq(making)28 b(it)361 1617 y(empty)-6 b(.)35
b(If)26 b(the)g(v)n(ariable)h(is)f(already)h(empty)-6
b(,)27 b(then)f(the)g(calling)h(thread)h(is)d(block)o(ed)j(until)361
1730 y(a)23 b(v)n(alue)h(is)g(a)n(v)n(ailable.)241 1910
y Fl(val)d Fk(mTakeEvt:)105 b Ff(\013)21 b Fk(mvar)i
Fd(!)i Ff(\013)c Fk(event)361 2091 y Fn(mTakeEvt)48 b
Fb(mv)79 b Fq(returns)26 b(an)e(e)n(v)o(ent-v)n(alue)i(that)f
(represents)i(the)d Fn(mTake)e Fq(operation)27 b(on)361
2204 y Fb(mv)6 b Fq(.)241 2385 y Fl(val)21 b Fk(mGet:)107
b Ff(\013)21 b Fk(mvar)i Fd(!)i Ff(\013)361 2565 y Fn(mGet)49
b Fb(mv)74 b Fq(returns)21 b(the)e(contents)i(of)e(the)h(M-v)n(ariable)
h Fb(mv)j Fq(without)c(emptying)h(the)e(v)n(ari-)361
2678 y(able;)24 b(if)e(the)h(v)n(ariable)h(is)f(empty)-6
b(,)23 b(then)g(the)g(thread)h(blocks)g(until)f(a)g(v)n(alue)g(is)f(a)n
(v)n(ailable.)31 b(It)361 2791 y(is)23 b(equi)n(v)n(alent)j(to)d(the)h
(code:)527 2909 y Fn(let)49 b(val)g(x)h(=)g(mTake)148
b Fb(mv)56 b Fn(in)50 b(mPut\()98 b Fb(mv)7 b Fn(,)49
b(x\);)h(x)f(end)241 3109 y Fl(val)21 b Fk(mGetEvt:)106
b Ff(\013)20 b Fk(mvar)k Fd(!)h Ff(\013)c Fk(event)361
3289 y Fn(mGetEvt)48 b Fb(mv)91 b Fq(returns)36 b(an)f(e)n(v)o(ent-v)n
(alue)j(that)d(represents)j(the)e Fn(mGet)d Fq(operation)38
b(on)361 3402 y Fb(mv)6 b Fq(.)241 3583 y Fl(val)21 b
Fk(mTakePoll:)105 b Ff(\013)20 b Fk(mvar)k Fd(!)h Ff(\013)c
Fk(option)241 3696 y Fl(val)g Fk(mGetPoll:)105 b Ff(\013)21
b Fk(mvar)i Fd(!)i Ff(\013)c Fk(option)361 3876 y Fq(These)j(are)h
(non-blocking)j(v)o(ersions)e(of)e Fn(mTake)e Fq(and)j
Fn(mGet)e Fq(\(respecti)n(v)o(ely\).)34 b(If)24 b(the)g(cor)n(-)361
3989 y(responding)29 b(blocking)g(form)d(w)o(ould)h(block,)i(then)e
(the)o(y)f(return)i Fn(NONE)p Fq(;)d(otherwise)j(the)o(y)361
4102 y(return)d Fn(SOME)d Fq(of)h(the)h(v)n(ariable')-5
b(s)26 b(contents.)241 4283 y Fl(val)21 b Fk(mSwap:)106
b Fc(\()p Ff(\013)22 b Fk(mvar)c(*)i Ff(\013)p Fc(\))26
b Fd(!)f Ff(\013)361 4464 y Fn(mSwap)49 b(\()p Fb(mv)6
b Fn(,)49 b Fb(newV)10 b Fn(\))69 b Fq(puts)21 b(the)f(v)n(alue)h
Fb(newV)29 b Fq(into)21 b(the)g(M-v)n(ariable)h Fb(mv)j
Fq(and)c(returns)361 4577 y(the)31 b(pre)n(vious)i(contents.)53
b(If)31 b(the)g(v)n(ariable)i(is)e(empty)-6 b(,)33 b(then)f(the)f
(thread)i(blocks)f(until)g(a)361 4690 y(v)n(alue)24 b(is)f(a)n(v)n
(ailable.)31 b(It)24 b(is)f(equi)n(v)n(alent)j(to)d(the)h(code:)527
4808 y Fn(let)49 b(val)g(x)h(=)g(mTake)148 b Fb(mv)56
b Fn(in)50 b(mPut\()98 b Fb(mv)7 b Fn(,)149 b Fb(newV)9
b Fn(\);)50 b(x)f(end)361 4939 y Fq(e)o(xcept)24 b(that)g
Fn(mSwap)e Fq(is)i(e)o(x)o(ecuted)h(atomically)-6 b(.)1690
5187 y(11)p eop
%%Page: 12 12
12 11 bop 664 555 a Fl(val)22 b Fk(mSwapEvt:)105 b Fc(\()p
Ff(\013)21 b Fk(mvar)d(*)i Ff(\013)p Fc(\))26 b Fd(!)f
Ff(\013)c Fk(event)784 730 y Fn(mSwapEvt)48 b Fb(mv)80
b Fq(returns)25 b(an)f(e)n(v)o(ent-v)n(alue)j(that)d(represents)j(the)d
Fn(mSwap)f Fq(operation)j(on)784 843 y Fb(mv)j Fq(and)24
b Fb(newV)10 b Fq(.)664 1018 y Fl(val)22 b Fk(sameMVar:)105
b Fc(\()p Ff(\013)21 b Fk(mvar)d(*)i Ff(\013)g Fk(mvar)o
Fc(\))25 b Fd(!)g Fk(bool)784 1194 y Fn(sameMVar)48 b(\()p
Fb(mv1)p Fn(,)h Fb(mv2)p Fn(\))88 b Fq(returns)42 b Fn(true)p
Fq(,)f(if)f Fb(mv1)e Fq(and)i Fb(mv2)e Fq(are)i(the)g(same)g(M-)784
1307 y(v)n(ariable.)805 1482 y(I-v)n(ariables)29 b(pro)o(vide)e(a)f
(useful)h(mechanism)g(for)f(implementing)i(the)e(reply)h(communi-)664
1595 y(cation)c(in)e(request/reply)k(protocols.)30 b(The)o(y)21
b(may)g(also)g(be)h(used)g(to)f(implement)h(incremental)664
1708 y(data)i(structures)j(and)d(streams.)805 1820 y(A)f(disciplined)j
(use)e(of)f(M-v)n(ariables)j(can)d(pro)o(vide)i(an)f(atomic)g
(read-modify-write)j(op-)664 1933 y(eration.)k Fp(See)25
b(Also:)78 b Fk(CML)21 b Fq(\(3\))2113 5187 y(12)p eop
%%Page: 13 13
13 12 bop 241 555 a Fr(2.3)119 b(The)30 b Fm(Mailbox)e
Fr(structur)n(e)241 770 y Fq(The)h Fn(Mailbox)f Fq(structure)33
b(pro)o(vides)f(b)n(uf)n(fered)g(asynchronous)i(channels,)g(which)c(we)
f(call)241 883 y(mailbox)o(es.)241 1119 y Fp(Synopsis:)361
1236 y Fl(signature)18 b Fk(MAILBOX)361 1349 y Fl(structure)73
b Fk(Mailbox:)105 b(MAILBOX)241 1586 y Fp(Interface:)361
1689 y Fj(type)20 b Fi(\013)h Fn(mbox)361 1789 y Fj(val)f
Fn(mailbox:)98 b(unit)22 b Fh(!)h Fi(\013)c Fn(mbox)361
1889 y Fj(val)h Fn(sameMailbox:)97 b Fg(\()p Fi(\013)19
b Fn(mbox)f(*)g Fi(\013)h Fn(mbox)p Fg(\))k Fh(!)g Fn(bool)361
1988 y Fj(val)d Fn(send:)99 b Fg(\()p Fi(\013)19 b Fn(mbox)f(*)g
Fi(\013)p Fg(\))24 b Fh(!)f Fn(unit)361 2088 y Fj(val)d
Fn(recv:)99 b Fi(\013)19 b Fn(mbox)j Fh(!)h Fi(\013)361
2187 y Fj(val)d Fn(recvEvt:)98 b Fi(\013)19 b Fn(mbox)j
Fh(!)h Fi(\013)c Fn(event)361 2287 y Fj(val)h Fn(recvPoll:)98
b Fi(\013)19 b Fn(mbox)j Fh(!)h Fi(\013)c Fn(option)241
2524 y Fp(Description:)241 2641 y Fl(type)i Ff(\013)i
Fk(mbox)361 2827 y Fq(This)d(is)g(the)h(type)g(constructor)i(for)e(a)f
(mailbox.)29 b(A)19 b(mailbox)i(is)f(an)h(unbounded,)j(b)n(uf)n(fered)
361 2940 y(communication)i(channel.)241 3127 y Fl(val)21
b Fk(mailbox:)106 b(unit)23 b Fd(!)i Ff(\013)c Fk(mbox)361
3313 y Fn(mailbox)48 b(\(\))72 b Fq(creates)26 b(a)d(ne)n(w)g(mailbox.)
241 3500 y Fl(val)e Fk(sameMailbox:)104 b Fc(\()p Ff(\013)21
b Fk(mbox)d(*)i Ff(\013)h Fk(mbox)n Fc(\))k Fd(!)h Fk(bool)361
3687 y Fn(sameMailbox)48 b(\()p Fb(mb1)o Fn(,)h Fb(mb2)p
Fn(\))88 b Fq(returns)42 b Fn(true)p Fq(,)g(if)d Fb(mb1)f
Fq(and)j Fb(mb2)d Fq(are)i(the)g(same)361 3800 y(mailbox.)241
3986 y Fl(val)21 b Fk(send:)107 b Fc(\()p Ff(\013)21
b Fk(mbox)d(*)i Ff(\013)p Fc(\))26 b Fd(!)f Fk(unit)361
4173 y Fn(send)49 b(\()p Fb(mb)q Fn(,)h Fb(msg)t Fn(\))76
b Fq(sends)28 b(the)g(message)g Fb(msg)i Fq(to)d(the)g(mailbox)i
Fb(mb)q Fq(.)39 b(Note)27 b(that)g(un-)361 4286 y(lik)o(e)d
Fn(CML.send)p Fq(,)d(this)j(is)f(a)g(non-blocking)28
b(operation.)241 4472 y Fl(val)21 b Fk(recv:)107 b Ff(\013)21
b Fk(mbox)i Fd(!)i Ff(\013)361 4659 y Fn(recv)49 b Fb(mb)81
b Fq(recei)n(v)o(e)31 b(the)f(ne)o(xt)h(message)g(from)f(the)g(mailbox)
i Fb(mb)q Fq(.)48 b(If,)31 b(the)g(mailbox)g(is)361 4772
y(empty)-6 b(,)24 b(then)g(this)g(blocks)h(the)f(calling)h(thread)g
(until)f(there)h(is)e(a)g(message)i(a)n(v)n(ailable.)241
4959 y Fl(val)c Fk(recvEvt:)106 b Ff(\013)20 b Fk(mbox)k
Fd(!)h Ff(\013)c Fk(event)1690 5187 y Fq(13)p eop
%%Page: 14 14
14 13 bop 784 555 a Fn(recvEvt)49 b Fb(mb)83 b Fq(returns)34
b(the)f(e)n(v)o(ent)g(v)n(alue)h(that)f(represents)i(the)e
Fn(recv)e Fq(operation)k(on)784 668 y Fb(mb)r Fq(.)664
843 y Fl(val)22 b Fk(recvPoll:)105 b Ff(\013)20 b Fk(mbox)k
Fd(!)h Ff(\013)c Fk(option)784 1018 y Fq(This)27 b(is)g(the)g
(non-blocking)k(v)o(ersion)d(of)f Fn(recv)p Fq(.)38 b(If)26
b(the)i(corresponding)j(blocking)e(form)784 1131 y(w)o(ould)c(block)g
(\(because)h(the)f(mailbox)g(is)f(empty\),)h(then)g(this)f(returns)i
Fn(NONE)p Fq(,)d(otherwise)784 1244 y(it)g(returns)j
Fn(SOME)c Fq(of)h(the)h(recei)n(v)o(ed)h(message.)805
1419 y(Note)31 b(that)g(mailbox)h(b)n(uf)n(fers)h(are)e(unbounded,)k
(which)d(means)f(that)g(there)h(is)f(no)g(\003o)n(w)664
1532 y(control)k(to)f(pre)n(v)o(ent)g(a)f(producer)j(from)e(greatly)h
(outstriping)h(a)d(consumer)l(,)38 b(and)c(thus)g(e)o(x-)664
1645 y(hausting)29 b(memory)-6 b(.)36 b(In)26 b(situations)j(where)d
(there)h(is)f(no)g(natural)i(limit)e(to)g(the)g(rate)h(of)f
Fn(send)664 1758 y Fq(operations,)31 b(it)c(is)g(recommended)j(that)d
(the)h(synchronous)j(channels)e(from)f(the)f Fn(CML)f
Fq(struc-)664 1871 y(ture)e(be)g(used)g(instead.)31 b
Fp(See)25 b(Also:)78 b Fk(CML)21 b Fq(\(3\))2113 5187
y(14)p eop
%%Page: 15 15
15 14 bop 241 555 a Fr(2.4)119 b(The)30 b Fm(OS)f Fr(structur)n(e)241
762 y Fq(The)21 b Fn(OS)f Fq(structure)k(is)d(a)g(container)j(for)e(a)f
(collection)j(of)d(structures)j(for)e(interacting)i(with)d(the)241
875 y(operating)26 b(system')-5 b(s)25 b(\002le)e(system,)h(directory)i
(paths,)e(processes)i(and)e(I/O)f(subsystem.)241 1108
y Fp(Synopsis:)361 1221 y Fl(signature)18 b Fk(CML)p
1044 1221 28 4 v 32 w(OS)361 1334 y Fl(structure)73 b
Fk(OS:)53 b(CML)p 1317 1334 V 31 w(OS)241 1567 y Fp(Interface:)361
1666 y Fn(OS)361 1766 y Fj(structure)69 b Fn(Process)48
b(:)100 b Fj(sig)661 1866 y Fa(CML)p 846 1866 25 4 v
30 w(OS)p 982 1866 V 30 w(PR)m(OCESS)541 2003 y Fj(end)361
2102 y(structure)69 b Fn(IO)49 b(:)h Fj(sig)661 2202
y Fa(CML)p 846 2202 V 30 w(OS)p 982 2202 V 30 w(IO)541
2339 y Fj(end)382 2452 y Fp(See)25 b(Also:)76 b Fk(OS)21
b Fq(\()p Fo(??)q Fq(\),)i Fk(OS.FileSys)p Fq(,)17 b
Fk(OS.Path)p Fq(,)i Fk(OS.Process)e Fq(\()p Fo(??)r Fq(\),)22
b Fk(OS.IO)241 2565 y Fq(\()p Fo(??)q Fq(\))1690 5187
y(15)p eop
%%Page: 16 16
16 15 bop 664 555 a Fr(2.5)119 b(The)30 b Fm(OS.Process)e
Fr(structur)n(e)664 762 y Fq(The)33 b Fn(OS.Process)d
Fq(structure)36 b(pro)o(vides)f(functions)g(for)e(manipulating)k
(processes)e(in)e(an)664 875 y(operating)26 b(system)f(independent)i
(manner)-5 b(.)664 1108 y Fp(Synopsis:)784 1221 y Fl(signature)19
b Fk(CML)p 1468 1221 28 4 v 31 w(OS)p 1609 1221 V 32
w(PROCESS)784 1334 y Fl(structure)73 b Fk(OS.Process:)104
b(CML)p 2231 1334 V 32 w(OS)p 2373 1334 V 32 w(PROCESS)664
1567 y Fp(Interface:)784 1666 y Fn(OS)p 889 1666 25 4
v 30 w(PROCESS)784 1766 y Fj(val)20 b Fn(systemEvt:)98
b(string)22 b Fh(!)h Fn(status)f(event)664 1999 y Fp(Description:)664
2112 y Fl(val)g Fk(systemEvt:)104 b(string)23 b Fd(!)i
Fk(status)d(event)495 b Fq(raises)25 b Fk(SysErr)784
2287 y Fn(systemEvt)48 b Fb(cmd)79 b Fq(asks)28 b(the)f(operating)i
(system)f(to)f(e)o(x)o(ecute)h(the)f(command)g Fb(cmd)i
Fq(as)784 2400 y(a)24 b(sub-process,)k(and)d(returns)h(an)f(e)n(v)o
(ent)g(for)f(synchronizing)29 b(on)c(the)g(termination)h(of)f(the)784
2513 y(sub-process.)32 b(Raises)24 b Fn(SysErr)e Fq(if)h(the)h(command)
g(cannot)h(be)f(e)o(x)o(ecuted.)904 2626 y(Note)f(that,)g(although)h
(this)f(function)i(is)d(independent)k(of)d(the)g(operating)i(system,)e
(the)784 2739 y(interpretation)j(of)c(the)g(string)i
Fb(cmd)g Fq(depends)g(v)o(ery)e(much)g(on)g(the)h(underlying)i
(operating)784 2852 y(system)f(and)g(shell.)805 3027
y Fp(See)i(Also:)77 b Fk(OS)22 b Fq(\(15\),)i Fk(OS.Process)18
b Fq(\()p Fo(??)r Fq(\))2113 5187 y(16)p eop
%%Page: 17 17
17 16 bop 241 555 a Fr(2.6)119 b(The)30 b Fm(OS.IO)e
Fr(structur)n(e)241 762 y Fq(The)19 b Fn(OS.IO)e Fq(structure)22
b(pro)o(vides)f(a)e(general)i(interf)o(ace)g(for)f(polling)h(I/O)d(de)n
(vices,)k(which)d(has)241 875 y(been)24 b(modelled)g(after)g(the)g
(Unix)f(SVR4)f(poll)h(interf)o(ace.)31 b(A)22 b Fn(poll)p
2391 875 25 4 v 29 w(desc)p Fq(,)g(created)j(from)e(an)241
988 y(I/O)g(descriptor)l(,)j(can)e(be)f(used)i(to)e(test)h(for)g(v)n
(arious)h(polling)g(conditions.)241 1221 y Fp(Synopsis:)361
1334 y Fl(signature)18 b Fk(CML)p 1044 1334 28 4 v 32
w(OS)p 1186 1334 V 32 w(IO)361 1447 y Fl(structure)73
b Fk(OS.IO:)52 b(CML)p 1481 1447 V 31 w(OS)p 1622 1447
V 32 w(IO)241 1680 y Fp(Interface:)361 1779 y Fn(OS)p
466 1779 25 4 v 29 w(IO)361 1879 y Fj(val)20 b Fn(pollEvt:)98
b(poll)p 1234 1879 V 29 w(desc)23 b(list)f Fh(!)h Fn(poll)p
2014 1879 V 29 w(info)f(list)h(event)241 2112 y Fp(Description:)241
2225 y Fl(val)16 b Fk(pollEvt:)105 b(poll)p 1192 2225
28 4 v 31 w(desc)23 b(list)h Fd(!)h Fk(poll)p 2046 2225
V 31 w(info)e(list)h(event)88 b Fq(raises)25 b Fk(OS.SysErr)361
2400 y Fn(pollEvt)48 b Fb(l)78 b Fq(polls)30 b(a)e(list)h(of)g(poll)h
(descriptors)i Fb(l)o Fq(.)44 b(This)29 b(will)f(raise)i
Fn(OS.SysErr)c Fq(if,)361 2513 y(for)d(e)o(xample,)i(one)f(of)f(the)h
(\002le)f(descriptors)j(refers)f(to)e(a)h(closed)h(\002le.)382
2688 y Fp(See)h(Also:)77 b Fk(OS)22 b Fq(\(15\),)i Fk(OS.IO)c
Fq(\()p Fo(??)q Fq(\))1690 5187 y(17)p eop
%%Page: 18 18
18 17 bop 2113 5187 a Fq(18)p eop
%%Page: 19 19
19 18 bop 241 1178 a Ft(Chapter)44 b(3)241 1593 y Fs(CML)51
b(Library)h(Refer)l(ence)241 2075 y Fr(3.1)119 b(The)30
b Fm(Multicast)d Fr(structur)n(e)241 2283 y Fq(Multicast)35
b(channels)g(pro)o(vide)g(a)e(mechanism)h(for)g(broadcasting)j(a)32
b(stream)i(of)f(messages)241 2396 y(to)26 b(a)h(collection)i(of)e
(threads.)39 b(Threads)28 b(recei)n(v)o(e)g(multicast)g(messages)g(via)
f(an)g Fe(output)h(port)r Fq(;)241 2509 y(each)g(port)f(recei)n(v)o(es)
i(its)e(o)n(wn)f(cop)o(y)i(of)f(e)n(v)o(ery)h(message)g(sent)g(since)g
(the)f(port)h(w)o(as)e(created.)241 2621 y(Multicast)k(channels)h(are)e
(particularly)j(useful)f(for)e(communicating)i(with)e(a)f(dynamically)
241 2734 y(v)n(arying)21 b(group)g(of)e(threads,)j(since)e(the)g
(sender)h(does)g(not)e(need)i(to)e(kno)n(w)h(ho)n(w)f(man)o(y)g
(threads)241 2847 y(are)k(listening.)241 3080 y Fp(Synopsis:)361
3194 y Fl(signature)18 b Fk(MULTICAST)361 3306 y Fl(structure)73
b Fk(Multicast:)104 b(MULTICAST)241 3540 y Fp(Interface:)361
3639 y Fj(type)20 b Fi(\013)h Fn(event)p Fa(=)f Fi(\013)e
Fn(CML)p Fi(:)p Fn(event)361 3739 y Fj(type)i Fi(\013)h
Fn(mchan)361 3839 y Fj(type)f Fi(\013)h Fn(port)361 3938
y Fj(val)f Fn(mChannel:)98 b(unit)22 b Fh(!)h Fi(\013)c
Fn(mchan)361 4038 y Fj(val)h Fn(port:)99 b Fi(\013)19
b Fn(mchan)j Fh(!)h Fi(\013)c Fn(port)361 4138 y Fj(val)h
Fn(copy:)99 b Fi(\013)19 b Fn(port)j Fh(!)h Fi(\013)c
Fn(port)361 4237 y Fj(val)h Fn(recv:)99 b Fi(\013)19
b Fn(port)j Fh(!)h Fi(\013)361 4337 y Fj(val)d Fn(recvEvt:)98
b Fi(\013)19 b Fn(port)j Fh(!)h Fi(\013)c Fn(event)361
4436 y Fj(val)h Fn(multicast:)98 b Fg(\()p Fi(\013)19
b Fn(mchan)e(*)i Fi(\013)p Fg(\))k Fh(!)g Fn(unit)241
4670 y Fp(Description:)241 4783 y Fl(type)e Ff(\013)i
Fk(mchan)361 4959 y Fq(This)g(is)g(the)h(type)h(constructor)h(for)e
(asynchronous)k(multicast)d(channels.)1690 5187 y(19)p
eop
%%Page: 20 20
20 19 bop 664 555 a Fl(type)21 b Ff(\013)i Fk(port)784
730 y Fq(This)e(is)f(the)h(type)g(constructor)j(for)d(output)h(ports)g
(on)f(an)f(asynchronous)25 b(multicast)d(chan-)784 843
y(nels.)664 1018 y Fl(val)g Fk(mChannel:)105 b(unit)23
b Fd(!)i Ff(\013)c Fk(mchan)784 1194 y Fn(mChannel)48
b Fb(\(\))73 b Fq(creates)25 b(a)e(ne)n(w)g(multicast)i(channel.)664
1369 y Fl(val)d Fk(port:)106 b Ff(\013)21 b Fk(mchan)i
Fd(!)i Ff(\013)c Fk(port)784 1544 y Fn(port)49 b Fb(mc)70
b Fq(creates)23 b(a)d(ne)n(w)g(output)j(port)e(on)g(the)g(channel)i
Fb(mc)p Fq(.)k(The)20 b(port)i(recei)n(v)o(es)g(those)784
1657 y(messages)j(sent)f(after)h(it)e(is)g(created.)664
1832 y Fl(val)f Fk(copy:)106 b Ff(\013)21 b Fk(port)i
Fd(!)j Ff(\013)20 b Fk(port)784 2007 y Fn(copy)49 b Fb(p)75
b Fq(creates)28 b(a)d(ne)n(w)g(output)j(port)e(on)g(a)g(channel)i(that)
e(has)g(the)g(same)g(state)h(as)f(the)784 2120 y(port)c
Fb(p)q Fq(.)27 b(I.e.,)21 b(the)h(stream)g(of)g(messages)h(seen)g(on)e
(the)h(tw)o(o)g(ports)g(will)g(be)f(the)h(same.)28 b(This)784
2233 y(is)h(useful)i(when)e(tw)o(o)g(threads)i(need)f(to)f(see)h(the)f
(same)h(stream)f(of)h(messages.)47 b(NO)l(TE:)784 2346
y(if)27 b(tw)o(o)f(\(or)h(more\))g(independent)j(threads)f(are)e
(reading)h(from)f Fb(p)f Fq(at)h(the)g(time)f(that)i
Fn(copy)784 2459 y Fq(operation)e(is)e(performed,)h(then)f(it)f(may)h
(not)f(be)h(accurate.)664 2634 y Fl(val)e Fk(recv:)106
b Ff(\013)21 b Fk(port)i Fd(!)j Ff(\013)784 2809 y Fn(recv)49
b Fb(p)75 b Fq(gets)26 b(the)f(ne)o(xt)h(message)h(from)e(the)h(port)g
Fb(p)p Fq(.)33 b(The)25 b(calling)i(thread)g(is)e(block)o(ed)784
2922 y(until)g(there)f(is)f(a)h(message)g(a)n(v)n(ailable.)664
3097 y Fl(val)e Fk(recvEvt:)105 b Ff(\013)21 b Fk(port)i
Fd(!)i Ff(\013)c Fk(event)784 3273 y Fn(recvEvt)49 b
Fb(p)75 b Fq(creates)29 b(an)d(e)n(v)o(ent)h(v)n(alue)h(that)f
(represents)i(the)e Fn(recv)e Fq(operation)k(on)e(the)784
3385 y(port)d Fb(p)q Fq(.)664 3561 y Fl(val)e Fk(multicast:)104
b Fc(\()p Ff(\013)21 b Fk(mchan)d(*)i Ff(\013)p Fc(\))26
b Fd(!)f Fk(unit)784 3736 y Fn(multicast)48 b(\()p Fb(mc)p
Fn(,)i Fb(v)7 b Fn(\))80 b Fq(multicasts)34 b(the)e(v)n(alue)h
Fb(v)k Fq(on)32 b(the)g(channel)i Fb(mc)p Fq(.)53 b(This)32
b(is)g(a)784 3849 y(nonblocking)27 b(operation.)2113
5187 y(20)p eop
%%Page: 21 21
21 20 bop 241 555 a Fr(3.2)119 b(The)30 b Fm(TraceCML)e
Fr(structur)n(e)241 766 y Fq(The)h Fn(TraceCML)e Fq(structure)k(pro)o
(vides)h(rudimentary)g(deb)n(ugging)g(support)g(in)d(the)h(form)f(of)
241 879 y(mechanisms)e(to)e(control)i(deb)n(ugging)h(output,)f(and)f
(to)f(monitor)h(thread)h(termination.)36 b(This)241 992
y(v)o(ersion)28 b(of)f(this)g(module)g(is)g(adapted)i(from)d(Clif)n(f)h
(Krumvieda')-5 b(s)28 b(utility)g(for)f(tracing)i(CML)241
1105 y(programs.)61 b(It)34 b(pro)o(vides)h(three)g(f)o(acilities:)52
b(trace)35 b(modules,)i(for)e(controlling)i(deb)n(ugging)241
1218 y(output;)k(thread)35 b(w)o(atching,)k(for)34 b(detecting)i
(thread)g(termination;)42 b(and)34 b(a)g(mechanism)i(for)241
1331 y(reporting)26 b(uncaught)g(e)o(xceptions)g(on)e(a)f(per)g(thread)
i(basis.)382 1445 y(T)m(race)f(modules)h(pro)o(vide)h(a)e(hierarchical)
j(name)d(space,)h(which)g(is)f(used)h(to)f(control)h(the)241
1558 y(granularity)35 b(of)c(deb)n(ugging)k(output.)55
b(The)31 b(trace)h(module)h(operations)h(ha)n(v)o(e)f(been)f(imple-)241
1671 y(mented)g(in)g(such)g(a)g(w)o(ay)f(that)h(the)o(y)g(can)g(be)g
(in)l(v)n(ok)o(ed)j(independent)g(of)c(whether)i(CML)d(is)241
1784 y(currently)c(running.)k(This)24 b(allo)n(ws)g(the)f(trace)i
(hierarchy)g(to)f(be)f(setup)i(statically)-6 b(.)382
1899 y(The)18 b Fn(TraceCML)d Fq(also)k(pro)o(vides)h(hooks)f(to)f
(detect)i(une)o(xpected)h(termination)f(of)e(threads.)241
2012 y(Support)39 b(is)g(pro)o(vided)h(to)f(w)o(atch)g(for)g(a)f
(thread')-5 b(s)40 b(termination)h(\(useful)g(for)d(monitoring)241
2125 y(serv)o(ers)33 b(that)g(are)g(ne)n(v)o(er)g(supposed)i(to)d
(terminate\).)57 b(Hooks)33 b(are)g(also)g(pro)o(vided)h(to)f(spec-)241
2238 y(ify)23 b(the)h(action)h(tak)o(en)g(when)f(a)f(thread)i
(terminates)g(because)g(of)f(an)f(uncaught)j(e)o(xception.)241
2473 y Fp(Synopsis:)361 2587 y Fl(signature)18 b Fk(TRACE)p
1154 2587 28 4 v 31 w(CML)361 2700 y Fl(structure)73
b Fk(TraceCML:)50 b(TRACE)p 1754 2700 V 31 w(CML)241
2935 y Fp(Interface:)361 3037 y Fj(type)20 b Fn(trace)p
836 3037 25 4 v 29 w(module)361 3136 y Fj(datatype)14
b Fn(trace)p 1030 3136 V 29 w(to)49 b(=)h(TraceToOut)69
b Fh(j)63 b Fn(TraceToErr)69 b Fh(j)64 b Fn(TraceToNull)1203
3236 y Fh(j)g Fn(TraceToFile)48 b(of)h(string)1203 3336
y Fh(j)64 b Fn(TraceToStream)48 b(of)h(TextIO)o Fi(:)p
Fn(outstream)361 3464 y Fj(val)20 b Fn(setTraceFile:)97
b(trace)p 1533 3464 V 29 w(to)23 b Fh(!)g Fn(unit)361
3564 y Fj(val)d Fn(traceRoot:)98 b(trace)p 1384 3564
V 29 w(module)361 3664 y Fj(exception)19 b Fn(NoSuchModule)361
3763 y Fj(val)h Fn(traceModule:)97 b Fg(\()p Fn(trace)p
1515 3763 V 30 w(module)17 b(*)h(string)o Fg(\))23 b
Fh(!)g Fn(trace)p 2640 3763 V 29 w(module)361 3863 y
Fj(val)d Fn(nameOf:)98 b(trace)p 1234 3863 V 29 w(module)22
b Fh(!)h Fn(string)361 3962 y Fj(val)d Fn(moduleOf:)98
b(string)22 b Fh(!)h Fn(trace)p 1762 3962 V 29 w(module)361
4062 y Fj(val)d Fn(traceOn:)98 b(trace)p 1284 4062 V
29 w(module)22 b Fh(!)h Fn(unit)361 4162 y Fj(val)d Fn(traceOff:)98
b(trace)p 1334 4162 V 29 w(module)22 b Fh(!)h Fn(unit)361
4261 y Fj(val)d Fn(traceOnly:)98 b(trace)p 1384 4261
V 29 w(module)22 b Fh(!)h Fn(unit)361 4361 y Fj(val)d
Fn(amTracing:)98 b(trace)p 1384 4361 V 29 w(module)22
b Fh(!)h Fn(bool)361 4461 y Fj(val)d Fn(status:)98 b(trace)p
1234 4461 V 29 w(module)22 b Fh(!)h Fg(\()p Fn(trace)p
1973 4461 V 29 w(module)18 b(*)g(bool)o Fg(\))24 b Fn(list)361
4560 y Fj(val)c Fn(trace:)98 b Fg(\()p Fn(trace)p 1216
4560 V 30 w(module)17 b(*)p Fg(\()p Fn(unit)22 b Fh(!)i
Fn(string)d(list)p Fg(\)\))i Fh(!)g Fn(unit)361 4660
y Fj(val)d Fn(watcher:)98 b(trace)p 1284 4660 V 29 w(module)361
4759 y Fj(val)20 b Fn(watch:)98 b Fg(\()p Fn(string)18
b(*)g(CML)p Fi(:)p Fn(thread)p 1825 4759 V 29 w(id)o
Fg(\))24 b Fh(!)f Fn(unit)361 4859 y Fj(val)d Fn(unwatch:)98
b(CML)p Fi(:)p Fn(thread)p 1507 4859 V 28 w(id)23 b Fh(!)g
Fn(unit)361 4959 y Fj(val)d Fn(setUncaughtFn:)97 b Fg(\(\()p
Fn(CML)p Fi(:)p Fn(thread)p 1870 4959 V 29 w(id)18 b(*)g(exn)p
Fg(\))23 b Fh(!)g Fn(unit)o Fg(\))h Fh(!)f Fn(unit)1690
5187 y Fq(21)p eop
%%Page: 22 22
22 21 bop 784 555 a Fj(val)20 b Fn(setHandleFn:)98 b
Fg(\(\()p Fn(CML)p Fi(:)p Fn(thread)p 2194 555 25 4 v
29 w(id)18 b(*)g(exn)o Fg(\))24 b Fh(!)f Fn(bool)o Fg(\))g
Fh(!)g Fn(unit)784 655 y Fj(val)d Fn(resetUncaughtFn:)97
b(unit)22 b Fh(!)h Fn(unit)664 888 y Fp(Description:)664
1002 y Fl(type)e Fk(trace)p 1185 1002 28 4 v 31 w(module)784
1179 y Fq(A)j Fn(trace)p 1129 1179 25 4 v 29 w(module)e
Fq(is)j(an)f(element)i(in)e(a)g(hierarchical)k(name)d(space,)h(which)e
(is)h(used)g(to)784 1292 y(control)g(deb)n(ugging)i(output.)664
1469 y Fl(datatype)14 b Fk(trace)p 1398 1469 28 4 v 30
w(to)54 b(=)g(TraceToOut)73 b Fd(j)d Fk(TraceToErr)i
Fd(j)e Fk(TraceToNull)1587 1582 y Fd(j)g Fk(TraceToFile)49
b(of)54 b(string)1587 1695 y Fd(j)70 b Fk(TraceToStream)48
b(of)54 b(TextIO)m Ff(:)p Fk(outstream)784 1852 y Fq(The)23
b(v)n(arious)i(destinations)i(of)d(trace)g(output.)664
2029 y Fl(val)e Fk(setTraceFile:)103 b(trace)p 1949 2029
V 30 w(to)25 b Fd(!)g Fk(unit)784 2206 y Fn(setTraceFile)48
b Fb(tt)75 b Fq(Direct)27 b(the)g(destination)j(of)c(trace)i(output.)39
b(Note:)c Fn(TraceTo-)784 2319 y(Stream)22 b Fq(can)i(only)g(be)g
(speci\002ed)g(as)g(a)f(destination)k(if)c(CML)f(is)h(running.)664
2496 y Fl(val)f Fk(traceRoot:)104 b(trace)p 1785 2496
V 31 w(module)784 2673 y Fn(traceRoot)71 b Fq(is)23 b(the)h(root)g
(module)h(of)e(the)h(trace)g(hierarchy)664 2850 y Fl(val)e
Fk(traceModule:)103 b Fc(\()p Fk(trace)p 1929 2850 V
31 w(module)17 b(*)j(string)m Fc(\))26 b Fd(!)f Fk(trace)p
3161 2850 V 31 w(module)784 3027 y Fn(traceModule)48
b(\()p Fb(tm)q Fn(,)h Fb(s)p Fn(\))71 b Fq(creates)23
b(a)f(ne)n(w)f(trace)i(module)f(that)h(is)f(a)f(child)i(of)f
Fb(tm)g Fq(and)784 3140 y(has)i(the)g(label)g Fb(s)p
Fq(.)k(If)23 b(such)i(a)e(module)h(e)o(xists,)g(it)g(just)g(returns)h
(the)f(e)o(xisting)h(module.)664 3317 y Fl(val)d Fk(nameOf:)105
b(trace)p 1621 3317 V 31 w(module)22 b Fd(!)k Fk(string)784
3494 y Fn(nameOf)49 b Fb(tm)73 b Fq(returns)25 b(the)f(full)g(name)g
(of)f(the)h(module)h Fb(tm)p Fq(.)664 3671 y Fl(val)d
Fk(moduleOf:)105 b(string)22 b Fd(!)j Fk(trace)p 2199
3671 V 31 w(module)784 3848 y Fn(moduleOf)48 b Fb(name)83
b Fq(returns)36 b(the)e(trace)h(module)g(named)g(by)f
Fb(name)o Fq(.)60 b(T)m(race)34 b(module)784 3961 y(names)27
b(are)g(written)g(in)f(the)h(style)g(of)f(Unix)h(pathnames)h(\(e.g.,)f
(using)g Fn("/")e Fq(as)i(a)f(separa-)784 4074 y(tor\).)664
4251 y Fl(val)c Fk(traceOn:)105 b(trace)p 1676 4251 V
30 w(module)23 b Fd(!)i Fk(unit)784 4428 y Fn(traceOn)49
b Fb(tm)73 b Fq(turns)25 b(tracing)g(on)e(for)h(moduel)h
Fb(tm)e Fq(and)h(its)g(descendents.)664 4605 y Fl(val)e
Fk(traceOff:)105 b(trace)p 1731 4605 V 30 w(module)23
b Fd(!)i Fk(unit)784 4782 y Fn(traceOff)48 b Fb(tm)74
b Fq(turns)24 b(tracing)i(of)n(f)d(for)h(moduel)g Fb(tm)g
Fq(and)g(its)f(descendents.)664 4959 y Fl(val)f Fk(traceOnly:)104
b(trace)p 1785 4959 V 31 w(module)22 b Fd(!)j Fk(unit)2113
5187 y Fq(22)p eop
%%Page: 23 23
23 22 bop 361 555 a Fn(traceOnly)48 b Fb(tm)73 b Fq(turn)24
b(tracing)i(on)d(for)h(module)g Fb(tm)q Fq(,)f(b)n(ut)h(not)g(for)g
(its)f(descendents.)241 730 y Fl(val)e Fk(amTracing:)105
b(trace)p 1362 730 28 4 v 30 w(module)23 b Fd(!)i Fk(bool)361
906 y Fn(amTracing)48 b Fb(tm)73 b Fq(returns)25 b Fn(true)d
Fq(if)i(tracing)h(is)e(enabled)j(for)d(module)i Fb(tm)q
Fq(.)241 1081 y Fl(val)c Fk(status:)106 b(trace)p 1198
1081 V 30 w(module)23 b Fd(!)i Fc(\()p Fk(trace)p 2007
1081 V 31 w(module)17 b(*)j(bool)n Fc(\))26 b Fk(list)361
1256 y Fn(status)48 b Fb(tm)80 b Fq(returns)31 b(a)e(pre-order)j(list)e
(of)g(the)g(modules)h(rooted)g(at)e Fb(tm)q Fq(,)h(along)h(with)361
1369 y(their)24 b(status)h(\(enabled)h(or)d(disabled\).)241
1544 y Fl(val)e Fk(trace:)106 b Fc(\()p Fk(trace)p 1178
1544 V 31 w(module)18 b(*)o Fc(\()p Fk(unit)24 b Fd(!)h
Fk(string)e(list)n Fc(\)\))j Fd(!)f Fk(unit)361 1719
y Fn(trace)49 b(\()p Fb(tm)p Fn(,)h Fb(f)5 b Fn(\))72
b Fq(e)o(xplain)25 b(the)f(use)g(and)g(semantics)h(of)f(trace)g(HERE.)
241 1894 y Fl(val)d Fk(watcher:)106 b(trace)p 1253 1894
V 30 w(module)361 2070 y Fn(watcher)77 b Fq(is)29 b(a)g(trace)i(module)
f(that)g(is)g(used)g(to)f(control)j(the)d(printing)j(of)d(thread)i(ter)
n(-)361 2182 y(mination)36 b(messages.)66 b(Its)35 b(name)h(is)f
Fn("/ThreadWatcher/")p Fq(,)f(and)i(by)f(def)o(ault)i(it)e(is)361
2295 y(enabled.)241 2471 y Fl(val)21 b Fk(watch:)106
b Fc(\()p Fk(string)18 b(*)i(CML)o Ff(:)p Fk(thread)p
1845 2471 V 30 w(id)o Fc(\))26 b Fd(!)f Fk(unit)361 2646
y Fn(watch)49 b(\()p Fb(name)o Fn(,)g Fb(tid)s Fn(\))81
b Fq(w)o(atch)33 b(the)g(thread)h(named)f(by)g Fb(tid)h
Fq(for)f(une)o(xpected)i(ter)n(-)361 2759 y(mination.)81
b(If)40 b(the)h(thread)h(terminates,)k(then)c(a)e(trace)h(message)h(is)
e(generated)j(\(see)361 2872 y Fn(watcher)p Fq(\).)53
b(The)31 b(string)j Fb(name)c Fq(is)i(used)h(to)g(identify)h(the)e
(thread)i(in)e(the)g(termination)361 2984 y(message.)241
3160 y Fl(val)21 b Fk(unwatch:)106 b(CML)n Ff(:)p Fk(thread)p
1496 3160 V 30 w(id)25 b Fd(!)g Fk(unit)361 3335 y Fn(unwatch)48
b Fb(tid)76 b Fq(stop)24 b(w)o(atching)h(the)f(thread)h(named)f(by)f
Fb(tid)s Fq(.)241 3510 y Fl(val)e Fk(setUncaughtFn:)103
b Fc(\(\()p Fk(CML)o Ff(:)p Fk(thread)p 1894 3510 V 30
w(id)20 b(*)f(exn)o Fc(\))26 b Fd(!)f Fk(unit)n Fc(\))h
Fd(!)f Fk(unit)361 3685 y Fn(setUncaughtFn)47 b Fb(f)78
b Fq(sets)24 b(the)g(def)o(ault)h(uncaught)h(e)o(xception)g(action)f
(to)e Fb(f)5 b Fq(.)241 3860 y Fl(val)21 b Fk(setHandleFn:)104
b Fc(\(\()p Fk(CML)o Ff(:)p Fk(thread)p 1785 3860 V 30
w(id)20 b(*)f(exn)o Fc(\))26 b Fd(!)f Fk(bool)n Fc(\))h
Fd(!)f Fk(unit)361 4035 y Fn(setHandleFn)48 b Fb(f)90
b Fq(adds)37 b(the)g(function)h Fb(f)j Fq(as)36 b(an)g(additional)k
(uncaught)e(e)o(xception)361 4148 y(action.)h(If)27 b(the)f(action)i
(returns)h Fn(true)p Fq(,)c(then)j(no)e(further)j(action)f(is)e(tak)o
(en.)39 b(This)27 b(can)g(be)361 4261 y(used)d(to)g(handle)h
(application)h(speci\002c)f(e)o(xceptions.)241 4436 y
Fl(val)c Fk(resetUncaughtFn)o(:)103 b(unit)23 b Fd(!)j
Fk(unit)361 4612 y Fn(resetUncaughtFn)47 b Fb(\(\))82
b Fq(resets)35 b(the)f(def)o(ault)i(uncaught)g(e)o(xception)g(action)f
(to)e(the)361 4725 y(system)24 b(def)o(ault,)h(and)f(remo)o(v)o(es)g
(an)o(y)g(layered)h(actions.)1690 5187 y(23)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
